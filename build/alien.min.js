//   _  /._  _  r5 2017-08-24 11:10pm
//  /_|///_'/ /
window.Events||(window.Events={BROWSER_FOCUS:"browser_focus",KEYBOARD_DOWN:"keyboard_down",KEYBOARD_UP:"keyboard_up",KEYBOARD_PRESS:"keyboard_press",RESIZE:"resize",COMPLETE:"complete",PROGRESS:"progress",UPDATE:"update",LOADED:"loaded",ERROR:"error",READY:"ready",HOVER:"hover",CLICK:"click"});class EventManager{constructor(){let e=[];this.add=((t,i,s)=>{e.push({event:t,callback:i,object:s})}),this.remove=((t,i)=>{for(let s=e.length-1;s>-1;s--)e[s].event===t&&e[s].callback===i&&(e[s]=null,e.splice(s,1))}),this.destroy=(t=>{if(!t){window.events.destroy(this);for(let t=e.length-1;t>-1;t--)e[t]=null,e.splice(t,1);return null}for(let i=e.length-1;i>-1;i--)e[i].object===t&&(e[i]=null,e.splice(i,1))}),this.fire=((t,i={})=>{for(let s=0;s<e.length;s++)e[s].event===t&&e[s].callback(i)}),this.subscribe=((e,t)=>(window.events.add(e,t,this),t)),this.unsubscribe=((e,t)=>{window.events.remove(e,t,this)})}}window.events||(window.events=new EventManager),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(e=>Delayed(e,1e3/60)));let Render=new class{constructor(){function e(e){"focus"===e.type&&(i=Date.now())}function t(){let o=Date.now(),l=o-n,h=0,c=60;i&&(c=1e3/(h=o-i)),i=o;for(let e=s.length-1;e>-1;e--){let t=s[e];if(t){if(t.fps){if((a+=h>200?0:h)<1e3/t.fps)continue;a-=1e3/t.fps}t(o,l,h,c,t.frameCount++)}}s.length?window.requestAnimationFrame(t):(r=!1,window.events.remove(Events.BROWSER_FOCUS,e))}let i,s=[],n=Date.now(),a=0,r=!1;this.start=(i=>{i.frameCount=0,-1===s.indexOf(i)&&s.push(i),s.length&&!r&&(r=!0,window.requestAnimationFrame(t),window.events.add(Events.BROWSER_FOCUS,e))}),this.stop=(e=>{let t=s.indexOf(e);t>-1&&s.splice(t,1)})}};class DynamicObject{constructor(e){for(let t in e)this[t]=e[t];this.lerp=((t,i)=>{for(let s in e)this[s]+=(t[s]-this[s])*i;return this})}}let Device=new class{constructor(){this.agent=navigator.userAgent.toLowerCase(),this.prefix=(()=>{let e="",t="",i=window.getComputedStyle(document.documentElement,"");e=(Array.prototype.slice.call(i).join("").match(/-(moz|webkit|ms)-/)||""===i.OLink&&["","o"])[1],t="WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1];var s=this.detect("trident");return{unprefixed:s&&!this.detect("msie 9"),dom:t,lowercase:e,css:"-"+e+"-",js:(s?e[0]:e[0].toUpperCase())+e.substr(1)}})(),this.transformProperty=(()=>{let e;switch(this.prefix.lowercase){case"webkit":e="-webkit-transform";break;case"moz":e="-moz-transform";break;case"o":e="-o-transform";break;case"ms":e="-ms-transform";break;default:e="transform"}return e})(),this.mobile=!(!("ontouchstart"in window||"onpointerdown"in window)||!this.detect(["ios","iphone","ipad","android","blackberry"]))&&{},this.tablet=window.innerWidth>window.innerHeight?document.body.clientWidth>800:document.body.clientHeight>800,this.phone=!this.tablet,this.type=this.phone?"phone":"tablet"}detect(e){"string"==typeof e&&(e=[e]);for(let t=0;t<e.length;t++)if(this.agent.indexOf(e[t])>-1)return!0;return!1}vendor(e){return this.prefix.js+e}vibrate(e){navigator.vibrate&&navigator.vibrate(e)}},Utils=new class{rand(e,t){return new DynamicObject({v:e}).lerp({v:t},Math.random()).v}doRandom(e,t,i){if("number"==typeof i){let s=Math.pow(10,i);return Math.round(this.rand(e,t)*s)/s}return Math.round(this.rand(e-.5,t+.5))}headsTails(e,t){return this.doRandom(0,1)?t:e}toDegrees(e){return e*(180/Math.PI)}toRadians(e){return e*(Math.PI/180)}findDistance(e,t){let i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}timestamp(){return(Date.now()+this.doRandom(0,99999)).toString()}pad(e){return e<10?"0"+e:e}touchEvent(e){let t={};return t.x=0,t.y=0,e?(Device.mobile&&(e.touches||e.changedTouches)?e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t):t}clamp(e,t,i){return Math.min(Math.max(e,t),i)}constrain(e,t,i){return Math.min(Math.max(e,Math.min(t,i)),Math.max(t,i))}convertRange(e,t,i,s,n,a){let r=(e-t)*(n-s)/(i-t)+s;return a?this.constrain(r,s,n):r}nullObject(e){for(let t in e)void 0!==e[t]&&(e[t]=null);return null}cloneObject(e){return JSON.parse(JSON.stringify(e))}mergeObject(...e){let t={};for(let i of e)for(let e in i)t[e]=i[e];return t}cloneArray(e){return e.slice(0)}toArray(e){return Object.keys(e).map(t=>e[t])}queryString(e){return decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}basename(e){return e.replace(/.*\//,"").replace(/(.*)\..*$/,"$1")}base64(e){return window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))}},Interpolation=new class{constructor(){this.convertEase=(e=>(()=>{let t;switch(e){case"easeInQuad":t=this.Quad.In;break;case"easeInCubic":t=this.Cubic.In;break;case"easeInQuart":t=this.Quart.In;break;case"easeInQuint":t=this.Quint.In;break;case"easeInSine":t=this.Sine.In;break;case"easeInExpo":t=this.Expo.In;break;case"easeInCirc":t=this.Circ.In;break;case"easeInElastic":t=this.Elastic.In;break;case"easeInBack":t=this.Back.In;break;case"easeInBounce":t=this.Bounce.In;break;case"easeOutQuad":t=this.Quad.Out;break;case"easeOutCubic":t=this.Cubic.Out;break;case"easeOutQuart":t=this.Quart.Out;break;case"easeOutQuint":t=this.Quint.Out;break;case"easeOutSine":t=this.Sine.Out;break;case"easeOutExpo":t=this.Expo.Out;break;case"easeOutCirc":t=this.Circ.Out;break;case"easeOutElastic":t=this.Elastic.Out;break;case"easeOutBack":t=this.Back.Out;break;case"easeOutBounce":t=this.Bounce.Out;break;case"easeInOutQuad":t=this.Quad.InOut;break;case"easeInOutCubic":t=this.Cubic.InOut;break;case"easeInOutQuart":t=this.Quart.InOut;break;case"easeInOutQuint":t=this.Quint.InOut;break;case"easeInOutSine":t=this.Sine.InOut;break;case"easeInOutExpo":t=this.Expo.InOut;break;case"easeInOutCirc":t=this.Circ.InOut;break;case"easeInOutElastic":t=this.Elastic.InOut;break;case"easeInOutBack":t=this.Back.InOut;break;case"easeInOutBounce":t=this.Bounce.InOut;break;case"linear":t=this.Linear.None}return t})()||this.Cubic.Out),this.Linear={None:e=>e},this.Quad={In:e=>e*e,Out:e=>e*(2-e),InOut:e=>(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},this.Cubic={In:e=>e*e*e,Out:e=>--e*e*e+1,InOut:e=>(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},this.Quart={In:e=>e*e*e*e,Out:e=>1- --e*e*e*e,InOut:e=>(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},this.Quint={In:e=>e*e*e*e*e,Out:e=>--e*e*e*e*e+1,InOut:e=>(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},this.Sine={In:e=>1-Math.cos(e*Math.PI/2),Out:e=>Math.sin(e*Math.PI/2),InOut:e=>.5*(1-Math.cos(Math.PI*e))},this.Expo={In:e=>0===e?0:Math.pow(1024,e-1),Out:e=>1===e?1:1-Math.pow(2,-10*e),InOut:e=>0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},this.Circ={In:e=>1-Math.sqrt(1-e*e),Out:e=>Math.sqrt(1- --e*e),InOut:e=>(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},this.Elastic={In:e=>{let t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:e=>{let t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:e=>{let t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},this.Back={In:e=>{let t=1.70158;return e*e*((t+1)*e-t)},Out:e=>{let t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:e=>{let t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},this.Bounce={In:e=>1-this.Bounce.Out(1-e),Out:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,InOut:e=>e<.5?.5*this.Bounce.In(2*e):.5*this.Bounce.Out(2*e-1)+.5}}};class MathTween{constructor(e,t,i,s,n,a,r){function o(){return!m||m.kill||!e}function l(t){if(!o()){if(m.kill=!0,!t){for(let t in u)"number"==typeof u[t]&&(e[t]=u[t]);e.transform&&e.transform()}TweenManager.removeMathTween(m),e.mathTween=null}}let h,c,u,d,p,m=this;!function(){if(!o()){e.mathTween&&(e.mathTween.kill=!0),TweenManager.clearTween(e),TweenManager.addMathTween(m),e.mathTween=m,s=Interpolation.convertEase(s),h=Date.now(),h+=n,u=t,c={};for(let t in u)"number"==typeof e[t]&&(c[t]=e[t])}}(),this.update=(t=>{if(o())return;if(d||t<h)return;let n=s(p=(p=(t-h)/i)>1?1:p);for(let t in c)if("number"==typeof c[t]){let i=c[t],s=u[t];e[t]=i+(s-i)*n}a&&a(n),1===p&&(l(),r&&r()),e.transform&&e.transform()}),this.pause=(()=>{d=!0}),this.resume=(()=>{d=!1,h=Date.now()-p*i}),this.stop=(()=>l(!0))}}class SpringTween{constructor(e,t,i,s,n,a,r){function o(){return!f||f.kill||!e}function l(t){if(!o()){if(f.kill=!0,!t){for(let t in u)"number"==typeof u[t]&&(e[t]=u[t]);e.transform&&e.transform()}TweenManager.removeMathTween(f),e.mathTween=null}}let h,c,u,d,p,m,w,f=this;!function(){if(!o()){e.mathTween&&(e.mathTween.kill=!0),TweenManager.clearTween(e),TweenManager.addMathTween(f),e.mathTween=f,h=Date.now(),h+=n,u={},d={},c={},(t.x||t.y||t.z)&&(void 0===t.x&&(t.x=e.x),void 0===t.y&&(t.y=e.y),void 0===t.z&&(t.z=e.z)),m=0,p=t.damping||.1,delete t.damping;for(let e in t)"number"==typeof t[e]&&(c[e]=0,u[e]=t[e]);for(let i in t)"number"==typeof e[i]&&(d[i]=e[i]||0,t[i]=d[i])}}(),this.update=(s=>{if(o())return;if(w||s<h)return;let n;for(let s in d)if("number"==typeof d[s]){let a=(u[s]-t[s])*p;c[s]+=a,c[s]*=i,t[s]+=c[s],e[s]=t[s],n=c[s]}a&&a(s),Math.abs(n)<.001&&++m>30&&(l(),r&&r()),e.transform&&e.transform()}),this.pause=(()=>{w=!0}),this.stop=(()=>l(!0))}}let TweenManager=new class{constructor(){function e(s){if(t.length)for(let e=0;e<t.length;e++)t[e].update(s);else i=!1,Render.stop(e)}this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"};let t=[],i=!1;this.addMathTween=(s=>{t.push(s),i||(i=!0,Render.start(e))}),this.removeMathTween=(e=>{let i=t.indexOf(e);i>-1&&t.splice(i,1)})}tween(e,t,i,s,n,a,r){"number"!=typeof n&&(r=a,a=n,n=0);let o=null;"undefined"!=typeof Promise&&(o=Promise.create(),a&&o.then(a),a=o.resolve);let l="spring"===s?new SpringTween(e,t,i,s,n,r,a):new MathTween(e,t,i,s,n,r,a);return o||l}clearTween(e){e.mathTween&&e.mathTween.stop()}clearCSSTween(e){e.cssTween&&e.cssTween.stop()}checkTransform(e){return this.TRANSFORMS.indexOf(e)>-1}getEase(e){let t=this.CSS_EASES;return t[e]||t.easeOutCubic}getAllTransforms(e){let t={};for(let i=this.TRANSFORMS.length-1;i>-1;i--){let s=this.TRANSFORMS[i],n=e[s];0!==n&&"number"==typeof n&&(t[s]=n)}return t}parseTransform(e){let t="";if(void 0!==e.x||void 0!==e.y||void 0!==e.z){let i="";i+=(e.x||0)+"px, ",i+=(e.y||0)+"px, ",t+="translate3d("+(i+=(e.z||0)+"px")+")"}return void 0!==e.scale?t+="scale("+e.scale+")":(void 0!==e.scaleX&&(t+="scaleX("+e.scaleX+")"),void 0!==e.scaleY&&(t+="scaleY("+e.scaleY+")")),void 0!==e.rotation&&(t+="rotate("+e.rotation+"deg)"),void 0!==e.rotationX&&(t+="rotateX("+e.rotationX+"deg)"),void 0!==e.rotationY&&(t+="rotateY("+e.rotationY+"deg)"),void 0!==e.rotationZ&&(t+="rotateZ("+e.rotationZ+"deg)"),void 0!==e.skewX&&(t+="skewX("+e.skewX+"deg)"),void 0!==e.skewY&&(t+="skewY("+e.skewY+"deg)"),void 0!==e.perspective&&(t+="perspective("+e.perspective+"px)"),t}};class CSSTransition{constructor(e,t,i,s,n,a){function r(){return!l||l.kill||!e||!e.element}function o(){r()||(l.kill=!0,e.element.style[Device.vendor("Transition")]="",e.cssTween=null)}let l=this,h=TweenManager.getAllTransforms(e),c=[];!function(){for(let e in t)TweenManager.checkTransform(e)?(h.use=!0,h[e]=t[e],delete t[e]):("number"==typeof t[e]||e.indexOf("-")>-1)&&c.push(e);h.use&&c.push(Device.transformProperty),delete h.use}(),function(){if(r())return;e.cssTween&&(e.cssTween.kill=!0),e.cssTween=l;let u="";for(let e=0;e<c.length;e++)u+=(u.length?", ":"")+c[e]+" "+i+"ms "+TweenManager.getEase(s)+" "+n+"ms";Delayed(()=>{r()||(e.element.style[Device.vendor("Transition")]=u,e.css(t),e.transform(h),Delayed(()=>{r()||(o(),a&&a())},i+n))},50)}(),this.stop=(()=>o())}}class Interface{constructor(e,t="div",i){if(this.events=new EventManager,"string"!=typeof e)this.element=e;else{if(this.name=e,this.type=t,"svg"===this.type){let e=i||"svg";i=!0,this.element=document.createElementNS("http://www.w3.org/2000/svg",e),this.element.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")}else this.element=document.createElement(this.type);"."!==e[0]?this.element.id=e:this.element.className=e.substr(1)}this.element.style.position="absolute",this.element.object=this,i||(window.Alien&&window.Alien.Stage?window.Alien.Stage:document.body).appendChild(this.element)}initClass(e,...t){let i=new e(...t);return this.add(i),i}clone(){return new Interface(this.element.cloneNode(!0))}create(e,t){let i=new Interface(e,t);return this.add(i),i}empty(){return this.element.innerHTML="",this}add(e){return e.element?(this.element.appendChild(e.element),e.parent=this):e.nodeName&&this.element.appendChild(e),this}remove(e){return e.element?e.destroy():e.nodeName&&e.parentNode.removeChild(e),this}destroy(){this.loop&&Render.stop(this.loop),this.events=this.events.destroy(),this.removed=!0;let e=this.parent;return e&&!e.removed&&e.remove&&e.remove(this.element),Utils.nullObject(this)}text(e){return void 0===e?this.element.textContent:(this.element.textContent=e,this)}html(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)}hide(){return this.element.style.display="none",this}show(){return this.element.style.display="",this}visible(){return this.element.style.visibility="visible",this}invisible(){return this.element.style.visibility="hidden",this}setZ(e){return this.element.style.zIndex=e,this}clearAlpha(){return this.element.style.opacity="",this}size(e,t){return void 0!==e&&(void 0===t&&(t=e),"string"==typeof e?("string"!=typeof t&&(t+="px"),this.element.style.width=e,this.element.style.height=t):(this.element.style.width=e+"px",this.element.style.height=t+"px",this.element.style.backgroundSize=e+"px "+t+"px")),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this}mouseEnabled(e){return this.element.style.pointerEvents=e?"auto":"none",this}fontStyle(e,t,i,s){return this.css({fontFamily:e,fontSize:t,color:i,fontStyle:s}),this}bg(e,t,i,s){return e.indexOf(".")>-1||e.indexOf("data:")>-1?this.element.style.backgroundImage="url("+e+")":this.element.style.backgroundColor=e,void 0!==t&&(t="number"==typeof t?t+"px":t,i="number"==typeof i?i+"px":i,this.element.style.backgroundPosition=t+" "+i),s&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=s),"cover"!==t&&"contain"!==t||(this.element.style.backgroundSize=t,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==i?i+" "+s:"center"),this}center(e,t,i){let s={};return void 0===e?(s.left="50%",s.top="50%",s.marginLeft=-this.width/2,s.marginTop=-this.height/2):(e&&(s.left="50%",s.marginLeft=-this.width/2),t&&(s.top="50%",s.marginTop=-this.height/2)),i&&(delete s.left,delete s.top),this.css(s),this}mask(e){return this.element.style[Device.vendor("Mask")]=(e.indexOf(".")>-1?"url("+e+")":e)+" no-repeat",this.element.style[Device.vendor("MaskSize")]="contain",this}blendMode(e,t){return this.element.style[t?"background-blend-mode":"mix-blend-mode"]=e,this}css(e,t){if("object"!=typeof e){if(t)return this.element.style[e]=t,this;{let t=this.element.style[e];return"number"!=typeof t&&(t.indexOf("px")>-1&&(t=Number(t.slice(0,-2))),"opacity"===e&&(t=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),t||(t=0),t}}for(let t in e){let i=e[t];"string"!=typeof i&&"number"!=typeof i||("string"!=typeof i&&"opacity"!==t&&"zIndex"!==t&&(i+="px"),this.element.style[t]=i)}return this}transform(e){if(e)for(let t in e)"number"==typeof e[t]&&(this[t]=e[t]);else e=this;return this.element.style[Device.vendor("Transform")]=TweenManager.parseTransform(e),this}enable3D(e,t,i){return this.element.style[Device.vendor("TransformStyle")]="preserve-3d",e&&(this.element.style[Device.vendor("Perspective")]=e+"px"),void 0!==t&&(t="number"==typeof t?t+"px":t,i="number"==typeof i?i+"px":i,this.element.style[Device.vendor("PerspectiveOrigin")]=t+" "+i),this}disable3D(){return this.element.style[Device.vendor("TransformStyle")]="",this.element.style[Device.vendor("Perspective")]="",this}transformPoint(e,t,i){let s="";return void 0!==e&&(s+="number"==typeof e?e+"px ":e+" "),void 0!==t&&(s+="number"==typeof t?t+"px ":t+" "),void 0!==i&&(s+="number"==typeof i?i+"px":i),this.element.style[Device.vendor("TransformOrigin")]=s,this}tween(e,t,i,s,n){"number"!=typeof s&&(n=s,s=0);let a=null;"undefined"!=typeof Promise&&(a=Promise.create(),n&&a.then(n),n=a.resolve);let r=new CSSTransition(this,e,t,i,s,n);return a||r}clearTransform(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style[Device.transformProperty]="",this}stopTween(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}attr(e,t){return void 0===t?this.element.getAttribute(e):(""===t?this.element.removeAttribute(e):this.element.setAttribute(e,t),this)}svgSymbol(e,t,i){if(void 0!==SVGSymbol){let s=SVGSymbol.getConfig(e);this.html(`<svg viewBox="0 0 ${s.width} ${s.height}" width="${t}" height="${i}"><use xlink:href="#${s.id}" x="0" y="0"/></svg>`)}}startRender(e){this.loop=e,Render.start(e)}stopRender(e){this.loop=null,Render.stop(e)}click(e){return this.element.addEventListener("click",t=>{t.object="hit"===this.element.className?this.parent:this,t.action="click",e&&e(t)}),this.element.style.cursor="pointer",this}hover(e){let t=t=>{t.object="hit"===this.element.className?this.parent:this,t.action="mouseout"===t.type?"out":"over",e&&e(t)};return this.element.addEventListener("mouseover",t),this.element.addEventListener("mouseout",t),this}press(e){let t=t=>{t.object="hit"===this.element.className?this.parent:this,t.action="mousedown"===t.type?"down":"up",e&&e(t)};return this.element.addEventListener("mousedown",t),this.element.addEventListener("mouseup",t),this}bind(e,t){return"touchstart"!==e||Device.mobile?"touchmove"!==e||Device.mobile?"touchend"!==e||Device.mobile||(e="mouseup"):e="mousemove":e="mousedown",this.element.addEventListener(e,t),this}unbind(e,t){return"touchstart"!==e||Device.mobile?"touchmove"!==e||Device.mobile?"touchend"!==e||Device.mobile||(e="mouseup"):e="mousemove":e="mousedown",this.element.removeEventListener(e,t),this}interact(e,t){return this.hit=this.create(".hit").css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}),Device.mobile?this.hit.touchClick(e,t):this.hit.hover(e).click(t),this}touchClick(e,t){let i,s,n={},a={},r=e=>{let t=Utils.touchEvent(e);e.touchX=t.x,e.touchY=t.y,n.x=e.touchX,n.y=e.touchY};return this.element.addEventListener("touchmove",e=>{a=Utils.touchEvent(e),s=Utils.findDistance(n,a)>5},{passive:!0}),this.element.addEventListener("touchstart",t=>{i=Date.now(),t.action="over",t.object="hit"===this.element.className?this.parent:this,r(t),e&&!s&&e(t)},{passive:!0}),this.element.addEventListener("touchend",n=>{let a=Date.now();n.object="hit"===this.element.className?this.parent:this,r(n),i&&a-i<750&&t&&!s&&(n.action="click",t&&!s&&t(n)),e&&(n.action="out",e(n)),s=!1},{passive:!0}),this}split(e=""){let t={position:"relative",display:"block",width:"auto",height:"auto",margin:0,padding:0,cssFloat:"left"},i=[],s=this.text().split(e);this.empty();for(let n=0;n<s.length;n++)" "===s[n]&&(s[n]="&nbsp;"),i.push(this.create(".t","span").html(s[n]).css(t)),""!==e&&n<s.length-1&&i.push(this.create(".t","span").html(e).css(t));return i}}class Canvas{constructor(e,t,i=t,s){let n=new Interface(e,"canvas",!0);this.element=n.element,this.context=this.element.getContext("2d"),this.children=[],this.retina=s;let a=s?2:1;this.element.width=t*a,this.element.height=i*a,this.context.scale(a,a),n.size(t,i),this.toDataURL=((e,t)=>this.element.toDataURL(e,t)),this.render=(e=>{"boolean"==typeof e&&e||this.clear();for(let e=0;e<this.children.length;e++)this.children[e].render()}),this.clear=(()=>{this.context.clearRect(0,0,this.element.width,this.element.height)}),this.add=(e=>{e.setCanvas(this),e.parent=this,this.children.push(e),e.z=this.children.length}),this.remove=(e=>{e.canvas=null,e.parent=null;let t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)}),this.destroy=(()=>{for(let e=0;e<this.children.length;e++)this.children[e].destroy();return n=n.destroy()}),this.getImageData=((e=0,t=0,i=this.element.width,s=this.element.height)=>(this.imageData=this.context.getImageData(e,t,i,s),this.imageData)),this.getPixel=((e,t,i)=>{this.imageData&&!i||this.getImageData();let s={},n=4*(e+t*this.element.width),a=this.imageData.data;return s.r=a[n],s.g=a[n+1],s.b=a[n+2],s.a=a[n+3],s}),this.putImageData=(e=>{this.context.putImageData(e,0,0)})}}class CanvasValues{constructor(e){this.styles={},e?this.styled=!1:this.data=new Float32Array(6)}set shadowOffsetX(e){this.styled=!0,this.styles.shadowOffsetX=e}get shadowOffsetX(){return this.styles.shadowOffsetX}set shadowOffsetY(e){this.styled=!0,this.styles.shadowOffsetY=e}get shadowOffsetY(){return this.styles.shadowOffsetY}set shadowBlur(e){this.styled=!0,this.styles.shadowBlur=e}get shadowBlur(){return this.styles.shadowBlur}set shadowColor(e){this.styled=!0,this.styles.shadowColor=e}get shadowColor(){return this.styles.shadowColor}get values(){return this.styles}setTRSA(e,t,i,s,n,a){let r=this.data;r[0]=e,r[1]=t,r[2]=i,r[3]=s,r[4]=n,r[5]=a}calculate(e){let t=e.data,i=this.data;i[0]=i[0]+t[0],i[1]=i[1]+t[1],i[2]=i[2]+t[2],i[3]=i[3]*t[3],i[4]=i[4]*t[4],i[5]=i[5]*t[5]}calculateStyle(e){if(!e.styled)return!1;this.styled=!0;let t=e.values;for(let e in t)this.styles[e]||(this.styles[e]=t[e])}}class CanvasObject{constructor(){this.visible=!0,this.blendMode="source-over",this.x=0,this.y=0,this.px=0,this.py=0,this.clipX=0,this.clipY=0,this.clipWidth=0,this.clipHeight=0,this.width=0,this.height=0,this.rotation=0,this.scale=1,this.opacity=1,this.values=new CanvasValues,this.styles=new CanvasValues(!0),this.children=[]}updateValues(){this.values.setTRSA(this.x,this.y,Utils.toRadians(this.rotation),this.scaleX||this.scale,this.scaleY||this.scale,this.opacity),this.parent.values&&this.values.calculate(this.parent.values),this.parent.styles&&this.styles.calculateStyle(this.parent.styles)}render(e){if(!this.visible)return!1;this.updateValues(),this.draw&&this.draw(e);for(let t=0;t<this.children.length;t++)this.children[t].render(e)}startDraw(e,t,i){let s=this.canvas.context,n=this.values.data,a=n[0]+(e||0),r=n[1]+(t||0);if(s.save(),i||(s.globalCompositeOperation=this.blendMode),s.translate(a,r),s.rotate(n[2]),s.scale(n[3],n[4]),s.globalAlpha=n[5],this.styles.styled){let e=this.styles.values;for(let t in e)s[t]=e[t]}}endDraw(){this.canvas.context.restore()}add(e){e.canvas=this.canvas,e.parent=this,this.children.push(e),e.z=this.children.length;for(let e=this.children.length-1;e>-1;e--)this.children[e].setCanvas(this.canvas)}setCanvas(e){this.canvas=e;for(let t=this.children.length-1;t>-1;t--)this.children[t].setCanvas(e)}remove(e){e.canvas=null,e.parent=null;let t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)}isMask(){let e=this;for(;e;){if(e.masked)return!0;e=e.parent}return!1}unmask(){this.masked.mask(null),this.masked=null}setZ(e){this.z=e,this.parent.children.sort((e,t)=>e.z-t.z)}follow(e){return this.x=e.x,this.y=e.y,this.px=e.px,this.py=e.py,this.clipX=e.clipX,this.clipY=e.clipY,this.clipWidth=e.clipWidth,this.clipHeight=e.clipHeight,this.width=e.width,this.height=e.height,this.rotation=e.rotation,this.scale=e.scale,this.scaleX=e.scaleX||e.scale,this.scaleY=e.scaleY||e.scale,this}visible(){return this.visible=!0,this}invisible(){return this.visible=!1,this}transform(e){for(let t in e)"number"==typeof e[t]&&(this[t]=e[t]);return this}transformPoint(e,t){return this.px="number"==typeof e?e:this.width*(parseFloat(e)/100),this.py="number"==typeof t?t:this.height*(parseFloat(t)/100),this}clip(e,t,i,s){return this.clipX=e,this.clipY=t,this.clipWidth=i,this.clipHeight=s,this}destroy(){for(let e=0;e<this.children.length;e++)this.children[e].destroy();return Utils.nullObject(this)}}let Images=new class{createImg(e,t){let i=new Image;return i.src=(Config.CDN||"")+e,i.onload=(()=>{t&&t()}),i}promise(e){let t=Promise.create();return e.onload=t.resolve,t}};class CanvasGraphics extends CanvasObject{constructor(e=0,t=e){function i(e){for(let t in s.props)e[t]=s.props[t]}super();let s=this;this.width=e,this.height=t,this.props={};let n,a={},r=[];this.draw=(e=>{if(this.isMask()&&!e)return!1;let t=this.canvas.context;this.startDraw(this.px,this.py,e),i(t),this.clipWidth&&this.clipHeight&&(t.beginPath(),t.rect(this.clipX,this.clipY,this.clipWidth,this.clipHeight),t.clip());for(let e=0;e<r.length;e++){let i=r[e];if(!i)continue;let s=i.shift();t[s].apply(t,i),i.unshift(s)}this.endDraw(),n&&(t.globalCompositeOperation=n.blendMode,n.render(!0))}),this.clear=(()=>{for(let e=0;e<r.length;e++)r[e].length=0;r.length=0}),this.arc=((e=0,t=0,i=0,s=this.radius||this.width/2,n=0,a=!1)=>{e&&!t&&(i=e,e=0,t=0),i-=90,n-=90,r.push(["beginPath"]),r.push(["arc",e,t,s,Utils.toRadians(n),Utils.toRadians(i),a])}),this.quadraticCurveTo=((e,t,i,s)=>{r.push(["quadraticCurveTo",e,t,i,s])}),this.bezierCurveTo=((e,t,i,s,n,a)=>{r.push(["bezierCurveTo",e,t,i,s,n,a])}),this.fillRect=((e,t,i,s)=>{r.push(["fillRect",e,t,i,s])}),this.clearRect=((e,t,i,s)=>{r.push(["clearRect",e,t,i,s])}),this.strokeRect=((e,t,i,s)=>{r.push(["strokeRect",e,t,i,s])}),this.moveTo=((e,t)=>{r.push(["moveTo",e,t])}),this.lineTo=((e,t)=>{r.push(["lineTo",e,t])}),this.stroke=(()=>{r.push(["stroke"])}),this.fill=(()=>{n||r.push(["fill"])}),this.beginPath=(()=>{r.push(["beginPath"])}),this.closePath=(()=>{r.push(["closePath"])}),this.fillText=((e,t,i)=>{r.push(["fillText",e,t,i])}),this.strokeText=((e,t,i)=>{r.push(["strokeText",e,t,i])}),this.setLineDash=(e=>{r.push(["setLineDash",e])}),this.createImage=((e,t)=>{if(!a[e]||t){let i=Images.createImg(e);if(t)return i;a[e]=i}return a[e]}),this.drawImage=((e,t=0,i=0,s=e.width,n=e.height,a=0,o=0,l=e.width,h=e.height)=>{"string"==typeof e&&(e=this.createImage(e)),r.push(["drawImage",e,t,i,s,n,a+-this.px,o+-this.py,l,h])}),this.mask=(e=>{if(!e)return n=null;n=e,e.masked=this;for(let e=0;e<r.length;e++)"fill"!==r[e][0]&&"stroke"!==r[e][0]||(r[e].length=0,r.splice(e,1))}),this.clone=(()=>{let e=new CanvasGraphics(this.width,this.height);return e.visible=this.visible,e.blendMode=this.blendMode,e.opacity=this.opacity,e.follow(this),e.props=Utils.cloneObject(this.props),e.setDraw(Utils.cloneArray(r)),e}),this.setDraw=(e=>{r=e})}set strokeStyle(e){this.props.strokeStyle=e}get strokeStyle(){return this.props.strokeStyle}set fillStyle(e){this.props.fillStyle=e}get fillStyle(){return this.props.fillStyle}set lineWidth(e){this.props.lineWidth=e}get lineWidth(){return this.props.lineWidth}set lineCap(e){this.props.lineCap=e}get lineCap(){return this.props.lineCap}set lineDashOffset(e){this.props.lineDashOffset=e}get lineDashOffset(){return this.props.lineDashOffset}set lineJoin(e){this.props.lineJoin=e}get lineJoin(){return this.props.lineJoin}set miterLimit(e){this.props.miterLimit=e}get miterLimit(){return this.props.miterLimit}set font(e){this.props.font=e}get font(){return this.props.font}set textAlign(e){this.props.textAlign=e}get textAlign(){return this.props.textAlign}set textBaseline(e){this.props.textBaseline=e}get textBaseline(){return this.props.textBaseline}}class CanvasImage extends CanvasGraphics{constructor(e,t,i,s=i){super(i,s);let n=e.initClass(Canvas,t,i,s);this.img=(e=>(this.drawImage(e,0,0,i,s),n.add(this),this))}}let CanvasFont=new class{constructor(){function e(e,t,i,s,n,a,r,o){let l=e.context,h=e.initClass(CanvasGraphics,t,i);h.font=n,h.fillStyle=a,h.totalWidth=0,h.totalHeight=i;let c,u=s.split(""),d=0,p=0;l.font=n;for(let e=0;e<u.length;e++)h.totalWidth+=l.measureText(u[e]).width+r;switch(o){case"start":case"left":p=0;break;case"end":case"right":p=t-h.totalWidth;break;case"center":p=(t-h.totalWidth)/2}do{c=u[d++],h.fillText(c,p,0),p+=l.measureText(c).width+r}while(d<s.length);return h}this.createText=((t,i,s,n,a,r,{letterSpacing:o=0,lineHeight:l=s,textAlign:h="start"})=>{let c=t.context;if(s===l)return e(t,i,s,n,a,r,o,h);{let u=t.initClass(CanvasGraphics,i,s),d=n.split(" "),p="",m=[];u.totalWidth=0,u.totalHeight=0,c.font=a;for(let e=0;e<d.length;e++){let t=p+d[e]+" ",s=t.split(""),n=0;for(let e=0;e<s.length;e++)n+=c.measureText(s[e]).width+o;n>i&&e>0?(m.push(p),p=d[e]+" "):p=t}return m.push(p),m.every((s,n)=>{let c=e(t,i,l,s,a,r,o,h);return c.y=n*l,u.add(c),u.totalWidth=Math.max(c.totalWidth,u.totalWidth),u.totalHeight+=l,!0}),u}})}},Mouse=new class{constructor(){this.x=0,this.y=0;let e=e=>{this.x=e.x,this.y=e.y};this.capture=(()=>{this.active||(this.active=!0,this.x=0,this.y=0,Device.mobile?(window.addEventListener("touchmove",e),window.addEventListener("touchstart",e)):window.addEventListener("mousemove",e))}),this.stop=(()=>{this.active=!1,this.x=0,this.y=0,Device.mobile?(window.removeEventListener("touchmove",e),window.removeEventListener("touchstart",e)):window.removeEventListener("mousemove",e)})}},Accelerometer=new class{constructor(){function e(e){switch(window.orientation){case 0:s.x=-e.accelerationIncludingGravity.x,s.y=e.accelerationIncludingGravity.y,s.z=e.accelerationIncludingGravity.z,e.rotationRate&&(s.rotationRate.alpha=e.rotationRate.beta*s.toRadians,s.rotationRate.beta=-e.rotationRate.alpha*s.toRadians,s.rotationRate.gamma=e.rotationRate.gamma*s.toRadians);break;case 180:s.x=e.accelerationIncludingGravity.x,s.y=-e.accelerationIncludingGravity.y,s.z=e.accelerationIncludingGravity.z,e.rotationRate&&(s.rotationRate.alpha=-e.rotationRate.beta*s.toRadians,s.rotationRate.beta=e.rotationRate.alpha*s.toRadians,s.rotationRate.gamma=e.rotationRate.gamma*s.toRadians);break;case 90:s.x=e.accelerationIncludingGravity.y,s.y=e.accelerationIncludingGravity.x,s.z=e.accelerationIncludingGravity.z,e.rotationRate&&(s.rotationRate.alpha=e.rotationRate.alpha*s.toRadians,s.rotationRate.beta=e.rotationRate.beta*s.toRadians,s.rotationRate.gamma=e.rotationRate.gamma*s.toRadians);break;case-90:s.x=-e.accelerationIncludingGravity.y,s.y=-e.accelerationIncludingGravity.x,s.z=e.accelerationIncludingGravity.z,e.rotationRate&&(s.rotationRate.alpha=-e.rotationRate.alpha*s.toRadians,s.rotationRate.beta=-e.rotationRate.beta*s.toRadians,s.rotationRate.gamma=e.rotationRate.gamma*s.toRadians)}}function t(e){for(var t in e)-1!==t.toLowerCase().indexOf("heading")&&(s.heading=e[t]);switch(window.orientation){case 0:s.alpha=e.beta*s.toRadians,s.beta=-e.alpha*s.toRadians,s.gamma=e.gamma*s.toRadians;break;case 180:s.alpha=-e.beta*s.toRadians,s.beta=e.alpha*s.toRadians,s.gamma=e.gamma*s.toRadians;break;case 90:s.alpha=e.alpha*s.toRadians,s.beta=e.beta*s.toRadians,s.gamma=e.gamma*s.toRadians;break;case-90:s.alpha=-e.alpha*s.toRadians,s.beta=-e.beta*s.toRadians,s.gamma=e.gamma*s.toRadians}s.tilt=e.beta*s.toRadians,s.yaw=e.alpha*s.toRadians,s.roll=-e.gamma*s.toRadians,"Android"===Device.os&&(s.heading=i(e.alpha,e.beta,e.gamma))}function i(e,t,i){let s=Math.PI/180,n=t?t*s:0,a=i?i*s:0,r=e?e*s:0,o=Math.cos(a),l=Math.cos(r),h=Math.sin(n),c=Math.sin(a),u=Math.sin(r),d=-l*c-u*h*o,p=-u*c+l*h*o,m=Math.atan(d/p);return p<0?m+=Math.PI:d<0&&(m+=2*Math.PI),m*(180/Math.PI)}let s=this;this.x=0,this.y=0,this.z=0,this.alpha=0,this.beta=0,this.gamma=0,this.heading=0,this.rotationRate={},this.rotationRate.alpha=0,this.rotationRate.beta=0,this.rotationRate.gamma=0,this.toRadians="iOS"===Device.os?Math.PI/180:1,this.capture=(()=>{this.active||(this.active=!0,window.addEventListener("devicemotion",e),window.addEventListener("deviceorientation",t))}),this.stop=(()=>{this.active=!1,this.x=this.y=this.z=0,window.removeEventListener("devicemotion",e),window.removeEventListener("deviceorientation",t)})}},XHR=new class{constructor(){function e(i,s){if("object"==typeof s)for(let n in s){let a=i+"["+n+"]";"object"==typeof s[n]?e(a,s[n]):t.push(a+"="+s[n])}else t.push(i+"="+s)}this.headers={},this.options={};let t=[];this.get=((i,s,n,a)=>{if("function"==typeof s)a=n,n=s,s=null;else if("object"==typeof s){for(let t in s)e(t,s[t]);s=(s=(s=t.join("&")).replace(/\[/g,"%5B")).replace(/\]/g,"%5D"),t=null,i+="?"+s}let r=new XMLHttpRequest;r.open("GET",i,!0),"arraybuffer"===a&&(r.responseType="arraybuffer"),"blob"===a&&(r.responseType="blob"),"text"===a&&r.overrideMimeType("text/plain"),"json"===a&&r.setRequestHeader("Accept","application/json");for(let e in this.headers)r.setRequestHeader(e,this.headers[e]);for(let e in this.options)r[e]=this.options[e];let o=null;return"undefined"!=typeof Promise&&(o=Promise.create(),n&&o.then(n),n=o.resolve),r.send(),r.onreadystatechange=(()=>{n&&(4===r.readyState&&200===r.status?n("arraybuffer"===a||"blob"===a?r.response:"text"===a?r.responseText:JSON.parse(r.responseText)):0!=r.status&&400!=r.status&&401!=r.status&&404!=r.status&&500!=r.status||(o?o.reject(r):n(r)))}),o||r}),this.post=((i,s,n,a)=>{if("function"==typeof s)a=n,n=s,s=null;else if("object"==typeof s)if("json"===a)s=JSON.stringify(s);else{for(let t in s)e(t,s[t]);s=(s=(s=t.join("&")).replace(/\[/g,"%5B")).replace(/\]/g,"%5D"),t=null}let r=new XMLHttpRequest;r.open("POST",i,!0),"arraybuffer"===a&&(r.responseType="arraybuffer"),"blob"===a&&(r.responseType="blob"),"text"===a&&r.overrideMimeType("text/plain"),"json"===a&&r.setRequestHeader("Accept","application/json"),r.setRequestHeader("Content-Type","json"===a?"application/json":"application/x-www-form-urlencoded");for(let e in this.headers)r.setRequestHeader(e,this.headers[e]);for(let e in this.options)r[e]=this.options[e];let o=null;return"undefined"!=typeof Promise&&(o=Promise.create(),n&&o.then(n),n=o.resolve),r.send(),r.onreadystatechange=(()=>{n&&(4===r.readyState&&200===r.status?n("arraybuffer"===a||"blob"===a?r.response:"text"===a?r.responseText:JSON.parse(r.responseText)):0!=r.status&&400!=r.status&&401!=r.status&&404!=r.status&&500!=r.status||(o?o.reject(r):n(r)))}),o||r})}};class AssetLoader{constructor(e,t){function i(){r=++a/n,s.events.fire(Events.PROGRESS,{percent:r}),a===n&&(s.complete=!0,s.events.fire(Events.COMPLETE),t&&t())}Array.isArray(e)&&(e=e.map(e=>Utils.basename(e)).reduce((t,i,s)=>(t[i]=e[s],t),{}));let s=this;this.events=new EventManager,this.CDN=Config.CDN||"";let n=Object.keys(e).length,a=0,r=0;for(let t in e)!function(e,t){let s=t.split("/"),n=(s=s[s.length-1]).split(".");switch(n[n.length-1].split("?")[0]){case"mp3":if(void 0===WebAudio)return i();if(!window.AudioContext)return i();XHR.get(t,t=>{WebAudio.createSound(e,t,i)},"arraybuffer");break;default:Images.createImg(t,i)}}(t,this.CDN+e[t])}}AssetLoader.loadAssets=((e,t)=>{let i=Promise.create();return t||(t=i.resolve),new AssetLoader(e,t),i});let Stage=new class extends Interface{constructor(){function e(){i.size(),Device.mobile&&(i.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait")}super("Stage");let t,i=this;i.css({overflow:"hidden"}),window.addEventListener("focus",()=>{"focus"!==t&&(t="focus",window.events.fire(Events.BROWSER_FOCUS,{type:"focus"}))}),window.addEventListener("blur",()=>{"blur"!==t&&(t="blur",window.events.fire(Events.BROWSER_FOCUS,{type:"blur"}))}),window.addEventListener("keydown",()=>window.events.fire(Events.KEYBOARD_DOWN)),window.addEventListener("keyup",()=>window.events.fire(Events.KEYBOARD_UP)),window.addEventListener("keypress",()=>window.events.fire(Events.KEYBOARD_PRESS)),window.addEventListener("resize",()=>window.events.fire(Events.RESIZE)),i.events.subscribe(Events.RESIZE,e),e()}};class FontLoader{constructor(e,t){let i=this;this.events=new EventManager;let s;!function(){Array.isArray(e)||(e=[e]),s=Stage.create("FontLoader");for(let t=0;t<e.length;t++)s.create("font").fontStyle(e[t],12,"#000").text("LOAD").css({top:-999})}(),Delayed(()=>{s.destroy(),i.complete=!0,i.events.fire(Events.COMPLETE),t&&t()},500)}}FontLoader.loadFonts=((e,t)=>{let i=Promise.create();return t||(t=i.resolve),new FontLoader(e,t),i});class SVG{constructor(e,t,i){function s(){(h=new Interface(e,"svg")).element.setAttribute("preserveAspectRatio","xMinYMid meet"),h.element.setAttribute("version","1.1"),h.element.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.width&&(h.element.setAttribute("viewBox","0 0 "+i.width+" "+i.height),h.element.style.width=i.width+"px",h.element.style.height=i.height+"px"),c.object=h}function n(){h=new Interface(e,"svg",t),"circle"===t?a():"radialGradient"===t&&r(),c.object=h}function a(){["cx","cy","r"].forEach(e=>{i.stroke&&"r"===e?h.element.setAttributeNS(null,e,i.width/2-i.stroke):h.element.setAttributeNS(null,e,i.width/2)})}function r(){["cx","cy","r","fx","fy","name"].forEach(e=>{h.element.setAttributeNS(null,"name"===e?"id":e,i[e])}),h.element.setAttributeNS(null,"gradientUnits","userSpaceOnUse")}function o(e){let t=document.createElementNS("http://www.w3.org/2000/svg","stop");return["offset","style"].forEach(i=>{t.setAttributeNS(null,i,"style"===i?"stop-color:"+e[i]:e[i])}),t}function l(){n(),i.colors.forEach(e=>{h.element.appendChild(o(e))})}let h,c=this;!function(){switch(t){case"svg":s();break;case"radialGradient":case"linearGradient":l();break;default:n()}}(),this.addTo=(e=>{e.points?e=e.points:e.element?e=e.element:e.object&&(e=e.object.element),e.appendChild(h.element)})}}let SVGSymbol=new class{constructor(){let e=[];this.define=((t,i,s,n)=>{let a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("preserveAspectRatio","xMinYMid meet"),a.setAttribute("version","1.1"),a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("style","display: none;"),a.setAttribute("width",i),a.setAttribute("height",s),a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),a.innerHTML=`<symbol id="${t}">${n}</symbol>`,document.body.insertBefore(a,document.body.firstChild),e.push({id:t,width:i,height:s})}),this.getConfig=(t=>{for(let i=0;i<e.length;i++)if(e[i].id===t)return e[i];return null})}},Storage=new class{constructor(){function e(e,t,i){let s;if(arguments.length>1&&(null===t||"object"!=typeof t)){if(s={},s.path="/",s.expires=i||1,null===t&&(s.expires=-1),"number"==typeof s.expires){let e=s.expires,t=s.expires=new Date;t.setDate(t.getDate()+e)}return document.cookie=[encodeURIComponent(e),"=",encodeURIComponent(String(t)),s.expires?"; expires="+s.expires.toUTCString():"","; path="+s.path].join("")}let n,a=(s=t||{}).raw?e=>e:decodeURIComponent;return n=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie)?a(n[1]):null}let t;!function(){if(window.localStorage)try{window.localStorage.test=1,window.localStorage.removeItem("test"),t=!0}catch(e){t=!1}else t=!1}(),this.setCookie=((t,i,s)=>{e(t,i,s)}),this.getCookie=(t=>e(t)),this.set=((i,s)=>{null!==s&&"object"==typeof s&&(s=JSON.stringify(s)),t?null===s?window.localStorage.removeItem(i):window.localStorage[i]=s:e(i,s,365)}),this.get=(i=>{let s;if(s=t?window.localStorage[i]:e(i)){let e;s.charAt&&(e=s.charAt(0)),"{"!==e&&"["!==e||(s=JSON.parse(s)),"true"!==s&&"false"!==s||(s="true"===s)}return s})}};window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext||window.oAudioContext);let WebAudio=new class{constructor(){let e,t=[];this.init=(()=>{e=new window.AudioContext,this.globalGain=e.createGain(),this.globalGain.connect(e.destination)}),this.createSound=((i,s,n)=>{let a={id:i};e.decodeAudioData(s,t=>{a.buffer=t,a.audioGain=e.createGain(),a.audioGain.connect(this.globalGain),a.complete=!0,n&&n()}),t.push(a)}),this.getSound=(e=>{for(let i=0;i<t.length;i++)if(t[i].id===e)return t[i];return null}),this.trigger=(t=>{if(!e)return;let i=this.getSound(t),s=e.createBufferSource();s.buffer=i.buffer,s.connect(i.audioGain),s.start(0)}),this.mute=(()=>{e&&TweenManager.tween(this.globalGain.gain,{value:0},300,"easeOutSine")}),this.unmute=(()=>{e&&TweenManager.tween(this.globalGain.gain,{value:1},500,"easeOutSine")})}};"undefined"!=typeof Promise&&(Promise.create=(()=>{let e,t,i=new Promise((i,s)=>{e=i,t=s});return i.resolve=e,i.reject=t,i})),window.getURL=((e,t="_blank")=>window.open(e,t)),window.Delayed=((e,t=0,i)=>window.setTimeout(()=>{e&&e(i)},t)),window.Global||(window.Global={}),window.Config||(window.Config={});
