//   _  /._  _  r11 2018-04-15 7:08pm
//  /_|///_'/ /
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Alien={})}(this,function(t){"use strict";"undefined"!=typeof Promise&&(Promise.create=function(){let t,e;const s=new Promise(function(s,i){t=s,e=i});return s.resolve=t,s.reject=e,s}),Math.sign=function(t){return 0===(t=+t)||isNaN(t)?Number(t):t>0?1:-1},Math.degrees=function(t){return t*(180/Math.PI)},Math.radians=function(t){return t*(Math.PI/180)},Math.clamp=function(t,e,s){return Math.min(Math.max(t,Math.min(e,s)),Math.max(e,s))},Math.range=function(t,e,s,i,n,r){const a=(t-e)*(n-i)/(s-e)+i;return r?Math.clamp(a,i,n):a},Math.mix=function(t,e,s){return t*(1-s)+e*s},Math.step=function(t,e){return e<t?0:1},Math.smoothStep=function(t,e,s){const i=Math.max(0,Math.min(1,(s-t)/(e-t)));return i*i*(3-2*i)},Math.fract=function(t){return t-Math.floor(t)},Math.mod=function(t,e){return(t%e+e)%e},Array.prototype.remove=function(t){const e=this.indexOf(t);if(~e)return this.splice(e,1)},Array.prototype.last=function(){return this[this.length-1]},String.prototype.includes=function(t){if(!Array.isArray(t))return~this.indexOf(t);for(let e=0;e<t.length;e++)if(~this.indexOf(t[e]))return!0;return!1},String.prototype.clip=function(t,e){return this.length>t?this.slice(0,t)+e:this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(t,e){return this.split(t).join(e)},Date.prototype.addDays=function(t){const e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e},window.fetch||(window.fetch=function(t,e={}){const s=Promise.create(),i=new XMLHttpRequest;i.open(e.method||"GET",t);for(let t in e.headers)i.setRequestHeader(t,e.headers[t]);function n(){const t=[],e=[],s={};let r;return i.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(i,n,a){t.push(n=n.toLowerCase()),e.push([n,a]),r=s[n],s[n]=r?`${r},${a}`:a}),{ok:1==(i.status/200|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:n,text:()=>Promise.resolve(i.responseText),json:()=>Promise.resolve(i.responseText).then(JSON.parse),xml:()=>Promise.resolve(i.responseXML),blob:()=>Promise.resolve(new Blob([i.response])),arrayBuffer:()=>Promise.resolve(new ArrayBuffer([i.response])),headers:{keys:()=>t,entries:()=>e,get:t=>s[t.toLowerCase()],has:t=>t.toLowerCase()in s}}}return i.onload=(()=>s.resolve(n())),i.onerror=s.reject,i.send(e.body),s}),window.get=function(t,e={}){const s=Promise.create();return e.method="GET",window.fetch(t,e).then(function(t){if(!t.ok)return s.reject(t);t.text().then(function(t){if(t.charAt(0).includes(["[","{"]))try{s.resolve(JSON.parse(t))}catch(e){s.resolve(t)}else s.resolve(t)})}).catch(s.reject),s},window.post=function(t,e,s={}){const i=Promise.create();return s.method="POST",s.body=JSON.stringify(e),window.fetch(t,s).then(function(t){if(!t.ok)return i.reject(t);t.text().then(function(t){if(t.charAt(0).includes(["[","{"]))try{i.resolve(JSON.parse(t))}catch(e){i.resolve(t)}else i.resolve(t)})}).catch(i.reject),i},window.getURL=function(t,e="_blank"){window.open(t,e)},window.Config||(window.Config={}),window.Global||(window.Global={});class e{static random(t,e,s=0){if(void 0===t)return Math.random();if(t===e)return t;t=t||0,e=e||1;const i=Math.pow(10,s);return Math.round((t+Math.random()*(e-t))*i)/i}static headsTails(t,e){return this.random(0,1)?e:t}static queryString(t){const e=decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(t).replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return!(!e.length||"0"===e||"false"===e)&&e}static getConstructorName(t){return t.constructor.name||t.constructor.toString().match(/function ([^(]+)/)[1]}static nullObject(t){for(let e in t)void 0!==t[e]&&(t[e]=null);return null}static cloneObject(t){return JSON.parse(JSON.stringify(t))}static mergeObject(...t){const e={};for(let s of t)for(let t in s)e[t]=s[t];return e}static toArray(t){return Object.keys(t).map(e=>t[e])}static cloneArray(t){return t.slice(0)}static basename(t,e){const s=t.split("/").last();return e?s:s.split(".")[0]}static extension(t){return t.split(".").last().split("?")[0].toLowerCase()}static base64(t){return window.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(t,e)=>String.fromCharCode("0x"+e)))}static timestamp(){return(Date.now()+this.random(0,99999)).toString()}static pad(t){return t<10?"0"+t:t}static get hash(){return window.location.hash.slice(1)}}class s{static init(){let t=this;const e=[],s=200;let i=performance.now();function n(r){const a=Math.min(s,r-i);i=r,t.TIME=r,t.DELTA=a;for(let t=e.length-1;t>=0;t--){const s=e[t];if(s)if(s.fps){if(r-s.last<1e3/s.fps)continue;s(++s.frame),s.last=r}else s(r,a);else e.remove(s)}t.paused||requestAnimationFrame(n)}requestAnimationFrame(n),this.start=((t,s)=>{s&&(t.fps=s,t.last=-1/0,t.frame=-1),~e.indexOf(t)||e.unshift(t)}),this.stop=(t=>{e.remove(t)}),this.pause=(()=>{this.paused=!0}),this.resume=(()=>{this.paused&&(this.paused=!1,requestAnimationFrame(n))})}}s.init();class i{static init(){const t=[],i=[];s.start(function(e,s){for(let e=0;e<i.length;e++){const s=i[e];s.callback=null,t.remove(s)}i.length&&(i.length=0);for(let e=0;e<t.length;e++){const n=t[e];n?(n.current+=s)>=n.time&&(n.callback&&n.callback(...n.args),i.push(n)):t.remove(n)}}),this.clearTimeout=(e=>{const s=function(e){for(let s=0;s<t.length;s++)if(t[s].ref===e)return t[s];return null}(e);return!!s&&(s.callback=null,t.remove(s),!0)}),this.create=((s,i,...n)=>{const r={time:Math.max(1,i||1),current:0,ref:e.timestamp(),callback:s,args:n};return t.push(r),r.ref}),window.defer=this.defer=(t=>this.create(t,1))}}i.init();class n{constructor(){class t{constructor(){this.events=[],this.links=[]}add(t,e,s){this.events.push({event:t,callback:e,object:s})}remove(t,e){for(let s=this.events.length-1;s>=0;s--)this.events[s].event===t&&this.events[s].callback===e&&(this.events[s].removed=!0,this.events.splice(s,1)[0]=null)}fire(t,s={}){let i=!1;const n=e.cloneArray(this.events);for(let e=0;e<n.length;e++)n[e].event!==t||n[e].removed||(n[e].callback(s),i=!0);return i}destroy(t){for(let e=this.events.length-1;e>=0;e--)this.events[e].object===t&&(this.events.splice(e,1)[0]=null)}link(t){~this.links.indexOf(t)||this.links.push(t)}}n.initialized||(n.emitter=new t,n.VISIBILITY="visibility",n.KEYBOARD_PRESS="keyboard_press",n.KEYBOARD_DOWN="keyboard_down",n.KEYBOARD_UP="keyboard_up",n.RESIZE="resize",n.COMPLETE="complete",n.PROGRESS="progress",n.UPDATE="update",n.LOADED="loaded",n.ERROR="error",n.READY="ready",n.HOVER="hover",n.CLICK="click",n.initialized=!0),this.emitter=new t;const s=[];this.add=((t,e,i)=>{if("object"!=typeof t&&(i=e,e=t,t=null),t){const n=t.events.emitter;n.add(e,i,this),n.link(this),s.push(n)}else n.emitter.add(e,i,this)}),this.remove=((t,e,s)=>{"object"!=typeof t&&(s=e,e=t,t=null),t?t.events.emitter.remove(e,s):n.emitter.remove(e,s)}),this.fire=((t,e={},s)=>{this.emitter.fire(t,e)||s||n.emitter.fire(t,e)}),this.destroy=(()=>(n.emitter.destroy(this),s.forEach(t=>t.destroy(this)),this.emitter.links.forEach(t=>{t.unlink&&t.unlink(this.emitter)}),e.nullObject(this))),this.unlink=(t=>{s.remove(t)})}}class r{static init(){this.agent=navigator.userAgent.toLowerCase(),this.prefix=(()=>{const t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(webkit|moz|ms)-/)||""===t.OLink&&["","o"])[1];return{lowercase:e,js:e[0].toUpperCase()+e.substr(1)}})(),this.transformProperty=(()=>{let t;switch(this.prefix.lowercase){case"webkit":t="-webkit-transform";break;case"moz":t="-moz-transform";break;case"ms":t="-ms-transform";break;case"o":t="-o-transform";break;default:t="transform"}return t})(),this.pixelRatio=window.devicePixelRatio,this.os=(()=>this.detect(["iphone","ipad"])?"ios":this.detect(["android"])?"android":this.detect(["blackberry"])?"blackberry":this.detect(["mac os"])?"mac":this.detect(["windows"])?"windows":this.detect(["linux"])?"linux":"unknown")(),this.browser=(()=>"ios"===this.os?this.detect(["safari"])?"safari":"unknown":"android"===this.os?this.detect(["chrome"])?"chrome":this.detect(["firefox"])?"firefox":"browser":this.detect(["msie"])?"ie":this.detect(["trident"])&&this.detect(["rv:"])?"ie":this.detect(["windows"])&&this.detect(["edge"])?"ie":this.detect(["chrome"])?"chrome":this.detect(["safari"])?"safari":this.detect(["firefox"])?"firefox":"unknown")(),this.mobile="ontouchstart"in window&&this.detect(["iphone","ipad","android","blackberry"]),this.tablet=Math.max(screen.width,screen.height)>800,this.phone=!this.tablet,this.webgl=(()=>{try{const t=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=document.createElement("canvas");let s;for(let i=0;i<t.length&&!(s=e.getContext(t[i]));i++);const i=s.getExtension("WEBGL_debug_renderer_info"),n={};return i&&(n.gpu=s.getParameter(i.UNMASKED_RENDERER_WEBGL).toLowerCase()),n.renderer=s.getParameter(s.RENDERER).toLowerCase(),n.version=s.getParameter(s.VERSION).toLowerCase(),n.glsl=s.getParameter(s.SHADING_LANGUAGE_VERSION).toLowerCase(),n.extensions=s.getSupportedExtensions(),n.detect=(t=>{if(n.gpu&&n.gpu.includes(t))return!0;if(n.version&&n.version.includes(t))return!0;for(let e=0;e<n.extensions.length;e++)if(n.extensions[e].toLowerCase().includes(t))return!0;return!1}),n}catch(t){return!1}})()}static detect(t){return this.agent.includes(t)}static vendor(t){return this.prefix.js+t}static vibrate(t){navigator.vibrate&&navigator.vibrate(t)}}r.init();class a{constructor(){this.events=new n,this.classes=[],this.timers=[],this.loops=[]}initClass(t,...e){const s=new t(...e);return this.add(s),s}add(t){return t.destroy&&(this.classes.push(t),t.parent=this),this}delayedCall(t,e=0,...s){if(!this.timers)return;const n=i.create(()=>{t&&t(...s)},e);return this.timers.push(n),this.timers.length>50&&this.timers.shift(),n}clearTimers(){for(let t=this.timers.length-1;t>=0;t--)i.clearTimeout(this.timers[t]);this.timers.length=0}startRender(t,e){this.loops.push(t),s.start(t,e)}stopRender(t){this.loops.remove(t),s.stop(t)}clearRenders(){for(let t=this.loops.length-1;t>=0;t--)this.stopRender(this.loops[t]);this.loops.length=0}destroy(){this.removed=!0;const t=this.parent;t&&!t.removed&&t.remove&&t.remove(this);for(let t=this.classes.length-1;t>=0;t--){const e=this.classes[t];e&&e.destroy&&e.destroy()}return this.classes.length=0,this.clearRenders(),this.clearTimers(),this.events.destroy(),e.nullObject(this)}remove(t){this.classes.remove(t)}}class o{static init(){this.CDN="",this.CORS=null;const t={},e={};this.getPath=(t=>~t.indexOf("//")?t:(this.CDN&&!~t.indexOf(this.CDN)&&(t=this.CDN+t),t)),this.createImage=((e,s,i)=>{"boolean"!=typeof s&&(i=s,s=void 0);const n=new Image;return n.crossOrigin=this.CORS,n.src=this.getPath(e),n.onload=i,n.onerror=i,s&&(t[e]=n),n}),this.getImage=(e=>t[e]),this.storeData=((t,s)=>(e[t]=s,e[t])),this.getData=(t=>e[t])}static loadImage(t){"string"==typeof t&&(t=this.createImage(t));const e=Promise.create();return t.onload=(()=>e.resolve(t)),t.onerror=(()=>e.resolve(t)),e}}o.init();class h{static init(){function t(t,n,r){return((e(n,r)*t+s(n,r))*t+i(n))*t}function e(t,e){return 1-3*e+3*t}function s(t,e){return 3*e-6*t}function i(t){return 3*t}this.convertEase=(t=>(()=>{let e;switch(t){case"easeInQuad":e=this.Quad.In;break;case"easeInCubic":e=this.Cubic.In;break;case"easeInQuart":e=this.Quart.In;break;case"easeInQuint":e=this.Quint.In;break;case"easeInSine":e=this.Sine.In;break;case"easeInExpo":e=this.Expo.In;break;case"easeInCirc":e=this.Circ.In;break;case"easeInElastic":e=this.Elastic.In;break;case"easeInBack":e=this.Back.In;break;case"easeInBounce":e=this.Bounce.In;break;case"easeOutQuad":e=this.Quad.Out;break;case"easeOutCubic":e=this.Cubic.Out;break;case"easeOutQuart":e=this.Quart.Out;break;case"easeOutQuint":e=this.Quint.Out;break;case"easeOutSine":e=this.Sine.Out;break;case"easeOutExpo":e=this.Expo.Out;break;case"easeOutCirc":e=this.Circ.Out;break;case"easeOutElastic":e=this.Elastic.Out;break;case"easeOutBack":e=this.Back.Out;break;case"easeOutBounce":e=this.Bounce.Out;break;case"easeInOutQuad":e=this.Quad.InOut;break;case"easeInOutCubic":e=this.Cubic.InOut;break;case"easeInOutQuart":e=this.Quart.InOut;break;case"easeInOutQuint":e=this.Quint.InOut;break;case"easeInOutSine":e=this.Sine.InOut;break;case"easeInOutExpo":e=this.Expo.InOut;break;case"easeInOutCirc":e=this.Circ.InOut;break;case"easeInOutElastic":e=this.Elastic.InOut;break;case"easeInOutBack":e=this.Back.InOut;break;case"easeInOutBounce":e=this.Bounce.InOut;break;case"linear":e=this.Linear.None}if(!e){const s=c.getEase(t);if(s){const t=s.split("(")[1].slice(0,-1).split(",");for(let e=0;e<t.length;e++)t[e]=parseFloat(t[e]);e=t}else e=this.Cubic.Out}return e})()),this.solve=((n,r)=>n[0]===n[1]&&n[2]===n[3]?r:t(function(n,r,a){let o=n;for(let u=0;u<4;u++){const u=(h=o,3*e(l=r,c=a)*h*h+2*s(l,c)*h+i(l));if(0===u)return o;o-=(t(o,r,a)-n)/u}var h,l,c;return o}(r,n[0],n[2]),n[1],n[3])),this.Linear={None:t=>t},this.Quad={In:t=>t*t,Out:t=>t*(2-t),InOut:t=>(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},this.Cubic={In:t=>t*t*t,Out:t=>--t*t*t+1,InOut:t=>(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},this.Quart={In:t=>t*t*t*t,Out:t=>1- --t*t*t*t,InOut:t=>(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},this.Quint={In:t=>t*t*t*t*t,Out:t=>--t*t*t*t*t+1,InOut:t=>(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},this.Sine={In:t=>1-Math.cos(t*Math.PI/2),Out:t=>Math.sin(t*Math.PI/2),InOut:t=>.5*(1-Math.cos(Math.PI*t))},this.Expo={In:t=>0===t?0:Math.pow(1024,t-1),Out:t=>1===t?1:1-Math.pow(2,-10*t),InOut:t=>0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},this.Circ={In:t=>1-Math.sqrt(1-t*t),Out:t=>Math.sqrt(1- --t*t),InOut:t=>(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},this.Elastic={In(t,e=1,s=.4){let i;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=s/4):i=s*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s))},Out(t,e=1,s=.4){let i;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=s/4):i=s*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/s)+1)},InOut(t,e=1,s=.4){let i;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=s/4):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}},this.Back={In(t){const e=1.70158;return t*t*((e+1)*t-e)},Out(t){const e=1.70158;return--t*t*((e+1)*t+e)+1},InOut(t){const e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},this.Bounce={In:t=>1-h.Bounce.Out(1-t),Out:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,InOut:t=>t<.5?.5*h.Bounce.In(2*t):.5*h.Bounce.Out(2*t-1)+.5}}}h.init();class l{constructor(t,s,i,n,r,a,o){const l=this;let u,d,m,p,f,y,g,b;function v(){if(!t&&!s)return!1;t.mathTween=null,c.removeMathTween(l),e.nullObject(l),t.mathTweens&&t.mathTweens.remove(l)}!function(){!t.multiTween&&t.mathTween&&c.clearTween(t);c.addMathTween(l),t.mathTween=l,t.multiTween&&(t.mathTweens||(t.mathTweens=[]),t.mathTweens.push(l));n=h.convertEase(n),p="function"==typeof n,u=performance.now(),u+=r,m=s,d={},s.spring&&(y=s.spring);s.damping&&(g=s.damping);for(let e in m)"number"==typeof t[e]&&(d[e]=t[e])}(),this.update=(t=>{if(f||t<u)return;b=(b=(t-u)/i)>1?1:b;const e=this.interpolate(b);a&&a(e),1===b&&(o&&o(),v())}),this.stop=(()=>{v()}),this.pause=(()=>{f=!0}),this.resume=(()=>{f=!1,u=performance.now()-b*i}),this.interpolate=(e=>{const s=p?n(e,y,g):h.solve(n,e);for(let e in d)if("number"==typeof d[e]&&"number"==typeof m[e]){const i=d[e],n=m[e];t[e]=i+(n-i)*s}return s})}}class c{static init(){const t=this;this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"};const e=[];s.start(function(s){for(let i=e.length-1;i>=0;i--){const n=e[i];n.update?n.update(s):t.removeMathTween(n)}}),this.addMathTween=(t=>{e.push(t)}),this.removeMathTween=(t=>{e.remove(t)}),this.tween=((t,e,s,i,n,r,a)=>{"number"!=typeof n&&(a=r,r=n,n=0);let o=null;"undefined"!=typeof Promise&&(o=Promise.create(),r&&o.then(r),r=o.resolve);const h=new l(t,e,s,i,n,a,r);return o||h}),this.clearTween=(t=>{if(t.mathTween&&t.mathTween.stop(),t.mathTweens){const e=t.mathTweens;for(let t=e.length-1;t>=0;t--){const s=e[t];s&&s.stop()}t.mathTweens=null}}),this.isTransform=(t=>~this.TRANSFORMS.indexOf(t)),this.getEase=(t=>this.CSS_EASES[t]||this.CSS_EASES.easeOutCubic),this.getAllTransforms=(t=>{const e={};for(let s=0;s<this.TRANSFORMS.length;s++){const i=this.TRANSFORMS[s],n=t[i];0!==n&&"number"==typeof n&&(e[i]=n)}return e}),this.parseTransform=(t=>{let e="";if(void 0!==t.x||void 0!==t.y||void 0!==t.z){const s=t.x||0,i=t.y||0,n=t.z||0;let r="";r+=s+"px, ",r+=i+"px, ",e+="translate3d("+(r+=n+"px")+")"}return void 0!==t.scale?e+="scale("+t.scale+")":(void 0!==t.scaleX&&(e+="scaleX("+t.scaleX+")"),void 0!==t.scaleY&&(e+="scaleY("+t.scaleY+")")),void 0!==t.rotation&&(e+="rotate("+t.rotation+"deg)"),void 0!==t.rotationX&&(e+="rotateX("+t.rotationX+"deg)"),void 0!==t.rotationY&&(e+="rotateY("+t.rotationY+"deg)"),void 0!==t.rotationZ&&(e+="rotateZ("+t.rotationZ+"deg)"),void 0!==t.skewX&&(e+="skewX("+t.skewX+"deg)"),void 0!==t.skewY&&(e+="skewY("+t.skewY+"deg)"),void 0!==t.perspective&&(e+="perspective("+t.perspective+"px)"),e}),this.interpolate=((t,e,s)=>{const i=h.convertEase(s);return t*("function"==typeof i?i(e):h.solve(i,e))}),this.interpolateValues=((t,e,s,i)=>{const n=h.convertEase(i);return t+(e-t)*("function"==typeof n?n(s):h.solve(n,s))})}}c.init();class u{constructor(t,s,n,a,o,h){const l=this;let u,d;function m(){return!l||l.kill||!t||!t.element}function p(){m()||(l.kill=!0,t.element.style[r.vendor("Transition")]="",t.willChange(null),t.cssTween=null,t=s=null,e.nullObject(l))}!function(){const e=c.getAllTransforms(t),i=[];for(let t in s)c.isTransform(t)?(e.use=!0,e[t]=s[t],delete s[t]):("number"==typeof s[t]||~t.indexOf("-"))&&i.push(t);e.use&&(i.push(r.transformProperty),delete e.use);u=e,d=i}(),function(){if(m())return;t.cssTween&&(t.cssTween.kill=!0);t.cssTween=l;const e=function(t,e,s){let i="",n="";for(let r=0;r<d.length;r++){const a=d[r];i+=(i.length?", ":"")+a,n+=(n.length?", ":"")+a+" "+t+"ms "+c.getEase(e)+" "+s+"ms"}return{props:i,transition:n}}(n,a,o);t.willChange(e.props),i.create(()=>{m()||(t.element.style[r.vendor("Transition")]=e.transition,t.css(s),t.transform(u),i.create(()=>{m()||(p(),h&&h())},n+o))},35)}(),this.stop=p}}class d{constructor(t,e="div",s){if(this.events=new n,this.classes=[],this.timers=[],this.loops=[],void 0!==t){if("string"==typeof t){if(this.name=t,this.type=e,"svg"===e){const t=s||"svg";s=!0,this.element=document.createElementNS("http://www.w3.org/2000/svg",t),this.element.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")}else this.element=document.createElement(e),"."!==t[0]?this.element.id=t:this.element.className=t.substr(1);this.element.style.position="absolute",s||document.body.appendChild(this.element)}else this.element=t;this.element.object=this}}initClass(t,...e){const s=new t(...e);return this.add(s),s}add(t){return t.destroy&&(this.classes.push(t),t.parent=this),t.element?this.element.appendChild(t.element):t.nodeName&&this.element.appendChild(t),this}delayedCall(t,e=0,...s){if(!this.timers)return;const n=i.create(()=>{t&&t(...s)},e);return this.timers.push(n),this.timers.length>50&&this.timers.shift(),n}clearTimers(){for(let t=this.timers.length-1;t>=0;t--)i.clearTimeout(this.timers[t]);this.timers.length=0}startRender(t,e){this.loops.push(t),s.start(t,e)}stopRender(t){this.loops.remove(t),s.stop(t)}clearRenders(){for(let t=this.loops.length-1;t>=0;t--)this.stopRender(this.loops[t]);this.loops.length=0}destroy(){this.removed=!0;const t=this.parent;t&&!t.removed&&t.remove&&t.remove(this);for(let t=this.classes.length-1;t>=0;t--){const e=this.classes[t];e&&e.destroy&&e.destroy()}return this.classes.length=0,this.element.object=null,this.clearRenders(),this.clearTimers(),this.events.destroy(),e.nullObject(this)}remove(t){t.element?t.element.parentNode.removeChild(t.element):t.nodeName&&t.parentNode.removeChild(t),this.classes.remove(t)}create(t,e){const s=new d(t,e);return this.add(s),s}clone(){return new d(this.element.cloneNode(!0))}empty(){return this.element.innerHTML="",this}text(t){return void 0===t?this.element.textContent:(this.element.textContent=t,this)}html(t){return void 0===t?this.element.innerHTML:(this.element.innerHTML=t,this)}hide(){return this.element.style.display="none",this}show(){return this.element.style.display="",this}visible(){return this.element.style.visibility="visible",this}invisible(){return this.element.style.visibility="hidden",this}setZ(t){return this.element.style.zIndex=t,this}clearOpacity(){return this.element.style.opacity="",this}size(t,e=t,s){return"boolean"==typeof e&&(s=e,e=t),void 0!==t&&("string"==typeof t||"string"==typeof e?("string"!=typeof t&&(t+="px"),"string"!=typeof e&&(e+="px"),this.element.style.width=t,this.element.style.height=e):(this.element.style.width=t+"px",this.element.style.height=e+"px",s||(this.element.style.backgroundSize=t+"px "+e+"px"))),this.width=this.element.clientWidth,this.height=this.element.clientHeight,this}mouseEnabled(t){return this.element.style.pointerEvents=t?"auto":"none",this}fontStyle(t,e,s,i){return this.css({fontFamily:t,fontSize:e,color:s,fontStyle:i}),this}bg(t,e,s,i){return~t.indexOf(".")&&(t=o.getPath(t)),t.includes(["data:","."])?this.element.style.backgroundImage="url("+t+")":this.element.style.backgroundColor=t,void 0!==e&&(e="number"==typeof e?e+"px":e,s="number"==typeof s?s+"px":s,this.element.style.backgroundPosition=e+" "+s),i&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=i),"cover"!==e&&"contain"!==e||(i="number"==typeof i?i+"px":i,this.element.style.backgroundSize=e,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==s?s+" "+i:"center"),this}center(t,e,s){const i={};return void 0===t?(i.left="50%",i.top="50%",i.marginLeft=-this.width/2,i.marginTop=-this.height/2):(t&&(i.left="50%",i.marginLeft=-this.width/2),e&&(i.top="50%",i.marginTop=-this.height/2)),s&&(delete i.left,delete i.top),this.css(i),this}mask(t){return this.element.style[r.vendor("Mask")]=(~t.indexOf(".")?"url("+t+")":t)+" no-repeat",this.element.style[r.vendor("MaskSize")]="contain",this}blendMode(t,e){return this.element.style[e?"background-blend-mode":"mix-blend-mode"]=t,this}css(t,e){if("object"!=typeof t){if(e)return this.element.style[t]=e,this;{let e=this.element.style[t];return"number"!=typeof e&&(~e.indexOf("px")&&(e=Number(e.slice(0,-2))),"opacity"===t&&(e=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),e||0}}for(let e in t){let s=t[e];"string"!=typeof s&&"number"!=typeof s||("string"!=typeof s&&"opacity"!==e&&"zIndex"!==e&&(s+="px"),this.element.style[e]=s)}return this}transform(t){if(t)for(let e in t)"number"==typeof t[e]&&(this[e]=t[e]);else t=this;return this.element.style[r.vendor("Transform")]=c.parseTransform(t),this}willChange(t){const e="string"==typeof t;this.element.style["will-change"]=t?e?t:r.transformProperty+", opacity":""}backfaceVisibility(t){this.element.style[r.vendor("BackfaceVisibility")]=t?"visible":"hidden"}enable3D(t,e,s){return this.element.style[r.vendor("TransformStyle")]="preserve-3d",t&&(this.element.style[r.vendor("Perspective")]=t+"px"),void 0!==e&&(e="number"==typeof e?e+"px":e,s="number"==typeof s?s+"px":s,this.element.style[r.vendor("PerspectiveOrigin")]=e+" "+s),this}disable3D(){return this.element.style[r.vendor("TransformStyle")]="",this.element.style[r.vendor("Perspective")]="",this}transformPoint(t,e,s){let i="";return void 0!==t&&(i+="number"==typeof t?t+"px":t),void 0!==e&&(i+="number"==typeof e?" "+e+"px":" "+e),void 0!==s&&(i+="number"==typeof s?" "+s+"px":" "+s),this.element.style[r.vendor("TransformOrigin")]=i,this}tween(t,e,s,i,n){"number"!=typeof i&&(n=i,i=0);let r=null;"undefined"!=typeof Promise&&(r=Promise.create(),n&&r.then(n),n=r.resolve);const a=new u(this,t,e,s,i,n);return r||a}clearTransform(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style[r.transformProperty]="",this}clearTween(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}attr(t,e){return void 0===e?this.element.getAttribute(t):(""===e?this.element.removeAttribute(t):this.element.setAttribute(t,e),this)}convertTouchEvent(t){const e={x:0,y:0};return t?(t.touches||t.changedTouches?t.touches.length?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):(e.x=t.changedTouches[0].pageX,e.y=t.changedTouches[0].pageY):(e.x=t.pageX,e.y=t.pageY),e):e}click(t){return this.element.addEventListener("click",e=>{if(!this.element)return!1;e.object="hit"===this.element.className?this.parent:this,e.action="click",t&&t(e)},!0),this.element.style.cursor="pointer",this}hover(t){const e=e=>{if(!this.element)return!1;e.object="hit"===this.element.className?this.parent:this,e.action="mouseout"===e.type?"out":"over",t&&t(e)};return this.element.addEventListener("mouseover",e,!0),this.element.addEventListener("mouseout",e,!0),this}press(t){const e=e=>{if(!this.element)return!1;e.object="hit"===this.element.className?this.parent:this,e.action="mousedown"===e.type?"down":"up",t&&t(e)};return this.element.addEventListener("mousedown",e,!0),this.element.addEventListener("mouseup",e,!0),this}bind(t,e){"touchstart"!==t||r.mobile?"touchmove"!==t||r.mobile?"touchend"!==t||r.mobile||(t="mouseup"):t="mousemove":t="mousedown",this.events["bind_"+t]||(this.events["bind_"+t]=[]);const s=this.events["bind_"+t];s.push({target:this.element,callback:e});const i=t=>{const e=this.convertTouchEvent(t);t instanceof MouseEvent||(t.x=e.x,t.y=e.y),s.forEach(e=>{e.target===t.currentTarget&&e.callback(t)})};return this.events["fn_"+t]||(this.events["fn_"+t]=i,this.element.addEventListener(t,i,!0)),this}unbind(t,e){"touchstart"!==t||r.mobile?"touchmove"!==t||r.mobile?"touchend"!==t||r.mobile||(t="mouseup"):t="mousemove":t="mousedown";const s=this.events["bind_"+t];return s?(s.forEach((t,i)=>{t.callback===e&&s.splice(i,1)}),this.events["fn_"+t]&&!s.length&&(this.element.removeEventListener(t,this.events["fn_"+t],!0),this.events["fn_"+t]=null),this):this}interact(t,e){return this.hit=this.create(".hit"),this.hit.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}),r.mobile?this.hit.touchClick(t,e):this.hit.hover(t).click(e),this}touchClick(t,e){const s={};let i,n,r;const a=t=>{const e=this.convertTouchEvent(t);t.touchX=e.x,t.touchY=e.y,s.x=t.touchX,s.y=t.touchY};return this.element.addEventListener("touchmove",t=>{if(!this.element)return!1;r=this.convertTouchEvent(t),n=((t,e)=>{const s=e.x-t.x,i=e.y-t.y;return Math.sqrt(s*s+i*i)})(s,r)>5},{passive:!0}),this.element.addEventListener("touchstart",e=>{if(!this.element)return!1;i=performance.now(),e.object="hit"===this.element.className?this.parent:this,e.action="over",a(e),t&&!n&&t(e)},{passive:!0}),this.element.addEventListener("touchend",s=>{if(!this.element)return!1;const r=performance.now();s.object="hit"===this.element.className?this.parent:this,a(s),i&&r-i<750&&e&&!n&&(s.action="click",e(s)),t&&(s.action="out",t(s)),n=!1},{passive:!0}),this}preventScroll(){if(!r.mobile)return;this.element.addEventListener("touchstart",t=>{let e=t.target;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName||"SELECT"===e.nodeName||"A"===e.nodeName)return;let s=!0;for(;e.parentNode&&s;)e.scrollParent&&(s=!1),e=e.parentNode;s&&t.preventDefault()},{passive:!1})}overflowScroll(t){if(!r.mobile)return;const e=!!t.x,s=!!t.y,i={"-webkit-overflow-scrolling":"touch"};(!e&&!s||e&&s)&&(i.overflow="scroll"),!e&&s&&(i.overflowY="scroll",i.overflowX="hidden"),e&&!s&&(i.overflowX="scroll",i.overflowY="hidden"),this.css(i),this.element.scrollParent=!0,this.element.preventEvent=(t=>t.stopPropagation()),this.bind("touchmove",this.element.preventEvent)}removeOverflowScroll(){r.mobile&&(this.css({overflow:"hidden",overflowX:"",overflowY:"","-webkit-overflow-scrolling":""}),this.unbind("touchmove",this.element.preventEvent))}split(t=""){const e={position:"relative",display:"block",width:"auto",height:"auto",margin:0,padding:0,cssFloat:"left"},s=[],i=this.text().split(t);this.empty()," "===t&&(t="&nbsp;");for(let n=0;n<i.length;n++)" "===i[n]&&(i[n]="&nbsp;"),s.push(this.create(".t","span").html(i[n]).css(e)),""!==t&&n<i.length-1&&s.push(this.create(".t","span").html(t).css(e));return s}}class m{static init(){if(!this.active){this.active=!0,this.x=0,this.y=0,this.z=0,this.alpha=0,this.beta=0,this.gamma=0,this.heading=0,this.rotationRate={},this.rotationRate.alpha=0,this.rotationRate.beta=0,this.rotationRate.gamma=0,this.toRadians="ios"===r.os?Math.PI/180:1;const t=t=>{switch(window.orientation){case 0:this.x=-t.accelerationIncludingGravity.x,this.y=t.accelerationIncludingGravity.y,this.z=t.accelerationIncludingGravity.z,t.rotationRate&&(this.rotationRate.alpha=t.rotationRate.beta*this.toRadians,this.rotationRate.beta=-t.rotationRate.alpha*this.toRadians,this.rotationRate.gamma=t.rotationRate.gamma*this.toRadians);break;case 180:this.x=t.accelerationIncludingGravity.x,this.y=-t.accelerationIncludingGravity.y,this.z=t.accelerationIncludingGravity.z,t.rotationRate&&(this.rotationRate.alpha=-t.rotationRate.beta*this.toRadians,this.rotationRate.beta=t.rotationRate.alpha*this.toRadians,this.rotationRate.gamma=t.rotationRate.gamma*this.toRadians);break;case 90:this.x=t.accelerationIncludingGravity.y,this.y=t.accelerationIncludingGravity.x,this.z=t.accelerationIncludingGravity.z,t.rotationRate&&(this.rotationRate.alpha=t.rotationRate.alpha*this.toRadians,this.rotationRate.beta=t.rotationRate.beta*this.toRadians,this.rotationRate.gamma=t.rotationRate.gamma*this.toRadians);break;case-90:this.x=-t.accelerationIncludingGravity.y,this.y=-t.accelerationIncludingGravity.x,this.z=t.accelerationIncludingGravity.z,t.rotationRate&&(this.rotationRate.alpha=-t.rotationRate.alpha*this.toRadians,this.rotationRate.beta=-t.rotationRate.beta*this.toRadians,this.rotationRate.gamma=t.rotationRate.gamma*this.toRadians)}},e=t=>{for(let e in t)~e.toLowerCase().indexOf("heading")&&(this.heading=t[e]);switch(window.orientation){case 0:this.alpha=t.beta*this.toRadians,this.beta=-t.alpha*this.toRadians,this.gamma=t.gamma*this.toRadians;break;case 180:this.alpha=-t.beta*this.toRadians,this.beta=t.alpha*this.toRadians,this.gamma=t.gamma*this.toRadians;break;case 90:this.alpha=t.alpha*this.toRadians,this.beta=t.beta*this.toRadians,this.gamma=t.gamma*this.toRadians;break;case-90:this.alpha=-t.alpha*this.toRadians,this.beta=-t.beta*this.toRadians,this.gamma=t.gamma*this.toRadians}this.tilt=t.beta*this.toRadians,this.yaw=t.alpha*this.toRadians,this.roll=-t.gamma*this.toRadians,"Android"===r.os&&(this.heading=s(t.alpha,t.beta,t.gamma))},s=(t,e,s)=>{const i=Math.PI/180,n=e?e*i:0,r=s?s*i:0,a=t?t*i:0,o=Math.cos(r),h=Math.cos(a),l=Math.sin(n),c=Math.sin(r),u=Math.sin(a),d=-h*c-u*l*o,m=-u*c+h*l*o;let p=Math.atan(d/m);return m<0?p+=Math.PI:d<0&&(p+=2*Math.PI),p*(180/Math.PI)};window.addEventListener("devicemotion",t,!0),window.addEventListener("deviceorientation",e,!0),this.stop=(()=>{this.active=!1,window.removeEventListener("devicemotion",t,!0),window.removeEventListener("deviceorientation",e,!0)})}}}class p{static init(){if(!this.active){this.active=!0,this.x=0,this.y=0,this.normal={x:0,y:0},this.tilt={x:0,y:0},this.inverseNormal={x:0,y:0};const t=t=>{this.x=t.x,this.y=t.y,this.normal.x=t.x/y.width,this.normal.y=t.y/y.height,this.tilt.x=2*this.normal.x-1,this.tilt.y=1-2*this.normal.y,this.inverseNormal.x=this.normal.x,this.inverseNormal.y=1-this.normal.y};this.input=y.initClass(b),y.events.add(this.input,b.START,t),y.events.add(this.input,b.MOVE,t),t({x:y.width/2,y:y.height/2}),this.stop=(()=>{this.active=!1,y.events.remove(this.input,b.START,t),y.events.remove(this.input,b.MOVE,t)})}}}window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext||window.oAudioContext);class f{static init(){if(!this.active){this.active=!0;const t=this,e={};let s;window.AudioContext&&(s=new AudioContext,this.output=s.createGain(),this.volume=1,this.output.connect(s.destination),this.gain={set value(e){t.volume=e,t.output.gain.setTargetAtTime(e,s.currentTime,.01)},get value(){return t.volume}},this.context=s),this.loadSound=((t,e)=>{const i=Promise.create();e&&i.then(e),e=i.resolve;const n=this.getSound(t);window.fetch(n.asset).then(t=>{if(!t.ok)return e();t.arrayBuffer().then(t=>{s.decodeAudioData(t,t=>{n.buffer=t,n.complete=!0,e()},()=>{e()})})}).catch(()=>{e()}),n.ready=(()=>i)}),this.createSound=((t,s,i)=>(e[t]=new class{constructor(t){const e=this;this.asset=o.getPath(t),f.context.createStereoPanner&&(this.stereo=f.context.createStereoPanner()),this.output=f.context.createGain(),this.volume=1,this.rate=1,this.stereo&&this.stereo.connect(this.output),this.output.connect(f.output),this.output.gain.setValueAtTime(0,f.context.currentTime),this.gain={set value(t){e.volume=t,e.output.gain.setTargetAtTime(t,f.context.currentTime,.01)},get value(){return e.volume}},this.playbackRate={set value(t){e.rate=t,e.source&&e.source.playbackRate.setTargetAtTime(t,f.context.currentTime,.01)},get value(){return e.rate}},this.stereoPan={set value(t){e.pan=t,e.stereo&&e.stereo.pan.setTargetAtTime(t,f.context.currentTime,.01)},get value(){return e.pan}},this.stop=(()=>{this.source&&(this.source.stop(),this.playing=!1)})}}(s),"ios"===r.os?i():this.loadSound(t,i),e[t])),this.getSound=(t=>e[t]),this.trigger=(t=>{if(!s)return;"suspended"===s.state&&s.resume();const e=this.getSound(t);e.ready||this.loadSound(t),e.ready().then(()=>{if(e.complete){if(e.stopping&&e.loop)return void(e.stopping=!1);e.playing=!0,e.source=s.createBufferSource(),e.source.buffer=e.buffer,e.source.loop=e.loop,e.source.playbackRate.setValueAtTime(e.rate,s.currentTime),e.source.connect(e.stereo?e.stereo:e.output),e.source.start(),defer(()=>e.output.gain.setTargetAtTime(e.volume,s.currentTime,.01))}})}),this.play=((t,e=1,i)=>{if(!s)return;"boolean"==typeof e&&(i=e,e=1);const n=this.getSound(t);n&&(n.volume=e,n.loop=!!i,this.trigger(t))}),this.fadeInAndPlay=((t,e,i,n,r,a=0)=>{if(!s)return;const o=this.getSound(t);o&&(o.volume=0,o.loop=!!i,this.trigger(t),c.tween(o.gain,{value:e},n,r,a))}),this.fadeOutAndStop=((t,e,i,n=0)=>{if(!s)return;const r=this.getSound(t);r&&r.playing&&(c.tween(r.gain,{value:0},e,i,n,()=>{r.stopping&&(r.stopping=!1,r.stop())}),r.stopping=!0)}),this.mute=(()=>{s&&c.tween(this.gain,{value:0},300,"easeOutSine")}),this.unmute=(()=>{s&&c.tween(this.gain,{value:1},500,"easeOutSine")}),this.stop=(()=>{if(this.active=!1,s){for(let t in e){const s=e[t];s&&s.stop()}s.close()}})}window.WebAudio=this}}const y=new class extends d{constructor(){super("Stage");const t=this;let e;function s(){"focus"!==e&&(e="focus",n.emitter.fire(n.VISIBILITY,{type:"focus"}))}function i(){"blur"!==e&&(e="blur",n.emitter.fire(n.VISIBILITY,{type:"blur"}))}function r(t){n.emitter.fire(n.KEYBOARD_DOWN,t)}function a(t){n.emitter.fire(n.KEYBOARD_UP,t)}function o(t){n.emitter.fire(n.KEYBOARD_PRESS,t)}function h(){t.size(),t.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait",n.emitter.fire(n.RESIZE)}t.css({overflow:"hidden"}),t.preventScroll(),window.addEventListener("focus",s,!0),window.addEventListener("blur",i,!0),window.addEventListener("keydown",r,!0),window.addEventListener("keyup",a,!0),window.addEventListener("keypress",o,!0),window.addEventListener("resize",h,!0),window.addEventListener("orientationchange",h,!0),h(),this.destroy=(()=>(m.active&&m.stop(),p.active&&p.stop(),f.active&&f.stop(),window.removeEventListener("focus",s,!0),window.removeEventListener("blur",i,!0),window.removeEventListener("keydown",r,!0),window.removeEventListener("keyup",a,!0),window.removeEventListener("keypress",o,!0),window.removeEventListener("resize",h,!0),window.removeEventListener("orientationchange",h,!0),super.destroy()))}};class g{constructor(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.type="vector2"}set(t,e){return this.x=t||0,this.y=e||0,this}clear(){return this.x=0,this.y=0,this}copyTo(t){return t.x=this.x,t.y=this.y,this}copy(t){return this.x=t.x||0,this.y=t.y||0,this}lengthSq(){return this.x*this.x+this.y*this.y||1e-5}length(){return Math.sqrt(this.lengthSq())}normalize(){const t=this.length();return this.x/=t,this.y/=t,this}setLength(t){return this.normalize().multiply(t),this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t,this.y/=t,this}perpendicular(){const t=this.x,e=this.y;return this.x=-e,this.y=t,this}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}deltaLerp(t,e,s=1){for(let i=0;i<s;i++)this.lerp(t,e);return this}interp(t,e,s,i=5e3){this.calc||(this.calc=new g),this.calc.subVectors(this,t);const n=h.convertEase(s)(Math.clamp(Math.range(this.calc.lengthSq(),0,i*i,1,0),0,1)*(e/10));return this.lerp(t,n)}setAngleRadius(t,e){return this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this}addAngleRadius(t,e){return this.x+=Math.cos(t)*e,this.y+=Math.sin(t)*e,this}dot(t,e=this){return t.x*e.x+t.y*e.y}clone(){return new g(this.x,this.y)}distanceTo(t,e){const s=this.x-t.x,i=this.y-t.y;return e?s*s+i*i:Math.sqrt(s*s+i*i)}solveAngle(t,e=this){return Math.atan2(t.y-e.y,t.x-e.x)}equals(t){return this.x===t.x&&this.y===t.y}toString(t=" "){return this.x+t+this.y}}class b extends a{constructor(t=y){if(!b.initialized){b.CLICK="interaction_click",b.START="interaction_start",b.MOVE="interaction_move",b.DRAG="interaction_drag",b.END="interaction_end";const t={touchstart:[],touchmove:[],touchend:[]},e=e=>t.touchstart.forEach(t=>t(e)),s=e=>t.touchmove.forEach(t=>t(e)),i=e=>t.touchend.forEach(t=>t(e));b.bind=((e,s)=>t[e].push(s)),b.unbind=((e,s)=>t[e].remove(s)),y.bind("touchstart",e),y.bind("touchmove",s),y.bind("touchend",i),y.bind("touchcancel",i),b.initialized=!0}super();const e=this;let i,n,r;function a(t){e.isTouching=!0,e.x=t.x,e.y=t.y,e.hold.x=e.last.x=t.x,e.hold.y=e.last.y=t.y,e.delta.x=e.move.x=e.velocity.x=0,e.delta.y=e.move.y=e.velocity.y=0,i=0,e.events.fire(b.START,t,!0),n=r=s.TIME}function o(t){e.isTouching&&(e.move.x=t.x-e.hold.x,e.move.y=t.y-e.hold.y),e.x=t.x,e.y=t.y,e.delta.x=t.x-e.last.x,e.delta.y=t.y-e.last.y,e.last.x=t.x,e.last.y=t.y,i+=e.delta.length();const n=Math.max(.001,s.TIME-(r||s.TIME));r=s.TIME,e.velocity.x=Math.abs(e.delta.x)/n,e.velocity.y=Math.abs(e.delta.y)/n,e.events.fire(b.MOVE,t,!0),e.isTouching&&e.events.fire(b.DRAG,t,!0)}function h(t){if(!e.isTouching)return;e.isTouching=!1,e.move.x=0,e.move.y=0,Math.max(.001,s.TIME-(r||s.TIME))>100&&(e.delta.x=0,e.delta.y=0),e.events.fire(b.END,t,!0),i<20&&s.TIME-n<2e3&&e.events.fire(b.CLICK,t,!0)}this.x=0,this.y=0,this.hold=new g,this.last=new g,this.delta=new g,this.move=new g,this.velocity=new g,function(){t===y?b.bind("touchstart",a):t.bind("touchstart",a);b.bind("touchmove",o),b.bind("touchend",h)}(),this.destroy=(()=>(b.unbind("touchstart",a),b.unbind("touchmove",o),b.unbind("touchend",h),t!==y&&t.unbind&&t.unbind("touchstart",a),super.destroy()))}}class v extends a{constructor(t,s){Array.isArray(t)&&(t=t.map(t=>e.basename(t)).reduce((e,s,i)=>(e[s]=t[i],e),{})),super();const i=this,r=Object.keys(t).length;let a=0;for(let e in t)h(e,t[e]);function h(t,s){const i=e.extension(s);if(!i.includes(["jpg","jpeg","png","gif","svg"]))return i.includes(["mp3","m4a","ogg","wav","aif"])?window.AudioContext&&window.WebAudio?void window.WebAudio.createSound(t,s,l):l():void window.get(o.getPath(s)).then(e=>{"json"===i&&o.storeData(t,e),"js"===i&&window.eval(e.replace("use strict","")),l()}).catch(()=>{l()});o.createImage(s,l)}function l(){i.percent=++a/r,i.events.fire(n.PROGRESS,{percent:i.percent},!0),a===r&&(i.events.fire(n.COMPLETE,null,!0),s&&s())}}static loadAssets(t,e){const s=Promise.create();return e||(e=s.resolve),s.loader=new v(t,e),s}}class w extends a{constructor(t,e){super();const s=this;let i;!function(){Array.isArray(t)||(t=[t]);i=document.createElement("canvas").getContext("2d"),t.forEach(t=>(t=t.replace(/"/g,"'"),i.font=`12px "${t}"`,void i.fillText("LOAD",0,0))),function(){const t=()=>{s.percent=1,s.events.fire(n.PROGRESS,{percent:s.percent},!0),s.events.fire(n.COMPLETE,null,!0),e&&e()};document.fonts&&document.fonts.ready?document.fonts.ready.then(t):s.delayedCall(t,500)}();var r}()}static loadFonts(t,e){const s=Promise.create();return e||(e=s.resolve),s.loader=new w(t,e),s}}class x{constructor(t){this.styles={},t?this.styled=!1:this.data=new Float32Array(6)}setTRSA(t,e,s,i,n,r){const a=this.data;a[0]=t,a[1]=e,a[2]=s,a[3]=i,a[4]=n,a[5]=r}calculate(t){const e=t.data,s=this.data;s[0]=s[0]+e[0],s[1]=s[1]+e[1],s[2]=s[2]+e[2],s[3]=s[3]*e[3],s[4]=s[4]*e[4],s[5]=s[5]*e[5]}calculateStyle(t){if(!t.styled)return!1;this.styled=!0;const e=t.values;for(let t in e)this.styles[t]||(this.styles[t]=e[t])}set shadowOffsetX(t){this.styled=!0,this.styles.shadowOffsetX=t}get shadowOffsetX(){return this.styles.shadowOffsetX}set shadowOffsetY(t){this.styled=!0,this.styles.shadowOffsetY=t}get shadowOffsetY(){return this.styles.shadowOffsetY}set shadowBlur(t){this.styled=!0,this.styles.shadowBlur=t}get shadowBlur(){return this.styles.shadowBlur}set shadowColor(t){this.styled=!0,this.styles.shadowColor=t}get shadowColor(){return this.styles.shadowColor}get values(){return this.styles}}class E{constructor(){this.visible=!0,this.blendMode="source-over",this.x=0,this.y=0,this.px=0,this.py=0,this.clipX=0,this.clipY=0,this.clipWidth=0,this.clipHeight=0,this.width=0,this.height=0,this.rotation=0,this.scale=1,this.opacity=1,this.values=new x,this.styles=new x(!0),this.children=[]}updateValues(){this.values.setTRSA(this.x,this.y,Math.radians(this.rotation),this.scaleX||this.scale,this.scaleY||this.scale,this.opacity),this.parent.values&&this.values.calculate(this.parent.values),this.parent.styles&&this.styles.calculateStyle(this.parent.styles)}render(t){if(!this.visible)return!1;this.updateValues(),this.draw&&this.draw(t);for(let e=0;e<this.children.length;e++)this.children[e].render(t)}startDraw(t=0,e=0,s){const i=this.canvas.context,n=this.values.data,r=n[0]+t,a=n[1]+e;if(i.save(),s||(i.globalCompositeOperation=this.blendMode),i.translate(r,a),i.rotate(n[2]),i.scale(n[3],n[4]),i.globalAlpha=n[5],this.styles.styled){const t=this.styles.values;for(let e in t)i[e]=t[e]}}endDraw(){this.canvas.context.restore()}add(t){t.setCanvas(this.canvas),t.parent=this,this.children.push(t),t.z=this.children.length}setCanvas(t){this.canvas=t;for(let e=0;e<this.children.length;e++)this.children[e].setCanvas(t)}remove(t){t.canvas=null,t.parent=null,this.children.remove(t)}isMask(){let t=this;for(;t;){if(t.masked)return!0;t=t.parent}return!1}unmask(){this.masked.mask(null),this.masked=null}setZ(t){this.z=t,this.parent.children.sort((t,e)=>t.z-e.z)}follow(t){return this.x=t.x,this.y=t.y,this.px=t.px,this.py=t.py,this.clipX=t.clipX,this.clipY=t.clipY,this.clipWidth=t.clipWidth,this.clipHeight=t.clipHeight,this.width=t.width,this.height=t.height,this.rotation=t.rotation,this.scale=t.scale,this.scaleX=t.scaleX||t.scale,this.scaleY=t.scaleY||t.scale,this}visible(){return this.visible=!0,this}invisible(){return this.visible=!1,this}transform(t){for(let e in t)"number"==typeof t[e]&&(this[e]=t[e]);return this}transformPoint(t,e){return this.px="number"==typeof t?t:this.width*(parseFloat(t)/100),this.py="number"==typeof e?e:this.height*(parseFloat(e)/100),this}clip(t,e,s,i){return this.clipX=t,this.clipY=e,this.clipWidth=s,this.clipHeight=i,this}destroy(){if(this.children)for(let t=this.children.length-1;t>=0;t--)this.children[t].destroy();return e.nullObject(this)}}class R extends E{constructor(t=0,s=t){super();const i=this;this.width=t,this.height=s,this.props={};let n,r=[];this.draw=(t=>{if(this.isMask()&&!t)return!1;const e=this.canvas.context;this.startDraw(this.px,this.py,t),function(t){for(let e in i.props)t[e]=i.props[e]}(e),this.clipWidth&&this.clipHeight&&(e.beginPath(),e.rect(this.clipX,this.clipY,this.clipWidth,this.clipHeight),e.clip());for(let t=0;t<r.length;t++){const s=r[t];if(!s)continue;const i=s.shift();e[i].apply(e,s),s.unshift(i)}this.endDraw(),n&&(e.globalCompositeOperation=n.blendMode,n.render(!0))}),this.clear=(()=>{for(let t=r.length-1;t>=0;t--)r[t].length=0;r.length=0}),this.arc=((t=0,e=0,s=this.radius||this.width/2,i=0,n=2*Math.PI,a=!1)=>{t&&!e&&(i=Math.radians(-90),n=t,t=0,e=0),r.push(["arc",t,e,s,i,n,a])}),this.quadraticCurveTo=((t,e,s,i)=>{r.push(["quadraticCurveTo",t,e,s,i])}),this.bezierCurveTo=((t,e,s,i,n,a)=>{r.push(["bezierCurveTo",t,e,s,i,n,a])}),this.fillRect=((t,e,s,i)=>{r.push(["fillRect",t,e,s,i])}),this.clearRect=((t,e,s,i)=>{r.push(["clearRect",t,e,s,i])}),this.strokeRect=((t,e,s,i)=>{r.push(["strokeRect",t,e,s,i])}),this.moveTo=((t,e)=>{r.push(["moveTo",t,e])}),this.lineTo=((t,e)=>{r.push(["lineTo",t,e])}),this.stroke=(()=>{r.push(["stroke"])}),this.fill=(()=>{n||r.push(["fill"])}),this.beginPath=(()=>{r.push(["beginPath"])}),this.closePath=(()=>{r.push(["closePath"])}),this.fillText=((t,e=0,s=0)=>{r.push(["fillText",t,e,s])}),this.strokeText=((t,e=0,s=0)=>{r.push(["strokeText",t,e,s])}),this.setLineDash=(t=>{r.push(["setLineDash",t])}),this.drawImage=((t,e=0,s=0,i=t.width,n=t.height,a=0,o=0,h=t.width,l=t.height)=>{r.push(["drawImage",t,e,s,i,n,a+-this.px,o+-this.py,h,l])}),this.mask=(t=>{if(!t)return n=null;n=t,t.masked=this;for(let t=0;t<r.length;t++)"fill"!==r[t][0]&&"stroke"!==r[t][0]||(r[t].length=0,r.splice(t,1))}),this.clone=(()=>{const t=new R(this.width,this.height);return t.visible=this.visible,t.blendMode=this.blendMode,t.opacity=this.opacity,t.follow(this),t.props=e.cloneObject(this.props),t.setDraw(e.cloneArray(r)),t}),this.setDraw=(t=>{r=t})}set strokeStyle(t){this.props.strokeStyle=t}get strokeStyle(){return this.props.strokeStyle}set fillStyle(t){this.props.fillStyle=t}get fillStyle(){return this.props.fillStyle}set lineWidth(t){this.props.lineWidth=t}get lineWidth(){return this.props.lineWidth}set lineCap(t){this.props.lineCap=t}get lineCap(){return this.props.lineCap}set lineDashOffset(t){this.props.lineDashOffset=t}get lineDashOffset(){return this.props.lineDashOffset}set lineJoin(t){this.props.lineJoin=t}get lineJoin(){return this.props.lineJoin}set miterLimit(t){this.props.miterLimit=t}get miterLimit(){return this.props.miterLimit}set font(t){this.props.font=t}get font(){return this.props.font}set textAlign(t){this.props.textAlign=t}get textAlign(){return this.props.textAlign}set textBaseline(t){this.props.textBaseline=t}get textBaseline(){return this.props.textBaseline}}class T{constructor(t,s=t,i,n){"boolean"==typeof s&&(i=s,s=t);const r=this;function a(t,e){const s=i?2:1;if(r.element.width=t*s,r.element.height=e*s,r.width=t,r.height=e,r.scale=s,r.object.size(r.width,r.height),r.context.scale(s,s),r.element.style.width=t+"px",r.element.style.height=e+"px",n){const t=new R(r.width,r.height);t.fillStyle="rgba(255, 255, 255, 0.002)",t.fillRect(0,0,r.width,r.height),t.setCanvas(r),t.parent=r,r.children[0]=t,t.z=1}}this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.object=new d(this.element),this.children=[],this.retina=i,a(t,s),this.size=a,this.toDataURL=((t,e)=>this.element.toDataURL(t,e)),this.render=(t=>{"boolean"==typeof t&&t||this.clear();for(let t=0;t<this.children.length;t++)this.children[t].render()}),this.clear=(()=>{this.context.clearRect(0,0,this.element.width,this.element.height)}),this.add=(t=>{t.setCanvas(this),t.parent=this,this.children.push(t),t.z=this.children.length}),this.remove=(t=>{t.canvas=null,t.parent=null,this.children.remove(t)}),this.destroy=(()=>{if(this.children)for(let t=this.children.length-1;t>=0;t--)this.children[t].destroy();return this.object.destroy(),e.nullObject(this)}),this.getImageData=((t=0,e=0,s=this.element.width,i=this.element.height)=>(this.imageData=this.context.getImageData(t,e,s,i),this.imageData)),this.getPixel=((t,e,s)=>{this.imageData&&!s||this.getImageData();const i={},n=4*(t+e*this.element.width),r=this.imageData.data;return i.r=r[n],i.g=r[n+1],i.b=r[n+2],i.a=r[n+3],i}),this.putImageData=(t=>{this.context.putImageData(t,0,0)})}}class k{constructor(t){const e=this;function s(t){var s,n;t instanceof k?(n=t,e.r=n.r,e.g=n.g,e.b=n.b):"number"==typeof t?i(t):Array.isArray(t)?(s=t,e.r=s[0],e.g=s[1],e.b=s[2]):i(Number("0x"+t.slice(1)))}function i(t){t=Math.floor(t),e.r=(t>>16&255)/255,e.g=(t>>8&255)/255,e.b=(255&t)/255}function n(t,e,s){return s<0?s+=1:s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+6*(e-t)*(2/3-s):t}this.r=1,this.g=1,this.b=1,s(t),this.set=(t=>(s(t),this)),this.setRGB=((t,e,s)=>(this.r=t,this.g=e,this.b=s,this)),this.setHSL=((t,e,s)=>{if(0===e)this.r=this.g=this.b=s;else{const i=s<=.5?s*(1+e):s+e-s*e,r=2*s-i;this.r=n(r,i,t+1/3),this.g=n(r,i,t),this.b=n(r,i,t-1/3)}return this}),this.offsetHSL=((t,e,s)=>{const i=this.getHSL();return i.h+=t,i.s+=e,i.l+=s,this.setHSL(i.h,i.s,i.l),this}),this.getStyle=(t=>t?"rgba("+(255*this.r|0)+", "+(255*this.g|0)+", "+(255*this.b|0)+", "+t+")":"rgb("+(255*this.r|0)+", "+(255*this.g|0)+", "+(255*this.b|0)+")"),this.getHex=(()=>255*this.r<<16^255*this.g<<8^255*this.b<<0),this.getHexString=(()=>"#"+("000000"+this.getHex().toString(16)).slice(-6)),this.getHSL=(()=>{this.hsl||(this.hsl={h:0,s:0,l:0});const t=this.hsl,e=this.r,s=this.g,i=this.b,n=Math.min(e,s,i),r=Math.max(e,s,i),a=(n+r)/2;let o,h;if(n===r)o=0,h=0;else{const t=r-n;switch(h=a<=.5?t/(r+n):t/(2-r-n),r){case e:o=(s-i)/t+(s<i?6:0);break;case s:o=(i-e)/t+2;break;case i:o=(e-s)/t+4}o/=6}return t.h=o,t.s=h,t.l=a,t}),this.add=(t=>{this.r+=t.r,this.g+=t.g,this.b+=t.b}),this.mix=((t,e)=>{this.r*=1-e+t.r*e,this.g*=1-e+t.g*e,this.b*=1-e+t.b*e}),this.addScalar=(t=>{this.r+=t,this.g+=t,this.b+=t}),this.multiply=(t=>{this.r*=t.r,this.g*=t.g,this.b*=t.b}),this.multiplyScalar=(t=>{this.r*=t,this.g*=t,this.b*=t}),this.clone=(()=>new k([this.r,this.g,this.b])),this.toArray=(()=>(this.array||(this.array=[]),this.array[0]=this.r,this.array[1]=this.g,this.array[2]=this.b,this.array)),this.random=(()=>{let t="#"+Math.floor(16777215*Math.random()).toString(16);return t.length<7&&(t=this.random()),t})}}class O extends a{constructor(t,e){O.initialized||(O.test=O.test||!r.mobile&&"safari"!==r.browser&&!r.detect("trident"),O.initialized=!0),super();const s=this;function i(){s.events.fire(n.ERROR,null,!0)}function a(){s.playing=!0,s.events.fire(n.READY,null,!0)}function h(){s.playing=!1}!function(){const n=t.src;if(n&&O.test)window.fetch(o.getPath(n)).then(t=>{if(!t.ok)return i();t.blob().then(t=>{s.element=document.createElement("video"),s.element.src=URL.createObjectURL(t),s.element.muted=!0,s.element.loop=!0,s.element.addEventListener("playing",a,!0),s.element.addEventListener("pause",h,!0),s.element.play(),e&&e()})}).catch(()=>{i(),e&&e()});else{const n=o.createImage(t.img);n.onload=(()=>{s.element=n,e&&e()}),n.onerror=i}}(),this.play=(()=>{this.element.play()}),this.pause=(()=>{this.element.pause()}),this.ready=(()=>this.element.readyState>this.element.HAVE_CURRENT_DATA),this.destroy=(()=>(this.element&&(this.element.pause&&(this.element.removeEventListener("playing",a,!0),this.element.removeEventListener("pause",h,!0),this.pause()),URL.revokeObjectURL(this.element.src),this.element.src=""),super.destroy()))}}class M extends a{constructor(t,e){super();const s=this;this.list=[],this.pathList=[];let i=0;function r(){s.percent=++i/s.list.length,s.events.fire(n.PROGRESS,{percent:s.percent},!0),i===s.list.length&&(s.events.fire(n.COMPLETE,null,!0),e&&e())}t.forEach(t=>{this.list.push(new O(t,r)),this.pathList.push(t.path)})}static loadSlides(t,e){const s=Promise.create();return e||(e=s.resolve),s.loader=new M(t,e),s}}navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);class S{constructor(t,e,s,i){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof s?s:0,this.w="number"==typeof i?i:1,this.type="vector3"}set(t,e,s,i){return this.x=t||0,this.y=e||0,this.z=s||0,this.w=i||1,this}clear(){return this.x=0,this.y=0,this.z=0,this.w=1,this}copyTo(t){return t.x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,t}copy(t){return this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||1,this}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.lengthSq())}normalize(){const t=1/this.length();return this.set(this.x*t,this.y*t,this.z*t),this}setLength(t){return this.normalize().multiply(t),this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}multiply(t){return this.x*=t,this.y*=t,this.z*=t,this}divide(t){return this.x/=t,this.y/=t,this.z/=t,this}limit(t){this.length()>t&&(this.normalize(),this.multiply(t))}heading2D(){return-Math.atan2(-this.y,this.x)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}deltaLerp(t,e,s=1){for(let i=0;i<s;i++)this.lerp(t,e);return this}interp(t,e,s,i=5e3){this.calc||(this.calc=new S),this.calc.subVectors(this,t);const n=h.convertEase(s)(Math.clamp(Math.range(this.calc.lengthSq(),0,i*i,1,0),0,1)*(e/10));return this.lerp(t,n)}setAngleRadius(t,e){return this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this.z=Math.sin(t)*e,this}addAngleRadius(t,e){return this.x+=Math.cos(t)*e,this.y+=Math.sin(t)*e,this.z+=Math.sin(t)*e,this}applyQuaternion(t){const e=this.x,s=this.y,i=this.z,n=t.x,r=t.y,a=t.z,o=t.w,h=o*e+r*i-a*s,l=o*s+a*e-n*i,c=o*i+n*s-r*e,u=-n*e-r*s-a*i;return this.x=h*o+u*-n+l*-a-c*-r,this.y=l*o+u*-r+c*-n-h*-a,this.z=c*o+u*-a+h*-r-l*-n,this}dot(t,e=this){return t.x*e.x+t.y*e.y+t.z*e.z}clone(){return new S(this.x,this.y,this.z)}cross(t,e=this){const s=t.y*e.z-t.z*e.y,i=t.z*e.x-t.x*e.z,n=t.x*e.y-t.y*e.x;return this.set(s,i,n,this.w),this}distanceTo(t,e){const s=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e?s*s+i*i+n*n:Math.sqrt(s*s+i*i+n*n)}solveAngle(t,e=this){return Math.acos(t.dot(e)/(t.length()*e.length()||1e-5))}solveAngle2D(t,e=this){const s=new g,i=new g;return s.copy(t),i.copy(e),s.solveAngle(i)}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}toString(t=" "){return this.x+t+this.y+t+this.z}}class I{static decompose(t,e){t.matrixWorld.decompose(e.position,e.quaternion,e.scale)}static createDebug(t=40,e){const s=new THREE.IcosahedronGeometry(t,1),i=e?new THREE.MeshBasicMaterial({color:e}):new THREE.MeshNormalMaterial;return new THREE.Mesh(s,i)}static createRT(t,e){const s={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1};return new THREE.WebGLRenderTarget(t,e,s)}static getTexture(t){if(this.textures||(this.textures={}),!this.textures[t]){const e=o.createImage(t),s=new THREE.Texture(e);e.onload=(()=>{s.needsUpdate=!0,s.onload&&(s.onload(),s.onload=null),THREE.Math.isPowerOfTwo(e.width*e.height)||(s.minFilter=THREE.LinearFilter)}),this.textures[t]=s}return this.textures[t]}static setInfinity(t){const e=Number.POSITIVE_INFINITY;return t.set(e,e,e),t}static freezeMatrix(t){t.matrixAutoUpdate=!1,t.updateMatrix()}static getCubemap(t){const e="cube_"+(Array.isArray(t)?t[0]:t);if(this.textures||(this.textures={}),!this.textures[e]){const s=[];for(let i=0;i<6;i++){const n=o.createImage(Array.isArray(t)?t[i]:t);s.push(n),n.onload=(()=>this.textures[e].needsUpdate=!0)}this.textures[e]=new THREE.Texture(s),this.textures[e].minFilter=THREE.LinearFilter}return this.textures[e]}static loadObject(t){return this.objectLoader||(this.objectLoader=new THREE.ObjectLoader),this.objectLoader.parse(t)}static loadGeometry(t){return this.geomLoader||(this.geomLoader=new THREE.JSONLoader),this.bufferGeomLoader||(this.bufferGeomLoader=new THREE.BufferGeometryLoader),"BufferGeometry"===t.type?this.bufferGeomLoader.parse(t):this.geomLoader.parse(t.data).geometry}static disposeAllTextures(){for(let t in this.textures)this.textures[t].dispose()}static loadBufferGeometry(t){const e=new THREE.BufferGeometry;return t.data&&(t=t.data),e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(t.position),3)),e.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.normal||t.position.length),3)),e.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(t.uv||t.position.length/3*2),2)),e}static loadSkinnedGeometry(t){const e=new THREE.BufferGeometry;return e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(t.position),3)),e.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.normal),3)),e.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(t.uv),2)),e.addAttribute("skinIndex",new THREE.BufferAttribute(new Float32Array(t.skinIndices),4)),e.addAttribute("skinWeight",new THREE.BufferAttribute(new Float32Array(t.skinWeights),4)),e.bones=t.bones,e}static loadCurve(t){const e=[];for(let s=0;s<t.length;s+=3)e.push(new THREE.Vector3(t[s+0],t[s+1],t[s+2]));return new THREE.CatmullRomCurve3(e)}static setLightCamera(t,e,s,i,n){t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.top=e,t.shadow.camera.bottom=-e,t.castShadow=!0,s&&(t.shadow.camera.near=s),i&&(t.shadow.camera.far=i),n&&(t.shadow.mapSize.width=t.shadow.mapSize.height=n),t.shadow.camera.updateProjectionMatrix()}static getRepeatTexture(t){const e=this.getTexture(t);return e.onload=(()=>e.wrapS=e.wrapT=THREE.RepeatWrapping),e}static loadTexture(t){const e=this.getTexture(t),s=Promise.create();return e.onload=(()=>s.resolve(e)),s}}class A extends a{constructor(t){super(),this.camera=t;const e=new THREE.Vector2,s=new THREE.Raycaster;let i;function n(t,e){return t.distance-e.distance}function r(t){Array.isArray(t)||(t=[t]);const e=[];return t.forEach(t=>(function t(e,s,i,n){if(!1===e.visible)return;let r=e.parent;for(;r;){if(!1===r.visible)return;r=r.parent}e.raycast(s,i),!0===n&&e.children.forEach(e=>t(e,s,i,!0))})(t,s,e,!1)),e.sort(n),i&&function(){const t=i.geometry.vertices;t[0].copy(s.ray.origin.clone()),t[1].copy(s.ray.origin.clone().add(s.ray.direction.clone().multiplyScalar(1e4))),i.geometry.verticesNeedUpdate=!0}(),e}this.pointsThreshold=(t=>{s.params.Points.threshold=t}),this.debug=(t=>{const e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(-100,0,0)),e.vertices.push(new THREE.Vector3(100,0,0));const s=new THREE.LineBasicMaterial({color:255});i=new THREE.Line(e,s),t.add(i)}),this.checkHit=((i,n=p)=>{const a=this.rect||y;return n===p&&a===y?e.copy(p.tilt):(e.x=n.x/a.width*2-1,e.y=-n.y/a.height*2+1),s.setFromCamera(e,t),r(i)}),this.checkFromValues=((t,e,i)=>(s.set(e,i,0,Number.POSITIVE_INFINITY),r(t)))}}class C extends a{constructor(t){C.initialized||(C.HOVER="interaction3d_hover",C.CLICK="interaction3d_click",C.initialized=!0),super();const e=this;this.ray=new A(t),this.meshes=[],this.meshCallbacks=[],this.cursor="auto",this.enabled=!0;const i={};let n,r;function a(){if(!e.enabled)return;const t=o();t?(r=t.object).time=s.TIME:r=null}function o(){if(!e.enabled)return;const t=e.ray.checkHit(e.meshes)[0];if(t){const e=t.object;return e!==n&&(n&&l("out",n),l("over",n=e),y.css("cursor","pointer")),t}return n&&(l("out",n),n=null,y.css("cursor",e.cursor)),!1}function h(){if(!e.enabled)return;if(!r)return;const t=e.ray.checkHit(e.meshes)[0];t&&t.object===r&&function(t){i.action="click",i.mesh=t,e.events.fire(C.CLICK,i,!0);const s=e.meshes.indexOf(r);e.meshCallbacks[s].clickCallback&&e.meshCallbacks[s].clickCallback(i)}(r),r=null}function l(t,s){i.action=t,i.mesh=s,e.events.fire(C.HOVER,i,!0);const r=e.meshes.indexOf(n);e.meshCallbacks[r].hoverCallback&&e.meshCallbacks[r].hoverCallback(i)}function c(t){Array.isArray(t)||(t=[t]);const e=[];return t.forEach(function t(s){"Mesh"===s.type&&s.mouseEnabled&&e.push(s);s.children.length&&s.children.forEach(t)}),e}e.events.add(p.input,b.START,a),e.events.add(p.input,b.MOVE,o),e.events.add(p.input,b.CLICK,h),this.add=((t,e,s,i)=>{Array.isArray(t)&&!i||(t=c(t)),t.forEach(t=>{this.meshes.push(t),this.meshCallbacks.push({hoverCallback:e,clickCallback:s})})}),this.remove=((t,e)=>{Array.isArray(t)&&!e||(t=c(t)),t.forEach(t=>{t===n&&(l("out",n),n=null,y.css("cursor",this.cursor));for(let e=this.meshes.length-1;e>=0;e--)this.meshes[e]===t&&(this.meshes.splice(e,1),this.meshCallbacks.splice(e,1))})})}set camera(t){this.ray.camera=t}}t.Utils=e,t.Render=s,t.Timer=i,t.Events=n,t.Device=r,t.Component=a,t.Interface=d,t.Interaction=b,t.Accelerometer=m,t.Mouse=p,t.Assets=o,t.AssetLoader=v,t.MultiLoader=class extends a{constructor(){super();const t=this,e=[];let s=0;function i(){let s=0;for(let t=0;t<e.length;t++)s+=e[t].percent||0;s/=e.length,t.events.fire(n.PROGRESS,{percent:s},!0)}function r(){++s===e.length&&t.events.fire(n.COMPLETE,null,!0)}this.push=(t=>{e.push(t),this.events.add(t,n.PROGRESS,i),this.events.add(t,n.COMPLETE,r)}),this.complete=(()=>{this.events.fire(n.PROGRESS,{percent:1},!0),this.events.fire(n.COMPLETE,null,!0)})}},t.FontLoader=w,t.StateDispatcher=class extends a{constructor(t){super();const e=this;this.locked=!1;let s,i,r="/";function a(){l(null,h())}function o(t){l(t.state,h())}function h(){return t?location.hash.slice(3):"/"!==r?location.pathname.split(r)[1]:location.pathname.slice(1)||""}function l(a,o){o!==s&&(e.locked?s&&(t?location.hash="!/"+s:history.pushState(i,null,r+s)):(s=o,i=a,e.events.fire(n.UPDATE,{value:a,path:o},!0)))}t?window.addEventListener("hashchange",a,!0):window.addEventListener("popstate",o,!0),s=h(),this.getState=(()=>{const t=h();return{value:i,path:t}}),this.setState=((e,n)=>{"object"!=typeof e&&(n=e,e=null),n!==s&&(s=n,i=e,t?location.hash="!/"+n:history.pushState(e,null,r+n))}),this.replaceState=((e,n)=>{"object"!=typeof e&&(n=e,e=null),n!==s&&(s=n,i=e,t?history.replaceState(null,null,"#!/"+n):history.replaceState(e,null,r+n))}),this.setTitle=(t=>document.title=t),this.lock=(()=>this.locked=!0),this.unlock=(()=>this.locked=!1),this.forceHash=(()=>t=!0),this.setPathRoot=(t=>{r="/"===t.charAt(0)?t:"/"+t}),this.destroy=(()=>(window.removeEventListener("hashchange",a,!0),window.removeEventListener("popstate",o,!0),super.destroy()))}},t.Storage=class{static set(t,e){null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),null===e?window.localStorage.removeItem(t):window.localStorage[t]=e}static get(t){let e=window.localStorage[t];if(e){let t;e.charAt&&(t=e.charAt(0)),"{"!==t&&"["!==t||(e=JSON.parse(e)),"true"!==e&&"false"!==e||(e="true"===e)}return e}},t.WebAudio=f,t.TweenManager=c,t.Interpolation=h,t.Canvas=T,t.CanvasGraphics=R,t.CanvasTexture=class extends E{constructor(t,e=0,s=e){super();const i=this;let n;function r(){i.onload&&i.onload(),i.width||i.height||(i.width=i.texture.width,i.height=i.texture.height)}this.width=e,this.height=s,"string"==typeof t?o.loadImage(t).then(t=>{i.texture=t,r()}):(i.texture=t,r()),this.draw=(t=>{if(this.isMask()&&!t)return!1;const e=this.canvas.context;this.texture&&(this.startDraw(this.px,this.py,t),e.drawImage(this.texture,-this.px,-this.py,this.width,this.height),this.endDraw()),n&&(e.globalCompositeOperation="source-in",n.render(!0),e.globalCompositeOperation="source-over")}),this.mask=(t=>{if(!t)return n=null;n=t,t.masked=this})}},t.CanvasFont=class{static createText(t,e,s,i,n,r,{textBaseline:a="alphabetic",lineHeight:o=s,letterSpacing:h=0,textAlign:l="start"}){const c=t.context;if(s===o)return u(t,e,s,i,n,r,a,h,l);{const d=new R(e,s),m=i.split(" "),p=[];let f="";d.totalWidth=0,d.totalHeight=0,c.font=n;for(let t=0;t<m.length;t++){const s=f+m[t]+" ",i=s.split("");let n=0;for(let t=0;t<i.length;t++)n+=c.measureText(i[t]).width+h;n>e&&t>0?(p.push(f),f=m[t]+" "):f=s}return p.push(f),p.forEach((s,i)=>{const c=u(t,e,o,s.slice(0,-1),n,r,a,h,l);c.y=i*o,d.add(c),d.totalWidth=Math.max(c.totalWidth,d.totalWidth),d.totalHeight+=o}),d}function u(t,e,s,i,n,r,a,o,h){const l=t.context,c=new R(e,s);c.font=n,c.fillStyle=r,c.textBaseline=a,c.totalWidth=0,c.totalHeight=s;const u=i.split("");let d,m=0,p=0;l.font=n;for(let t=0;t<u.length;t++)c.totalWidth+=l.measureText(u[t]).width+o;switch(h){case"start":case"left":p=0;break;case"end":case"right":p=e-c.totalWidth;break;case"center":p=(e-c.totalWidth)/2}do{d=u[m++],c.fillText(d,p,0),p+=l.measureText(d).width+o}while(m<i.length);return c}}},t.Color=k,t.Video=class extends a{constructor(t){super();const e=this;this.loaded={start:0,end:0,percent:0};const s={};let i,a,h,l,c=0;function u(){if(!e.element)return e.stopRender(u);e.duration=e.element.duration,e.time=e.element.currentTime,e.element.currentTime===i?++c>30&&!a&&(a=!0,e.events.fire(n.ERROR,null,!0)):(c=0,a&&(e.events.fire(n.READY,null,!0),a=!1)),i=e.element.currentTime,e.element.currentTime>=(e.duration||e.element.duration)-.001&&(e.loop||(l||e.stopRender(u),e.events.fire(n.COMPLETE,null,!0))),s.time=e.element.currentTime,s.duration=e.element.duration,s.loaded=e.loaded,e.events.fire(n.UPDATE,s,!0)}function m(){if(!e.element)return!1;if(h){const t=e.element.seekable;let s=-1;if(t){for(let e=0;e<t.length;e++)t.start(e)<h&&(s=t.end(e)-.5);s>=h&&(e.buffered=!0)}else e.buffered=!0}else e.buffered=e.element.readyState===e.element.HAVE_ENOUGH_DATA;e.buffered&&(e.stopRender(m),e.events.fire(n.READY,null,!0))}function p(){if(!e.ready())return;const t=e.element.buffered,s=e.element.currentTime;let i=0;for(;!(t.start(i)<=s&&s<=t.end(i));)i+=1;e.loaded.start=t.start(i)/e.element.duration,e.loaded.end=t.end(i)/e.element.duration,e.loaded.percent=e.loaded.end-e.loaded.start,e.events.fire(n.PROGRESS,e.loaded,!0)}!function(){const s=t.src;e.element=document.createElement("video"),s&&(e.element.src=o.getPath(s)),e.element.controls=t.controls,e.element.id=t.id||"",e.element.width=t.width,e.element.height=t.height,e.element.loop=t.loop,e.object=new d(e.element),e.width=t.width,e.height=t.height,e.object.size(e.width,e.height),r.mobile&&(e.object.attr("webkit-playsinline",!0),e.object.attr("playsinline",!0))}(),!1!==t.preload&&(e.element.preload="auto",e.element.load()),this.play=(()=>{this.playing=!0,this.element.play(),this.startRender(u)}),this.pause=(()=>{this.playing=!1,this.element.pause(),this.stopRender(u)}),this.stop=(()=>{this.playing=!1,this.element.pause(),this.stopRender(u),this.ready()&&(this.element.currentTime=0)}),this.volume=(t=>{this.element.volume=t,this.muted&&(this.muted=!1,this.object.attr("muted",""))}),this.mute=(()=>{this.volume(0),this.muted=!0,this.object.attr("muted",!0)}),this.seek=(t=>{this.element.readyState<=1?this.delayedCall(()=>{this.seek&&this.seek(t)},32):this.element.currentTime=t}),this.canPlayTo=(t=>(h=null,t&&(h=t),this.buffered||this.startRender(m),this.buffered)),this.ready=(()=>this.element.readyState>this.element.HAVE_CURRENT_DATA),this.size=((t,e)=>{this.element.width=this.width=t,this.element.height=this.height=e,this.object.size(this.width,this.height)}),this.forceRender=(()=>{l=!0,this.startRender(u)}),this.trackProgress=(()=>{this.element.addEventListener("progress",p,!0)}),this.destroy=(()=>(this.element.removeEventListener("progress",p,!0),this.stop(),this.element.src="",this.object.destroy(),super.destroy()))}set loop(t){this.element.loop=t}get loop(){return this.element.loop}set src(t){this.element.src=o.getPath(t)}get src(){return this.element.src}},t.SVG=class{constructor(t,s,i){const n=this;let r;function a(){r=new d(t,"svg",s),"circle"===s?["cx","cy","r"].forEach(t=>{i.stroke&&"r"===t?r.element.setAttributeNS(null,t,i.width/2-i.stroke):r.element.setAttributeNS(null,t,i.width/2)}):"radialGradient"===s&&(["cx","cy","r","fx","fy","name"].forEach(t=>{r.element.setAttributeNS(null,"name"===t?"id":t,i[t])}),r.element.setAttributeNS(null,"gradientUnits","userSpaceOnUse")),n.object=r}function o(){a(),i.colors.forEach(t=>{r.element.appendChild(function(t){const e=document.createElementNS("http://www.w3.org/2000/svg","stop");return["offset","style"].forEach(s=>{e.setAttributeNS(null,s,"style"===s?"stop-color:"+t[s]:t[s])}),e}(t))})}!function(){switch(s){case"svg":(r=new d(t,"svg")).element.setAttribute("preserveAspectRatio","xMinYMid meet"),r.element.setAttribute("version","1.1"),r.element.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.width&&(r.element.setAttribute("viewBox","0 0 "+i.width+" "+i.height),r.element.style.width=i.width+"px",r.element.style.height=i.height+"px"),n.object=r;break;case"radialGradient":case"linearGradient":o();break;default:a()}}(),this.addTo=(t=>{t.points?t=t.points:t.element?t=t.element:t.object&&(t=t.object.element),t.appendChild(r.element)}),this.destroy=(()=>(this.object.destroy(),e.nullObject(this)))}},t.Scroll=class extends a{constructor(t,e){t&&t.element||(e=t,t=null),e||(e={}),super();const s=this;this.x=0,this.y=0,this.max={x:0,y:0},this.delta={x:0,y:0},this.enabled=!0;const i={x:0,y:0};let a=["x","y"];function o(){c.clearTween(i)}function h(t){s.enabled&&(t.preventDefault(),o(),a.forEach(e=>{s.max[e]&&(i[e]+=t["delta"+e.toUpperCase()])}))}function l(){s.enabled&&o()}function u(){s.enabled&&a.forEach(t=>{s.max[t]&&(i[t]-=p.input.delta[t])})}function d(){if(!s.enabled)return;const t=(()=>"android"===r.os?35:25)(),e={};a.forEach(n=>{s.max[n]&&(e[n]=i[n]-p.input.delta[n]*t)}),c.tween(i,e,2500,"easeOutQuint")}function m(){if(!s.enabled)return;if(o(),!s.object)return;const t={};r.mobile&&a.forEach(e=>t[e]=s.max[e]?i[e]/s.max[e]:0),void 0===e.height&&(s.max.y=s.object.element.scrollHeight-s.object.element.clientHeight),void 0===e.width&&(s.max.x=s.object.element.scrollWidth-s.object.element.clientWidth),r.mobile&&a.forEach(e=>s[e]=i[e]=t[e]*s.max[e])}s.object=t,s.hitObject=e.hitObject||s.object,s.max.y=e.height||0,s.max.x=e.width||0,Array.isArray(e.axes)&&(a=e.axes),s.object&&s.object.css({overflow:"auto"}),function(){window.addEventListener("wheel",h,!0),s.hitObject&&s.hitObject.bind("touchstart",t=>t.preventDefault());const t=s.hitObject?s.hitObject.initClass(b):p.input;s.events.add(t,b.START,l),s.events.add(t,b.DRAG,u),s.events.add(t,b.END,d),s.events.add(n.RESIZE,m),m()}(),this.startRender(function(){a.forEach(t=>{s.max[t]&&(i[t]=Math.clamp(i[t],0,s.max[t]),s.delta[t]=i[t]-s[t],s[t]+=s.delta[t],s.object&&("x"===t&&(s.object.element.scrollLeft=s.x),"y"===t&&(s.object.element.scrollTop=s.y)))})}),this.destroy=(()=>(window.removeEventListener("wheel",h,!0),super.destroy()))}},t.Slide=class extends a{constructor(t={}){super();const e=this;this.x=0,this.y=0,this.max={x:0,y:0},this.delta={x:0,y:0},this.direction={x:0,y:0},this.position=0,this.progress=0,this.floor=0,this.ceil=0,this.index=0,this.enabled=!0;const s={x:0,y:0},i={x:0,y:0},r={};let a,o=["x","y"];function l(){e.isInertia=!1,c.clearTween(s)}function u(t){e.enabled&&(t.preventDefault&&t.preventDefault(),l(),o.forEach(i=>{e.max[i]&&(s[i]+=t["delta"+i.toUpperCase()])}))}function d(){e.enabled&&l()}function m(){e.enabled&&o.forEach(t=>{e.max[t]&&(s[t]+=4*-p.input.delta[t],i[t]=4*-p.input.delta[t],e.isInertia=!0)})}function f(t){e.enabled&&(40===t.keyCode&&e.next(),39===t.keyCode&&e.next(),38===t.keyCode&&e.prev(),37===t.keyCode&&e.prev())}function y(){e.enabled&&l()}e.num=t.num||0,t.max&&(e.max=t.max),t.index&&(e.index=t.index,e.x=s.x=e.index*e.max.x,e.y=s.y=e.index*e.max.y),t.axes&&(o=t.axes),window.addEventListener("wheel",u,!0),e.events.add(p.input,b.START,d),e.events.add(p.input,b.DRAG,m),e.events.add(n.KEYBOARD_DOWN,f),e.events.add(n.RESIZE,y),y(),this.startRender(function(){o.forEach(t=>{if(!e.max[t])return;const n=e[t]/e.max[t],r=Math.round(n);if(s[t]===r*e.max[t])return;0!==i[t]&&(i[t]*=.9,Math.abs(i[t])<.001&&(i[t]=0),s[t]+=i[t]);const a=.035*e.max[t];s[t]+=h.Sine.Out(Math.round(e.progress)-e.progress)*a,Math.abs(s[t]-e[t])>a?s[t]-=.5*(s[t]-e[t]):Math.abs(s[t]-e[t])<.001&&(s[t]=r*e.max[t]),e.delta[t]=s[t]-e[t],e.delta[t]=e.delta[t]<0?Math.max(e.delta[t],-a):Math.min(e.delta[t],a),e[t]+=e.delta[t]}),e.position=(e.x+e.y)/(e.max.x+e.max.y)%e.num+e.num,e.progress=e.position%1,e.floor=Math.floor(e.position)%e.num,e.ceil=Math.ceil(e.position)%e.num,e.index=Math.round(e.position)%e.num,a!==e.index&&(a=e.index,e.direction.x=e.delta.x<0?-1:1,e.direction.y=e.delta.y<0?-1:1,r.index=e.index,r.direction=e.direction,e.events.fire(n.UPDATE,r,!0))}),this.goto=(t=>{const e={};e.x=t*this.max.x,e.y=t*this.max.y,c.tween(s,e,2500,"easeOutQuint")}),this.next=(()=>{const t=(this.x+this.y)/(this.max.x+this.max.y),e=Math.round(t);this.goto(e+1)}),this.prev=(()=>{const t=(this.x+this.y)/(this.max.x+this.max.y),e=Math.round(t);this.goto(e-1)}),this.destroy=(()=>(window.removeEventListener("wheel",u,!0),super.destroy()))}},t.SlideLoader=M,t.SlideVideo=O,t.Webcam=class extends a{constructor(t,e,s){super();const i=this;this.facing="back";const a={};let o=!1,h=0;function l(){if(h>=2)return u();(function(){const t=Promise.create();return r.mobile?(navigator.mediaDevices.enumerateDevices().then(e=>{e.forEach(t=>{t.label.includes("front")&&(a.front={deviceId:{exact:t.deviceId}}),t.label.includes("back")&&(a.back={deviceId:{exact:t.deviceId}},o=!0)}),a.front||(a.front={facingMode:"user"}),a.back||(a.back={facingMode:"environment"},o=!1),t.resolve()}),t):Promise.resolve()})().then(()=>{i.stream&&i.config.back&&i.stream.getTracks()[0].stop(),navigator.getUserMedia({video:i.config.back?a.back:a.front||!0,audio:s},c,u)}),h+=1}function c(t){i.denied=!1,i.stream=t,i.config.back&&!o?l():(i.element.srcObject=t,i.events.fire(n.READY,null,!0))}function u(){i.denied=!0,i.events.fire(n.ERROR,null,!0)}i.element=document.createElement("video"),i.element.width=t,i.element.height=e,i.element.autoplay=!0,i.object=new d(i.element),i.width=t,i.height=e,i.object.size(i.width,i.height),r.mobile||i.object.transform({scaleX:-1}),this.createStream=(t=>{h=0,this.config=t,l()}),this.flip=(()=>{if(!o)return;let t;"front"===this.facing?(this.facing="back",t=a.back):(this.facing="front",t=a.front),this.stream.getTracks()[0].stop(),navigator.getUserMedia({video:t||!0,audio:s},c,u)}),this.size=((t,e)=>{this.element.width=this.width=t,this.element.height=this.height=e,this.object.size(this.width,this.height)}),this.getPixels=((t=this.width,e=this.height)=>(this.canvas||(this.canvas=this.initClass(T,t,e)),this.canvas.context.drawImage(this.element,0,0,t,e),this.canvas.context.getImageData(0,0,t,e))),this.ready=(()=>this.element.readyState>0),this.end=(()=>{this.active=!1,this.element.pause(),this.stream&&(this.stream.getTracks()[0].enabled=!1)}),this.restart=(()=>{this.element.play(),this.stream&&(this.stream.getTracks()[0].enabled=!0),this.active=!0}),this.destroy=(()=>(this.element.src="",this.object.destroy(),super.destroy()))}},t.WebcamMotion=class extends a{constructor(t,s=64,i=48,r=80,a=50,o=24){super();const h=this;this.capturing=!1;const l={xDir:null,xValue:0,yDir:null,yValue:0},c=[],u={},d={},m={},p={};let f,y;this.startRender(function(){h.capturing&&(function(){const e=t.getPixels(s,i).data;if(!f)return f=e;c.length=0;for(let t=0;t<i;t++)for(let i=0;i<s;i++){const n=t*s+i,a=f[4*n+0],o=f[4*n+1],h=f[4*n+2],l=e[4*n+0],u=e[4*n+1],d=e[4*n+2];(Math.abs(l-a)>r||Math.abs(u-o)>r||Math.abs(d-h)>r)&&c.push([i,t])}f=e;let n=0,a=0;c.forEach(t=>{n+=t[0],a+=t[1]}),u.x=n/c.length,u.y=a/c.length}(),function(){if(isNaN(u.x))return;if(c.length<a)return;p.x=1-u.x/s,p.y=u.y/i,(y=e.cloneArray(c)).forEach(t=>{t[0]=1-t[0]/s,t[1]/=i}),m.average=p,m.motion=y,m.gesture=null,h.events.fire(n.UPDATE,m,!0);const t=d.x-u.x,r=t<0?"left":"right";r!==l.xDir&&(l.xDir=r,l.xValue=Math.abs(t)),l.xValue+=Math.abs(t),l.xValue>20&&(m.gesture=l.xDir,h.events.fire(n.UPDATE,m,!0),l.xValue=0);const o=d.y-u.y,f=o<0?"down":"up";f!==l.yDir&&(l.yDir=f,l.yValue=Math.abs(o)),l.yValue+=Math.abs(o),l.yValue>20&&(m.gesture=l.yDir,h.events.fire(n.UPDATE,m,!0),l.yValue=0),d.x=u.x,d.y=u.y}())},o)}},t.LinkedList=class{constructor(){this.first=null,this.last=null,this.current=null,this.prev=null;const t=[];var s;this.push=(e=>{const s=(e=e,t[t.push({object:e,prev:null,next:null})-1]);this.first?(s.next=this.first,s.prev=this.last,this.last.next=s,this.last=s):s.next=s.prev=this.last=this.first=s}),this.remove=(e=>{const s=function(e){for(let s=0;s<t.length;s++)if(t[s].object===e)return t[s];return null}(e);s&&s.next&&(t.length<=1?this.empty():s===this.first?(this.first=s.next,this.last.next=this.first,this.first.prev=this.last):s==this.last?(this.last=s.prev,this.last.next=this.first,this.first.prev=this.last):(s.prev.next=s.next,s.next.prev=s.prev),function(e){for(let s=t.length-1;s>=0;s--)if(t[s].object===e){t[s]=null,t.splice(s,1);break}}(e))}),this.empty=(()=>{this.first=null,this.last=null,this.current=null,this.prev=null}),this.start=(()=>(this.current=this.first,this.prev=this.current,this.current)),this.next=(()=>{if(this.current&&1!==t.length&&this.prev.next!==this.first)return this.current=this.current.next,this.prev=this.current,this.current}),this.destroy=function(){for(let e=t.length-1;e>=0;e--)t[e]=null,t.splice(e,1);return e.nullObject(this)}}},t.ObjectPool=class{constructor(t,s){const i=[];if(this.array=i,t)for(let e=0;;e++)i.push(new t);this.get=(()=>i.shift()||(t?new t:null)),this.empty=(()=>{i.length=0}),this.put=(t=>{i.push(t)}),this.insert=(t=>{Array.isArray(t)||(t=[t]),i.push(...t)}),this.length=(()=>i.length),this.destroy=(()=>{for(let t=i.length-1;t>=0;t--)i[t].destroy&&i[t].destroy();return e.nullObject(this)})}},t.Vector2=g,t.Vector3=S,t.Utils3D=I,t.Interaction3D=C,t.Raycaster=A,t.ScreenProjection=class extends a{constructor(t){super();const e=new THREE.Vector3,s=new THREE.Vector3,i=new THREE.Vector3;this.set=(e=>{t=e}),this.unproject=((s,n)=>{const r=this.rect||y;e.set(s.x/r.width*2-1,-s.y/r.height*2+1,.5),e.unproject(t);const a=t.position;e.sub(a).normalize();const o=n||-a.z/e.z;return i.copy(a).add(e.multiplyScalar(o)),i}),this.project=(e=>{const i=this.rect||y;return e instanceof THREE.Object3D?(e.updateMatrixWorld(),s.set(0,0,0).setFromMatrixPosition(e.matrixWorld)):s.copy(e),s.project(t),s.x=(s.x+1)/2*i.width,s.y=-(s.y-1)/2*i.height,s})}},t.Shader=class extends a{constructor(t,e,s){super();const i=this;function n(t,e){let s;return(t=(s="vs"===e?["precision highp float;","precision highp int;","attribute vec2 uv;","attribute vec3 position;","attribute vec3 normal;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"):[~t.indexOf("dFdx")?"#extension GL_OES_standard_derivatives : enable":"","precision highp float;","precision highp int;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"))+"\n\n"+t).replace(/#s?chunk\(\s?(\w+)\s?\);/g,(t,e)=>THREE.ShaderChunk[e]+"\n")}this.uniforms={},this.properties={},function(){for(let t in s)void 0!==s[t].value?i.uniforms[t]=s[t]:i.properties[t]=s[t]}(),function(){const s={};s.vertexShader=n(t,"vs"),s.fragmentShader=n(e,"fs"),s.uniforms=i.uniforms;for(let t in i.properties)s[t]=i.properties[t];i.material=new THREE.RawShaderMaterial(s),i.material.shader=i,i.uniforms=i.material.uniforms}()}destroy(){return this.material.dispose(),super.destroy()}},t.Effects=class extends a{constructor(t,e){super();const s=this;let i,r,a,o;function h(){i.dispose(),i=I.createRT(s.stage.width*s.dpr,s.stage.height*s.dpr),a.left=s.stage.width/-2,a.right=s.stage.width/2,a.top=s.stage.height/2,a.bottom=s.stage.height/-2,a.updateProjectionMatrix()}this.stage=t,this.renderer=e.renderer,this.scene=e.scene,this.camera=e.camera,this.shader=e.shader,this.dpr=e.dpr||1,i=I.createRT(s.stage.width*s.dpr,s.stage.height*s.dpr),s.texture=i.texture,s.texture.minFilter=THREE.LinearFilter,r=new THREE.Scene,a=new THREE.OrthographicCamera(s.stage.width/-2,s.stage.width/2,s.stage.height/2,s.stage.height/-2,1,1e3),o=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),s.shader.material),r.add(o),s.events.add(n.RESIZE,h),this.render=(()=>{this.renderer.render(this.scene,this.camera,i,!0),o.material.uniforms.texture.value=i.texture,this.renderer.render(r,a)}),this.destroy=(()=>(r.remove(o),o.geometry.dispose(),o.material.dispose(),i.dispose(),i=null,o=null,a=null,r=null,super.destroy()))}},t.Stage=y,Object.defineProperty(t,"__esModule",{value:!0})});
