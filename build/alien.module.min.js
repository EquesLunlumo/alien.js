//   _  /._  _  r6 2017-11-29 9:53pm
//  /_|///_'/ /
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Alien={})}(this,function(t){"use strict";const e=new class{random(t,e,s=0){if(void 0===t)return Math.random();if(t===e)return t;t=t||0,e=e||1;const i=Math.pow(10,s);return Math.round((t+Math.random()*(e-t))*i)/i}headsTails(t,e){return this.random(0,1)?e:t}queryString(t){const e=decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(t).replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return!(!e.length||"0"===e||"false"===e)&&e}getConstructorName(t){return t.constructor.name||t.constructor.toString().match(/function ([^(]+)/)[1]}nullObject(t){for(let e in t)void 0!==t[e]&&(t[e]=null);return null}cloneObject(t){return JSON.parse(JSON.stringify(t))}mergeObject(...t){const e={};for(let s of t)for(let t in s)e[t]=s[t];return e}toArray(t){return Object.keys(t).map(e=>t[e])}cloneArray(t){return t.slice(0)}basename(t,e){const s=t.split("/").last();return e?s:s.split(".")[0]}extension(t){return t.split(".").last().split("?")[0].toLowerCase()}base64(t){return window.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(t,e)=>String.fromCharCode("0x"+e)))}timestamp(){return(Date.now()+this.random(0,99999)).toString()}pad(t){return t<10?"0"+t:t}};class s{constructor(){const t={};this.add=((e,s)=>{t[e]||(t[e]=[]),t[e].push(s)}),this.remove=((e,s)=>{t[e]&&t[e].remove(s)}),this.destroy=(()=>{for(let e in t)for(let s=t[e].length-1;s>-1;s--)t[e][s]=null,t[e].splice(s,1);return e.nullObject(this)}),this.fire=((e,s={})=>{t[e]&&t[e].forEach(t=>t(s))})}}s.VISIBILITY="visibility",s.KEYBOARD_PRESS="keyboard_press",s.KEYBOARD_DOWN="keyboard_down",s.KEYBOARD_UP="keyboard_up",s.RESIZE="resize",s.COMPLETE="complete",s.PROGRESS="progress",s.UPDATE="update",s.LOADED="loaded",s.ERROR="error",s.READY="ready",s.HOVER="hover",s.CLICK="click",window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(()=>{const t=Date.now();return e=>setTimeout(()=>e(Date.now()-t),1e3/60)})());const i=new class{constructor(){function t(r){const o=Math.min(i,r-n);n=r,e.TIME=r,e.DELTA=o;for(let t=s.length-1;t>=0;t--){const e=s[t];if(e)if(e.fps){if(r-e.last<1e3/e.fps)continue;e(++e.frame),e.last=r}else e(r,o);else s.remove(e)}e.paused||requestAnimationFrame(t)}let e=this;const s=[],i=200;let n=performance.now();requestAnimationFrame(t),this.start=((t,e)=>{e&&(t.fps=e,t.last=-1/0,t.frame=-1),~s.indexOf(t)||s.unshift(t)}),this.stop=(t=>{s.remove(t)}),this.pause=(()=>{this.paused=!0}),this.resume=(()=>{this.paused&&(this.paused=!1,requestAnimationFrame(t))})}},n=new class{constructor(){this.agent=navigator.userAgent.toLowerCase(),this.pixelRatio=window.devicePixelRatio,this.prefix=(()=>{const t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(webkit|moz|ms)-/)||""===t.OLink&&["","o"])[1];return{lowercase:e,js:e[0].toUpperCase()+e.substr(1)}})(),this.transformProperty=(()=>{let t;switch(this.prefix.lowercase){case"webkit":t="-webkit-transform";break;case"moz":t="-moz-transform";break;case"ms":t="-ms-transform";break;case"o":t="-o-transform";break;default:t="transform"}return t})(),this.mobile=!(!("ontouchstart"in window||"onpointerdown"in window)||!this.detect(["ios","iphone","ipad","android","blackberry"]))&&{},this.tablet=window.innerWidth>window.innerHeight?document.body.clientWidth>800:document.body.clientHeight>800,this.phone=!this.tablet}detect(t){"string"==typeof t&&(t=[t]);for(let e=0;e<t.length;e++)if(~this.agent.indexOf(t[e]))return!0;return!1}vendor(t){return this.prefix.js+t}vibrate(t){navigator.vibrate&&navigator.vibrate(t)}},r=new class{constructor(){this.convertEase=(t=>(()=>{let e;switch(t){case"easeInQuad":e=this.Quad.In;break;case"easeInCubic":e=this.Cubic.In;break;case"easeInQuart":e=this.Quart.In;break;case"easeInQuint":e=this.Quint.In;break;case"easeInSine":e=this.Sine.In;break;case"easeInExpo":e=this.Expo.In;break;case"easeInCirc":e=this.Circ.In;break;case"easeInElastic":e=this.Elastic.In;break;case"easeInBack":e=this.Back.In;break;case"easeInBounce":e=this.Bounce.In;break;case"easeOutQuad":e=this.Quad.Out;break;case"easeOutCubic":e=this.Cubic.Out;break;case"easeOutQuart":e=this.Quart.Out;break;case"easeOutQuint":e=this.Quint.Out;break;case"easeOutSine":e=this.Sine.Out;break;case"easeOutExpo":e=this.Expo.Out;break;case"easeOutCirc":e=this.Circ.Out;break;case"easeOutElastic":e=this.Elastic.Out;break;case"easeOutBack":e=this.Back.Out;break;case"easeOutBounce":e=this.Bounce.Out;break;case"easeInOutQuad":e=this.Quad.InOut;break;case"easeInOutCubic":e=this.Cubic.InOut;break;case"easeInOutQuart":e=this.Quart.InOut;break;case"easeInOutQuint":e=this.Quint.InOut;break;case"easeInOutSine":e=this.Sine.InOut;break;case"easeInOutExpo":e=this.Expo.InOut;break;case"easeInOutCirc":e=this.Circ.InOut;break;case"easeInOutElastic":e=this.Elastic.InOut;break;case"easeInOutBack":e=this.Back.InOut;break;case"easeInOutBounce":e=this.Bounce.InOut;break;case"linear":e=this.Linear.None}return e})()||this.Cubic.Out),this.Linear={None:t=>t},this.Quad={In:t=>t*t,Out:t=>t*(2-t),InOut:t=>(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},this.Cubic={In:t=>t*t*t,Out:t=>--t*t*t+1,InOut:t=>(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},this.Quart={In:t=>t*t*t*t,Out:t=>1- --t*t*t*t,InOut:t=>(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},this.Quint={In:t=>t*t*t*t*t,Out:t=>--t*t*t*t*t+1,InOut:t=>(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},this.Sine={In:t=>1-Math.cos(t*Math.PI/2),Out:t=>Math.sin(t*Math.PI/2),InOut:t=>.5*(1-Math.cos(Math.PI*t))},this.Expo={In:t=>0===t?0:Math.pow(1024,t-1),Out:t=>1===t?1:1-Math.pow(2,-10*t),InOut:t=>0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},this.Circ={In:t=>1-Math.sqrt(1-t*t),Out:t=>Math.sqrt(1- --t*t),InOut:t=>(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},this.Elastic={In(t,e=1,s=.4){let i;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=s/4):i=s*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s))},Out(t,e=1,s=.4){let i;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=s/4):i=s*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/s)+1)},InOut(t,e=1,s=.4){let i;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=s/4):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}},this.Back={In:t=>t*t*(2.70158*t-1.70158),Out:t=>--t*t*(2.70158*t+1.70158)+1,InOut(t){const e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},this.Bounce={In(t){return 1-this.Bounce.Out(1-t)},Out:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,InOut(t){return t<.5?.5*this.Bounce.In(2*t):.5*this.Bounce.Out(2*t-1)+.5}}}};class o{constructor(t,s,i,n,o,h,l){function c(){if(!t&&!s)return!1;t.mathTween=null,a.removeMathTween(u),e.nullObject(u),t.mathTweens&&t.mathTweens.remove(u)}const u=this;let d,m,p,f,y,w,b;!function(){!t.multiTween&&t.mathTween&&a.clearTween(t),a.addMathTween(u),t.mathTween=u,t.multiTween&&(t.mathTweens||(t.mathTweens=[]),t.mathTweens.push(u)),n=r.convertEase(n),d=performance.now(),d+=o,p=s,m={},s.spring&&(y=s.spring),s.damping&&(w=s.damping);for(let e in p)"number"==typeof t[e]&&(m[e]=t[e])}(),this.update=(t=>{if(f||t<d)return;b=(b=(t-d)/i)>1?1:b;const e=this.interpolate(b);h&&h(e),1===b&&(l&&l(),c())}),this.stop=(()=>{c()}),this.pause=(()=>{f=!0}),this.resume=(()=>{f=!1,d=performance.now()-b*i}),this.interpolate=(e=>{const s=n(e,y,w);for(let e in m)if("number"==typeof m[e]&&"number"==typeof p[e]){const i=m[e],n=p[e];t[e]=i+(n-i)*s}return s})}}const a=new class{constructor(){const t=this;this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"};const e=[];i.start(function(s){for(let i=e.length-1;i>=0;i--){const n=e[i];n.update?n.update(s):t.removeMathTween(n)}}),this.addMathTween=(t=>{e.push(t)}),this.removeMathTween=(t=>{e.remove(t)})}tween(t,e,s,i,n,r,a){"number"!=typeof n&&(a=r,r=n,n=0);let h=null;"undefined"!=typeof Promise&&(h=Promise.create(),r&&h.then(r),r=h.resolve);const l=new o(t,e,s,i,n,a,r);return h||l}clearTween(t){if(t.mathTween&&t.mathTween.stop(),t.mathTweens){const e=t.mathTweens;for(let t=0;t<e.length;t++){const s=e[t];s&&s.stop()}t.mathTweens=null}}parseTransform(t){let e="";if(void 0!==t.x||void 0!==t.y||void 0!==t.z){let s="";s+=(t.x||0)+"px, ",s+=(t.y||0)+"px, ",e+="translate3d("+(s+=(t.z||0)+"px")+")"}return void 0!==t.scale?e+="scale("+t.scale+")":(void 0!==t.scaleX&&(e+="scaleX("+t.scaleX+")"),void 0!==t.scaleY&&(e+="scaleY("+t.scaleY+")")),void 0!==t.rotation&&(e+="rotate("+t.rotation+"deg)"),void 0!==t.rotationX&&(e+="rotateX("+t.rotationX+"deg)"),void 0!==t.rotationY&&(e+="rotateY("+t.rotationY+"deg)"),void 0!==t.rotationZ&&(e+="rotateZ("+t.rotationZ+"deg)"),void 0!==t.skewX&&(e+="skewX("+t.skewX+"deg)"),void 0!==t.skewY&&(e+="skewY("+t.skewY+"deg)"),void 0!==t.perspective&&(e+="perspective("+t.perspective+"px)"),e}isTransform(t){return~this.TRANSFORMS.indexOf(t)}getAllTransforms(t){const e={};for(let s=this.TRANSFORMS.length-1;s>-1;s--){const i=this.TRANSFORMS[s],n=t[i];0!==n&&"number"==typeof n&&(e[i]=n)}return e}getEase(t){return this.CSS_EASES[t]||this.CSS_EASES.easeOutCubic}};class h{constructor(t,s,i,r,o,h){function l(){return!u||u.kill||!t||!t.element}function c(){l()||(u.kill=!0,t.element.style[n.vendor("Transition")]="",t.cssTween=null,t.willChange(null),t=s=null,e.nullObject(u))}const u=this;let d,m;!function(){const e=a.getAllTransforms(t),i=[];for(let t in s)a.isTransform(t)?(e.use=!0,e[t]=s[t],delete s[t]):("number"==typeof s[t]||~t.indexOf("-"))&&i.push(t);e.use&&(i.push(n.transformProperty),delete e.use),d=e,m=i}(),function(){if(l())return;t.cssTween&&(t.cssTween.kill=!0),t.cssTween=u;const e=function(t,e,s){let i="",n="";for(let r=0;r<m.length;r++){const o=m[r];i+=(i.length?", ":"")+o,n+=(n.length?", ":"")+o+" "+t+"ms "+a.getEase(e)+" "+s+"ms"}return{props:i,transition:n}}(i,r,o);t.willChange(e.props),setTimeout(()=>{l()||(t.element.style[n.vendor("Transition")]=e.transition,t.css(s),t.transform(d),setTimeout(()=>{l()||(c(),h&&h())},i+o))},50)}(),this.stop=c}}class l{constructor(t,e="div",i){if(this.events=new s,this.classes=[],this.timers=[],this.loops=[],void 0!==t){if("string"==typeof t){if(this.name=t,this.type=e,"svg"===this.type){const t=i||"svg";i=!0,this.element=document.createElementNS("http://www.w3.org/2000/svg",t),this.element.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")}else this.element=document.createElement(this.type),"."!==t[0]?this.element.id=t:this.element.className=t.substr(1);this.element.style.position="absolute",i||(window.Alien&&window.Alien.Stage?window.Alien.Stage:document.body).appendChild(this.element)}else this.element=t;this.element.object=this}}initClass(t,...e){const s=new t(...e);return this.add(s),s}add(t){const e=this.element;return t.element?(e.appendChild(t.element),this.classes.push(t),t.parent=this):t.nodeName&&e.appendChild(t),this}delayedCall(t,e=0,...s){const i=setTimeout(()=>{t&&t(...s)},e);return this.timers.push(i),this.timers.length>50&&this.timers.shift(),i}clearTimers(){for(let t=this.timers.length-1;t>=0;t--)clearTimeout(this.timers[t]);this.timers.length=0}startRender(t,e){this.loops.push(t),i.start(t,e)}stopRender(t){this.loops.remove(t),i.stop(t)}clearRenders(){for(let t=this.loops.length-1;t>=0;t--)this.stopRender(this.loops[t]);this.loops.length=0}destroy(){this.removed=!0;const t=this.parent;t&&!t.removed&&t.remove&&t.remove(this);for(let t=this.classes.length-1;t>=0;t--){const e=this.classes[t];e&&e.destroy&&e.destroy()}return this.classes.length=0,this.element.object=null,this.clearRenders(),this.clearTimers(),this.events.destroy(),e.nullObject(this)}remove(t){t.element.parentNode.removeChild(t.element),this.classes.remove(t)}create(t,e){const s=new l(t,e);return this.add(s),s}clone(){return new l(this.element.cloneNode(!0))}empty(){return this.element.innerHTML="",this}text(t){return void 0===t?this.element.textContent:(this.element.textContent=t,this)}html(t){return void 0===t?this.element.innerHTML:(this.element.innerHTML=t,this)}hide(){return this.element.style.display="none",this}show(){return this.element.style.display="",this}visible(){return this.element.style.visibility="visible",this}invisible(){return this.element.style.visibility="hidden",this}setZ(t){return this.element.style.zIndex=t,this}clearAlpha(){return this.element.style.opacity="",this}size(t,e){return void 0!==t&&(void 0===e&&(e=t),"string"==typeof t?("string"!=typeof e&&(e+="px"),this.element.style.width=t,this.element.style.height=e):(this.element.style.width=t+"px",this.element.style.height=e+"px",this.element.style.backgroundSize=t+"px "+e+"px")),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this}mouseEnabled(t){return this.element.style.pointerEvents=t?"auto":"none",this}fontStyle(t,e,s,i){return this.css({fontFamily:t,fontSize:e,color:s,fontStyle:i}),this}bg(t,e,s,i){return t.includes(["data:","."])?this.element.style.backgroundImage="url("+t+")":this.element.style.backgroundColor=t,void 0!==e&&(e="number"==typeof e?e+"px":e,s="number"==typeof s?s+"px":s,this.element.style.backgroundPosition=e+" "+s),i&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=i),"cover"!==e&&"contain"!==e||(this.element.style.backgroundSize=e,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==s?s+" "+i:"center"),this}center(t,e,s){const i={};return void 0===t?(i.left="50%",i.top="50%",i.marginLeft=-this.width/2,i.marginTop=-this.height/2):(t&&(i.left="50%",i.marginLeft=-this.width/2),e&&(i.top="50%",i.marginTop=-this.height/2)),s&&(delete i.left,delete i.top),this.css(i),this}mask(t){return this.element.style[n.vendor("Mask")]=(~t.indexOf(".")?"url("+t+")":t)+" no-repeat",this.element.style[n.vendor("MaskSize")]="contain",this}blendMode(t,e){return this.element.style[e?"background-blend-mode":"mix-blend-mode"]=t,this}css(t,e){if("object"!=typeof t){if(e)return this.element.style[t]=e,this;{let e=this.element.style[t];return"number"!=typeof e&&(~e.indexOf("px")&&(e=Number(e.slice(0,-2))),"opacity"===t&&(e=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),e||(e=0),e}}for(let e in t){let s=t[e];"string"!=typeof s&&"number"!=typeof s||("string"!=typeof s&&"opacity"!==e&&"zIndex"!==e&&(s+="px"),this.element.style[e]=s)}return this}transform(t){if(t)for(let e in t)"number"==typeof t[e]&&(this[e]=t[e]);else t=this;return this.element.style[n.vendor("Transform")]=a.parseTransform(t),this}willChange(t){if("boolean"==typeof t)this.willChangeLock=t;else if(this.willChangeLock)return;const e="string"==typeof t;this.element.style["will-change"]=t?e?t:n.transformProperty+", opacity":""}backfaceVisibility(t){this.element.style[n.vendor("BackfaceVisibility")]=t?"visible":"hidden"}enable3D(t,e,s){return this.element.style[n.vendor("TransformStyle")]="preserve-3d",t&&(this.element.style[n.vendor("Perspective")]=t+"px"),void 0!==e&&(e="number"==typeof e?e+"px":e,s="number"==typeof s?s+"px":s,this.element.style[n.vendor("PerspectiveOrigin")]=e+" "+s),this}disable3D(){return this.element.style[n.vendor("TransformStyle")]="",this.element.style[n.vendor("Perspective")]="",this}transformPoint(t,e,s){let i="";return void 0!==t&&(i+="number"==typeof t?t+"px ":t+" "),void 0!==e&&(i+="number"==typeof e?e+"px ":e+" "),void 0!==s&&(i+="number"==typeof s?s+"px":s),this.element.style[n.vendor("TransformOrigin")]=i,this}tween(t,e,s,i,n){"number"!=typeof i&&(n=i,i=0);let r=null;"undefined"!=typeof Promise&&(r=Promise.create(),n&&r.then(n),n=r.resolve);const o=new h(this,t,e,s,i,n);return r||o}clearTransform(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style[n.transformProperty]="",this}clearTween(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}attr(t,e){return void 0===e?this.element.getAttribute(t):(""===e?this.element.removeAttribute(t):this.element.setAttribute(t,e),this)}convertTouchEvent(t){const e={};return e.x=0,e.y=0,t?(t.touches||t.changedTouches?t.touches.length?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):(e.x=t.changedTouches[0].pageX,e.y=t.changedTouches[0].pageY):(e.x=t.pageX,e.y=t.pageY),e):e}click(t){return this.element.addEventListener("click",e=>{if(!this.element)return!1;e.object="hit"===this.element.className?this.parent:this,e.action="click",t&&t(e)},!0),this.element.style.cursor="pointer",this}hover(t){const e=e=>{if(!this.element)return!1;e.object="hit"===this.element.className?this.parent:this,e.action="mouseout"===e.type?"out":"over",t&&t(e)};return this.element.addEventListener("mouseover",e,!0),this.element.addEventListener("mouseout",e,!0),this}press(t){const e=e=>{if(!this.element)return!1;e.object="hit"===this.element.className?this.parent:this,e.action="mousedown"===e.type?"down":"up",t&&t(e)};return this.element.addEventListener("mousedown",e,!0),this.element.addEventListener("mouseup",e,!0),this}bind(t,e){"touchstart"!==t||n.mobile?"touchmove"!==t||n.mobile?"touchend"!==t||n.mobile||(t="mouseup"):t="mousemove":t="mousedown",this.events["bind_"+t]||(this.events["bind_"+t]=[]);const s=this.events["bind_"+t];s.push({target:this.element,callback:e});const i=t=>{const e=this.convertTouchEvent(t);t.x=e.x,t.y=e.y,s.forEach(e=>{e.target===t.currentTarget&&e.callback(t)})};return this.events["fn_"+t]||(this.events["fn_"+t]=i,this.element.addEventListener(t,i,!0)),this}unbind(t,e){"touchstart"!==t||n.mobile?"touchmove"!==t||n.mobile?"touchend"!==t||n.mobile||(t="mouseup"):t="mousemove":t="mousedown";const s=this.events["bind_"+t];return s?(s.forEach((t,i)=>{t.callback===e&&s.splice(i,1)}),this.events["fn_"+t]&&!s.length&&(this.element.removeEventListener(t,this.events["fn_"+t],!0),this.events["fn_"+t]=null),this):this}interact(t,e){return this.hit=this.create(".hit"),this.hit.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}),n.mobile?this.hit.touchClick(t,e):this.hit.hover(t).click(e),this}touchClick(t,e){const s={};let i,n,r;const o=t=>{const e=this.convertTouchEvent(t);t.touchX=e.x,t.touchY=e.y,s.x=t.touchX,s.y=t.touchY};return this.element.addEventListener("touchmove",t=>{if(!this.element)return!1;r=this.convertTouchEvent(t),n=((t,e)=>{const s=e.x-t.x,i=e.y-t.y;return Math.sqrt(s*s+i*i)})(s,r)>5},{passive:!0}),this.element.addEventListener("touchstart",e=>{if(!this.element)return!1;i=performance.now(),e.object="hit"===this.element.className?this.parent:this,e.action="over",o(e),t&&!n&&t(e)},{passive:!0}),this.element.addEventListener("touchend",s=>{if(!this.element)return!1;const r=performance.now();s.object="hit"===this.element.className?this.parent:this,o(s),i&&r-i<750&&e&&!n&&(s.action="click",e(s)),t&&(s.action="out",t(s)),n=!1},{passive:!0}),this}split(t=""){const e={position:"relative",display:"block",width:"auto",height:"auto",margin:0,padding:0,cssFloat:"left"},s=[],i=this.text().split(t);this.empty();for(let n=0;n<i.length;n++)" "===i[n]&&(i[n]="&nbsp;"),s.push(this.create(".t","span").html(i[n]).css(e)),""!==t&&n<i.length-1&&s.push(this.create(".t","span").html(t).css(e));return s}}const c=new class extends l{constructor(){function t(){e.size(),e.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait"}super("Stage");const e=this;let i;e.css({overflow:"hidden"}),window.addEventListener("focus",()=>{"focus"!==i&&(i="focus",e.events.fire(s.VISIBILITY,{type:"focus"}))},!0),window.addEventListener("blur",()=>{"blur"!==i&&(i="blur",e.events.fire(s.VISIBILITY,{type:"blur"}))},!0),window.addEventListener("keydown",()=>e.events.fire(s.KEYBOARD_DOWN),!0),window.addEventListener("keyup",()=>e.events.fire(s.KEYBOARD_UP),!0),window.addEventListener("keypress",()=>e.events.fire(s.KEYBOARD_PRESS),!0),window.addEventListener("resize",()=>e.events.fire(s.RESIZE),!0),e.events.add(s.RESIZE,t),t()}};class u{constructor(){this.events=new s,this.classes=[],this.timers=[],this.loops=[]}initClass(t,...e){const s=new t(...e);return this.add(s),s}add(t){return t.destroy&&(this.classes.push(t),t.parent=this),this}delayedCall(t,e=0,...s){const i=setTimeout(()=>{t&&t(...s)},e);return this.timers.push(i),this.timers.length>50&&this.timers.shift(),i}clearTimers(){for(let t=this.timers.length-1;t>=0;t--)clearTimeout(this.timers[t]);this.timers.length=0}startRender(t,e){this.loops.push(t),i.start(t,e)}stopRender(t){this.loops.remove(t),i.stop(t)}clearRenders(){for(let t=this.loops.length-1;t>=0;t--)this.stopRender(this.loops[t]);this.loops.length=0}destroy(){this.removed=!0;const t=this.parent;t&&!t.removed&&t.remove&&t.remove(this);for(let t=this.classes.length-1;t>=0;t--){const e=this.classes[t];e&&e.destroy&&e.destroy()}return this.classes.length=0,this.clearRenders(),this.clearTimers(),this.events.destroy(),e.nullObject(this)}remove(t){this.classes.remove(t)}}class d{constructor(t,e=t,s){this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.object=new l(this.element),this.children=[],this.retina=s,this.size(t,e,s)}size(t,e,s){const i=s?2:1;this.element.width=t*i,this.element.height=e*i,this.width=t,this.height=e,this.scale=i,this.object.size(this.width,this.height),this.context.scale(i,i),this.element.style.width=t+"px",this.element.style.height=e+"px"}toDataURL(t,e){return this.element.toDataURL(t,e)}render(t){"boolean"==typeof t&&t||this.clear();for(let t=0;t<this.children.length;t++)this.children[t].render()}clear(){this.context.clearRect(0,0,this.element.width,this.element.height)}add(t){t.setCanvas(this),t.parent=this,this.children.push(t),t.z=this.children.length}remove(t){t.canvas=null,t.parent=null,this.children.remove(t)}destroy(){for(let t=0;t<this.children.length;t++)this.children[t].destroy();return this.object.destroy(),e.nullObject(this)}getImageData(t=0,e=0,s=this.element.width,i=this.element.height){return this.imageData=this.context.getImageData(t,e,s,i),this.imageData}getPixel(t,e,s){this.imageData&&!s||this.getImageData();const i={},n=4*(t+e*this.element.width),r=this.imageData.data;return i.r=r[n],i.g=r[n+1],i.b=r[n+2],i.a=r[n+3],i}putImageData(t){this.context.putImageData(t,0,0)}}class m{constructor(t){this.styles={},t?this.styled=!1:this.data=new Float32Array(6)}setTRSA(t,e,s,i,n,r){const o=this.data;o[0]=t,o[1]=e,o[2]=s,o[3]=i,o[4]=n,o[5]=r}calculate(t){const e=t.data,s=this.data;s[0]=s[0]+e[0],s[1]=s[1]+e[1],s[2]=s[2]+e[2],s[3]=s[3]*e[3],s[4]=s[4]*e[4],s[5]=s[5]*e[5]}calculateStyle(t){if(!t.styled)return!1;this.styled=!0;const e=t.values;for(let t in e)this.styles[t]||(this.styles[t]=e[t])}set shadowOffsetX(t){this.styled=!0,this.styles.shadowOffsetX=t}get shadowOffsetX(){return this.styles.shadowOffsetX}set shadowOffsetY(t){this.styled=!0,this.styles.shadowOffsetY=t}get shadowOffsetY(){return this.styles.shadowOffsetY}set shadowBlur(t){this.styled=!0,this.styles.shadowBlur=t}get shadowBlur(){return this.styles.shadowBlur}set shadowColor(t){this.styled=!0,this.styles.shadowColor=t}get shadowColor(){return this.styles.shadowColor}get values(){return this.styles}}class p{constructor(){this.visible=!0,this.blendMode="source-over",this.x=0,this.y=0,this.px=0,this.py=0,this.clipX=0,this.clipY=0,this.clipWidth=0,this.clipHeight=0,this.width=0,this.height=0,this.rotation=0,this.scale=1,this.opacity=1,this.values=new m,this.styles=new m(!0),this.children=[]}updateValues(){this.values.setTRSA(this.x,this.y,Math.radians(this.rotation),this.scaleX||this.scale,this.scaleY||this.scale,this.opacity),this.parent.values&&this.values.calculate(this.parent.values),this.parent.styles&&this.styles.calculateStyle(this.parent.styles)}render(t){if(!this.visible)return!1;this.updateValues(),this.draw&&this.draw(t);for(let e=0;e<this.children.length;e++)this.children[e].render(t)}startDraw(t,e,s){const i=this.canvas.context,n=this.values.data,r=n[0]+(t||0),o=n[1]+(e||0);if(i.save(),s||(i.globalCompositeOperation=this.blendMode),i.translate(r,o),i.rotate(n[2]),i.scale(n[3],n[4]),i.globalAlpha=n[5],this.styles.styled){const t=this.styles.values;for(let e in t)i[e]=t[e]}}endDraw(){this.canvas.context.restore()}add(t){t.canvas=this.canvas,t.parent=this,this.children.push(t),t.z=this.children.length;for(let t=this.children.length-1;t>-1;t--)this.children[t].setCanvas(this.canvas)}setCanvas(t){this.canvas=t;for(let e=this.children.length-1;e>-1;e--)this.children[e].setCanvas(t)}remove(t){t.canvas=null,t.parent=null,this.children.remove(t)}isMask(){let t=this;for(;t;){if(t.masked)return!0;t=t.parent}return!1}unmask(){this.masked.mask(null),this.masked=null}setZ(t){this.z=t,this.parent.children.sort((t,e)=>t.z-e.z)}follow(t){return this.x=t.x,this.y=t.y,this.px=t.px,this.py=t.py,this.clipX=t.clipX,this.clipY=t.clipY,this.clipWidth=t.clipWidth,this.clipHeight=t.clipHeight,this.width=t.width,this.height=t.height,this.rotation=t.rotation,this.scale=t.scale,this.scaleX=t.scaleX||t.scale,this.scaleY=t.scaleY||t.scale,this}visible(){return this.visible=!0,this}invisible(){return this.visible=!1,this}transform(t){for(let e in t)"number"==typeof t[e]&&(this[e]=t[e]);return this}transformPoint(t,e){return this.px="number"==typeof t?t:this.width*(parseFloat(t)/100),this.py="number"==typeof e?e:this.height*(parseFloat(e)/100),this}clip(t,e,s,i){return this.clipX=t,this.clipY=e,this.clipWidth=s,this.clipHeight=i,this}destroy(){for(let t=0;t<this.children.length;t++)this.children[t].destroy();return e.nullObject(this)}}class f extends p{constructor(t=0,s=t){super();const i=this;this.width=t,this.height=s,this.props={};let n,r=[];this.draw=(t=>{if(this.isMask()&&!t)return!1;const e=this.canvas.context;this.startDraw(this.px,this.py,t),function(t){for(let e in i.props)t[e]=i.props[e]}(e),this.clipWidth&&this.clipHeight&&(e.beginPath(),e.rect(this.clipX,this.clipY,this.clipWidth,this.clipHeight),e.clip());for(let t=0;t<r.length;t++){const s=r[t];if(!s)continue;const i=s.shift();e[i].apply(e,s),s.unshift(i)}this.endDraw(),n&&(e.globalCompositeOperation=n.blendMode,n.render(!0))}),this.clear=(()=>{for(let t=0;t<r.length;t++)r[t].length=0;r.length=0}),this.arc=((t=0,e=0,s=0,i=this.radius||this.width/2,n=0,o=!1)=>{t&&!e&&(s=t,t=0,e=0),s-=90,n-=90,r.push(["beginPath"]),r.push(["arc",t,e,i,Math.radians(n),Math.radians(s),o])}),this.quadraticCurveTo=((t,e,s,i)=>{r.push(["quadraticCurveTo",t,e,s,i])}),this.bezierCurveTo=((t,e,s,i,n,o)=>{r.push(["bezierCurveTo",t,e,s,i,n,o])}),this.fillRect=((t,e,s,i)=>{r.push(["fillRect",t,e,s,i])}),this.clearRect=((t,e,s,i)=>{r.push(["clearRect",t,e,s,i])}),this.strokeRect=((t,e,s,i)=>{r.push(["strokeRect",t,e,s,i])}),this.moveTo=((t,e)=>{r.push(["moveTo",t,e])}),this.lineTo=((t,e)=>{r.push(["lineTo",t,e])}),this.stroke=(()=>{r.push(["stroke"])}),this.fill=(()=>{n||r.push(["fill"])}),this.beginPath=(()=>{r.push(["beginPath"])}),this.closePath=(()=>{r.push(["closePath"])}),this.fillText=((t,e,s)=>{r.push(["fillText",t,e,s])}),this.strokeText=((t,e,s)=>{r.push(["strokeText",t,e,s])}),this.setLineDash=(t=>{r.push(["setLineDash",t])}),this.drawImage=((t,e=0,s=0,i=t.width,n=t.height,o=0,a=0,h=t.width,l=t.height)=>{r.push(["drawImage",t,e,s,i,n,o+-this.px,a+-this.py,h,l])}),this.mask=(t=>{if(!t)return n=null;n=t,t.masked=this;for(let t=0;t<r.length;t++)"fill"!==r[t][0]&&"stroke"!==r[t][0]||(r[t].length=0,r.splice(t,1))}),this.clone=(()=>{const t=new f(this.width,this.height);return t.visible=this.visible,t.blendMode=this.blendMode,t.opacity=this.opacity,t.follow(this),t.props=e.cloneObject(this.props),t.setDraw(e.cloneArray(r)),t}),this.setDraw=(t=>{r=t})}set strokeStyle(t){this.props.strokeStyle=t}get strokeStyle(){return this.props.strokeStyle}set fillStyle(t){this.props.fillStyle=t}get fillStyle(){return this.props.fillStyle}set lineWidth(t){this.props.lineWidth=t}get lineWidth(){return this.props.lineWidth}set lineCap(t){this.props.lineCap=t}get lineCap(){return this.props.lineCap}set lineDashOffset(t){this.props.lineDashOffset=t}get lineDashOffset(){return this.props.lineDashOffset}set lineJoin(t){this.props.lineJoin=t}get lineJoin(){return this.props.lineJoin}set miterLimit(t){this.props.miterLimit=t}get miterLimit(){return this.props.miterLimit}set font(t){this.props.font=t}get font(){return this.props.font}set textAlign(t){this.props.textAlign=t}get textAlign(){return this.props.textAlign}set textBaseline(t){this.props.textBaseline=t}get textBaseline(){return this.props.textBaseline}}const y=new class{constructor(){function t(t,e,s,i,n,r,o,a){const h=t.context,l=new f(e,s);l.font=n,l.fillStyle=r,l.totalWidth=0,l.totalHeight=s;const c=i.split("");let u,d=0,m=0;h.font=n;for(let t=0;t<c.length;t++)l.totalWidth+=h.measureText(c[t]).width+o;switch(a){case"start":case"left":m=0;break;case"end":case"right":m=e-l.totalWidth;break;case"center":m=(e-l.totalWidth)/2}do{u=c[d++],l.fillText(u,m,0),m+=h.measureText(u).width+o}while(d<i.length);return l}this.createText=((e,s,i,n,r,o,{letterSpacing:a=0,lineHeight:h=i,textAlign:l="start"})=>{const c=e.context;if(i===h)return t(e,s,i,n,r,o,a,l);{const u=new f(s,i),d=n.split(" "),m=[];let p="";u.totalWidth=0,u.totalHeight=0,c.font=r;for(let t=0;t<d.length;t++){const e=p+d[t]+" ",i=e.split("");let n=0;for(let t=0;t<i.length;t++)n+=c.measureText(i[t]).width+a;n>s&&t>0?(m.push(p),p=d[t]+" "):p=e}return m.push(p),m.every((i,n)=>{const c=t(e,s,h,i,r,o,a,l);return c.y=n*h,u.add(c),u.totalWidth=Math.max(c.totalWidth,u.totalWidth),u.totalHeight+=h,!0}),u}})}};class w{constructor(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.type="vector2"}set(t,e){return this.x=t||0,this.y=e||0,this}clear(){return this.x=0,this.y=0,this}copyTo(t){return t.x=this.x,t.y=this.y,this}copyFrom(t){return this.x=t.x||0,this.y=t.y||0,this}lengthSq(){return this.x*this.x+this.y*this.y||1e-5}length(){return Math.sqrt(this.lengthSq())}normalize(){const t=this.length();return this.x/=t,this.y/=t,this}setLength(t){return this.normalize().multiply(t),this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t,this.y/=t,this}perpendicular(){const t=this.x,e=this.y;return this.x=-e,this.y=t,this}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}deltaLerp(t,e,s=1){for(let i=0;i<s;i++)this.lerp(t,e);return this}interp(t,e,s,i=5e3){this.calc||(this.calc=new w),this.calc.subVectors(this,t);const n=r.convertEase(s)(Math.clamp(Math.range(this.calc.lengthSq(),0,i*i,1,0),0,1)*(e/10));return this.lerp(t,n)}setAngleRadius(t,e){return this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this}addAngleRadius(t,e){return this.x+=Math.cos(t)*e,this.y+=Math.sin(t)*e,this}dot(t,e=this){return t.x*e.x+t.y*e.y}clone(){return new w(this.x,this.y)}distanceTo(t,e){const s=this.x-t.x,i=this.y-t.y;return e?s*s+i*i:Math.sqrt(s*s+i*i)}solveAngle(t,e=this){return Math.atan2(t.y-e.y,t.x-e.x)}equals(t){return this.x===t.x&&this.y===t.y}toString(t=" "){return this.x+t+this.y}}class b{constructor(t=c){function n(t){a.isTouching=!0,a.x=t.x,a.y=t.y,a.hold.x=a.last.x=t.x,a.hold.y=a.last.y=t.y,a.delta.x=a.move.x=a.velocity.x=0,a.delta.y=a.move.y=a.velocity.y=0,h=0,a.events.fire(b.START,t),l=u=i.TIME}function r(t){a.isTouching&&(a.move.x=t.x-a.hold.x,a.move.y=t.y-a.hold.y),a.x=t.x,a.y=t.y,a.delta.x=t.x-a.last.x,a.delta.y=t.y-a.last.y,a.last.x=t.x,a.last.y=t.y,h+=a.delta.length();const e=Math.max(.001,i.TIME-(u||i.TIME));u=i.TIME,a.velocity.x=Math.abs(a.delta.x)/e,a.velocity.y=Math.abs(a.delta.y)/e,a.events.fire(b.MOVE,t),a.isTouching&&a.events.fire(b.DRAG,t)}function o(t){if(!a.isTouching)return;a.isTouching=!1,a.move.x=0,a.move.y=0;Math.max(.001,i.TIME-(u||i.TIME))>100&&(a.delta.x=0,a.delta.y=0),a.events.fire(b.END,t),h<20&&i.TIME-l<2e3&&a.events.fire(b.CLICK,t)}if(!b.instance){b.CLICK="interaction_click",b.START="interaction_start",b.MOVE="interaction_move",b.DRAG="interaction_drag",b.END="interaction_end";const t={touchstart:[],touchmove:[],touchend:[]},e=e=>t.touchend.forEach(t=>t(e));b.bind=((e,s)=>t[e].push(s)),b.unbind=((e,s)=>t[e].remove(s)),c.bind("touchstart",e=>t.touchstart.forEach(t=>t(e))),c.bind("touchmove",e=>t.touchmove.forEach(t=>t(e))),c.bind("touchend",e),c.bind("touchcancel",e),c.bind("contextmenu",e),b.instance=this}const a=this;this.events=new s,this.x=0,this.y=0,this.hold=new w,this.last=new w,this.delta=new w,this.move=new w,this.velocity=new w;let h,l,u;t===c?b.bind("touchstart",n):t.bind("touchstart",n),b.bind("touchmove",r),b.bind("touchend",o),this.destroy=(()=>(b.unbind("touchstart",n),b.unbind("touchmove",r),b.unbind("touchend",o),t!==c&&t.unbind&&t.unbind("touchstart",n),this.events.destroy(),e.nullObject(this)))}}const g=new class{constructor(){function t(t){e.x=t.x,e.y=t.y,e.normal.x=t.x/c.width,e.normal.y=t.y/c.height,e.tilt.x=2*e.normal.x-1,e.tilt.y=1-2*e.normal.y,e.inverseNormal.x=e.normal.x,e.inverseNormal.y=1-e.normal.y}const e=this;this.x=0,this.y=0,this.normal={x:0,y:0},this.tilt={x:0,y:0},this.inverseNormal={x:0,y:0},this.init=(()=>{this.input=new b,this.input.events.add(b.START,t),this.input.events.add(b.MOVE,t),t({x:c.width/2,y:c.height/2})})}},v=new class{constructor(){function t(t){switch(window.orientation){case 0:s.x=-t.accelerationIncludingGravity.x,s.y=t.accelerationIncludingGravity.y,s.z=t.accelerationIncludingGravity.z,t.rotationRate&&(s.rotationRate.alpha=t.rotationRate.beta*s.toRadians,s.rotationRate.beta=-t.rotationRate.alpha*s.toRadians,s.rotationRate.gamma=t.rotationRate.gamma*s.toRadians);break;case 180:s.x=t.accelerationIncludingGravity.x,s.y=-t.accelerationIncludingGravity.y,s.z=t.accelerationIncludingGravity.z,t.rotationRate&&(s.rotationRate.alpha=-t.rotationRate.beta*s.toRadians,s.rotationRate.beta=t.rotationRate.alpha*s.toRadians,s.rotationRate.gamma=t.rotationRate.gamma*s.toRadians);break;case 90:s.x=t.accelerationIncludingGravity.y,s.y=t.accelerationIncludingGravity.x,s.z=t.accelerationIncludingGravity.z,t.rotationRate&&(s.rotationRate.alpha=t.rotationRate.alpha*s.toRadians,s.rotationRate.beta=t.rotationRate.beta*s.toRadians,s.rotationRate.gamma=t.rotationRate.gamma*s.toRadians);break;case-90:s.x=-t.accelerationIncludingGravity.y,s.y=-t.accelerationIncludingGravity.x,s.z=t.accelerationIncludingGravity.z,t.rotationRate&&(s.rotationRate.alpha=-t.rotationRate.alpha*s.toRadians,s.rotationRate.beta=-t.rotationRate.beta*s.toRadians,s.rotationRate.gamma=t.rotationRate.gamma*s.toRadians)}}function e(t){for(let e in t)~e.toLowerCase().indexOf("heading")&&(s.heading=t[e]);switch(window.orientation){case 0:s.alpha=t.beta*s.toRadians,s.beta=-t.alpha*s.toRadians,s.gamma=t.gamma*s.toRadians;break;case 180:s.alpha=-t.beta*s.toRadians,s.beta=t.alpha*s.toRadians,s.gamma=t.gamma*s.toRadians;break;case 90:s.alpha=t.alpha*s.toRadians,s.beta=t.beta*s.toRadians,s.gamma=t.gamma*s.toRadians;break;case-90:s.alpha=-t.alpha*s.toRadians,s.beta=-t.beta*s.toRadians,s.gamma=t.gamma*s.toRadians}s.tilt=t.beta*s.toRadians,s.yaw=t.alpha*s.toRadians,s.roll=-t.gamma*s.toRadians,"Android"===n.os&&(s.heading=function(t,e,s){const i=Math.PI/180,n=e?e*i:0,r=s?s*i:0,o=t?t*i:0,a=Math.cos(r),h=Math.cos(o),l=Math.sin(n),c=Math.sin(r),u=Math.sin(o),d=-h*c-u*l*a,m=-u*c+h*l*a;let p=Math.atan(d/m);m<0?p+=Math.PI:d<0&&(p+=2*Math.PI);return p*(180/Math.PI)}(t.alpha,t.beta,t.gamma))}const s=this;this.x=0,this.y=0,this.z=0,this.alpha=0,this.beta=0,this.gamma=0,this.heading=0,this.rotationRate={},this.rotationRate.alpha=0,this.rotationRate.beta=0,this.rotationRate.gamma=0,this.toRadians="iOS"===n.os?Math.PI/180:1,this.init=(()=>{window.addEventListener("devicemotion",t,!0),window.addEventListener("deviceorientation",e,!0)})}},x=new class{constructor(){this.CORS=null}createImg(t,e){const s=new Image;return s.crossOrigin=this.CORS,s.src=t,s.onload=e,s.onerror=e,s}promise(t){"string"==typeof t&&(t=this.createImg(t));const e=Promise.create();return t.onload=e.resolve,t.onerror=e.resolve,e}};class E{constructor(t,i){function n(){r.events.fire(s.PROGRESS,{percent:++a/o}),a===o&&(r.events.fire(s.COMPLETE),i&&i())}Array.isArray(t)&&(t=t.map(t=>e.basename(t)).reduce((e,s,i)=>(e[s]=t[i],e),{}));const r=this;this.events=new s,this.CDN=Config.CDN||"";const o=Object.keys(t).length;let a=0;for(let s in t)!function(t,s){const i=e.extension(s);if(!i.includes(["jpg","jpeg","png","gif","svg"]))return i.includes(["mp3","m4a","ogg","wav","aif"])?window.AudioContext&&window.WebAudio?void window.fetch(s).then(e=>{if(!e.ok)return n();e.arrayBuffer().then(e=>window.WebAudio.createSound(t,e,n))}).catch(()=>{n()}):n():void window.get(s).then(t=>{"js"===i?window.eval(t.replace("use strict","")):i.includes(["fs","vs","glsl"])&&window.Shaders&&window.Shaders.parse(t,s),n()}).catch(()=>{n()});x.createImg(s,n)}(s,this.CDN+t[s])}static loadAssets(t,e){const s=Promise.create();return e||(e=s.resolve),s.loader=new E(t,e),s}}class R{constructor(t,e){const i=this;this.events=new s;let n;!function(){Array.isArray(t)||(t=[t]),n=c.create("FontLoader");for(let e=0;e<t.length;e++)n.create("font").fontStyle(t[e],12,"#000").text("LOAD").css({top:-999})}(),setTimeout(()=>{n.destroy(),i.complete=!0,i.events.fire(s.COMPLETE),e&&e()},500)}static loadFonts(t,e){const s=Promise.create();return e||(e=s.resolve),s.loader=new R(t,e),s}}class T extends u{constructor(t){function e(){if(!o.element)return o.stopRender(e);o.duration=o.element.duration,o.time=o.element.currentTime,o.element.currentTime===h?++m>30&&!c&&(c=!0,o.events.fire(s.ERROR)):(m=0,c&&(o.events.fire(s.READY),c=!1)),h=o.element.currentTime,o.element.currentTime>=(o.duration||o.element.duration)-.001&&(o.loop||(d||o.stopRender(e),o.events.fire(s.COMPLETE))),a.time=o.element.currentTime,a.duration=o.element.duration,a.loaded=o.loaded,o.events.fire(s.UPDATE,a)}function i(){if(!o.element)return!1;if(u){const t=o.element.seekable;let e=-1;if(t){for(let s=0;s<t.length;s++)t.start(s)<u&&(e=t.end(s)-.5);e>=u&&(o.buffered=!0)}else o.buffered=!0}else o.buffered=o.element.readyState===o.element.HAVE_ENOUGH_DATA;o.buffered&&(o.stopRender(i),o.events.fire(s.READY))}function r(){if(!o.ready())return;const t=o.element.buffered,e=o.element.currentTime;let i=0;for(;!(t.start(i)<=e&&e<=t.end(i));)i+=1;o.loaded.start=t.start(i)/o.element.duration,o.loaded.end=t.end(i)/o.element.duration,o.loaded.percent=o.loaded.end-o.loaded.start,o.events.fire(s.PROGRESS,o.loaded)}super();const o=this;this.CDN=Config.CDN||"",this.loaded={start:0,end:0,percent:0};const a={};let h,c,u,d,m=0;!function(){let e=t.src;e&&(e=o.CDN+t.src),o.element=document.createElement("video"),e&&(o.element.src=e),o.element.controls=t.controls,o.element.id=t.id||"",o.element.width=t.width,o.element.height=t.height,o.element.loop=t.loop,o.object=new l(o.element),o.width=t.width,o.height=t.height,o.object.size(o.width,o.height),n.mobile&&(o.object.attr("webkit-playsinline",!0),o.object.attr("playsinline",!0))}(),!1!==t.preload&&(o.element.preload="auto",o.element.load()),this.play=(()=>{this.playing=!0,this.element.play(),this.startRender(e)}),this.pause=(()=>{this.playing=!1,this.element.pause(),this.stopRender(e)}),this.stop=(()=>{this.playing=!1,this.element.pause(),this.stopRender(e),this.ready()&&(this.element.currentTime=0)}),this.volume=(t=>{this.element.volume=t,this.muted&&(this.muted=!1,this.object.attr("muted",""))}),this.mute=(()=>{this.volume(0),this.muted=!0,this.object.attr("muted",!0)}),this.seek=(t=>{this.element.readyState<=1?this.delayedCall(()=>{this.seek&&this.seek(t)},32):this.element.currentTime=t}),this.canPlayTo=(t=>(u=null,t&&(u=t),this.buffered||this.startRender(i),this.buffered)),this.ready=(()=>this.element.readyState>=2),this.size=((t,e)=>{this.element.width=this.width=t,this.element.height=this.height=e,this.object.size(this.width,this.height)}),this.forceRender=(()=>{d=!0,this.startRender(e)}),this.trackProgress=(()=>{this.element.addEventListener("progress",r,!0)}),this.destroy=(()=>(this.stop(),this.element.src="",this.object.destroy(),super.destroy()))}set loop(t){this.element.loop=t}get loop(){return this.element.loop}set src(t){this.element.src=this.CDN+t}get src(){return this.element.src}}class O{constructor(t,s,i){function n(){a=new l(t,"svg",s),"circle"===s?["cx","cy","r"].forEach(t=>{i.stroke&&"r"===t?a.element.setAttributeNS(null,t,i.width/2-i.stroke):a.element.setAttributeNS(null,t,i.width/2)}):"radialGradient"===s&&(["cx","cy","r","fx","fy","name"].forEach(t=>{a.element.setAttributeNS(null,"name"===t?"id":t,i[t])}),a.element.setAttributeNS(null,"gradientUnits","userSpaceOnUse")),o.object=a}function r(){n(),i.colors.forEach(t=>{a.element.appendChild(function(t){const e=document.createElementNS("http://www.w3.org/2000/svg","stop");return["offset","style"].forEach(s=>{e.setAttributeNS(null,s,"style"===s?"stop-color:"+t[s]:t[s])}),e}(t))})}const o=this;let a;!function(){switch(s){case"svg":(a=new l(t,"svg")).element.setAttribute("preserveAspectRatio","xMinYMid meet"),a.element.setAttribute("version","1.1"),a.element.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.width&&(a.element.setAttribute("viewBox","0 0 "+i.width+" "+i.height),a.element.style.width=i.width+"px",a.element.style.height=i.height+"px"),o.object=a;break;case"radialGradient":case"linearGradient":r();break;default:n()}}(),this.addTo=(t=>{t.points?t=t.points:t.element?t=t.element:t.object&&(t=t.object.element),t.appendChild(a.element)}),this.destroy=(()=>(this.object.destroy(),e.nullObject(this)))}}const k=new class{set(t,e){null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),null===e?window.localStorage.removeItem(t):window.localStorage[t]=e}get(t){let e=window.localStorage[t];if(e){let t;e.charAt&&(t=e.charAt(0)),"{"!==t&&"["!==t||(e=JSON.parse(e)),"true"!==e&&"false"!==e||(e="true"===e)}return e}};window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext||window.oAudioContext);const I=new class{constructor(){const t={};let e;this.init=(()=>{window.AudioContext&&(e=new AudioContext),e&&(this.globalGain=e.createGain(),this.globalGain.connect(e.destination))}),this.createSound=((s,i,n)=>{const r={};e.decodeAudioData(i,t=>{r.buffer=t,r.audioGain=e.createGain(),r.audioGain.connect(this.globalGain),r.complete=!0,n&&n()}),t[s]=r}),this.getSound=(e=>t[e]),this.trigger=(t=>{if(!e)return;const s=this.getSound(t),i=e.createBufferSource();i.buffer=s.buffer,i.connect(s.audioGain),i.loop=!!s.loop,i.start(0)}),this.mute=(()=>{e&&a.tween(this.globalGain.gain,{value:0},300,"easeOutSine")}),this.unmute=(()=>{e&&a.tween(this.globalGain.gain,{value:1},500,"easeOutSine")}),window.WebAudio=this}};class M{constructor(){this.first=null,this.last=null,this.current=null,this.prev=null;const t=[];this.push=(e=>{const s=function(e){return t[t.push({object:e,prev:null,next:null})-1]}(e);this.first?(s.next=this.first,s.prev=this.last,this.last.next=s,this.last=s):s.next=s.prev=this.last=this.first=s}),this.remove=(e=>{const s=function(e){for(let s=0;s<t.length;s++)if(t[s].object===e)return t[s];return null}(e);s&&s.next&&(t.length<=1?this.empty():s===this.first?(this.first=s.next,this.last.next=this.first,this.first.prev=this.last):s==this.last?(this.last=s.prev,this.last.next=this.first,this.first.prev=this.last):(s.prev.next=s.next,s.next.prev=s.prev),function(e){for(let s=t.length-1;s>-1;s--)if(t[s].object===e){t[s]=null,t.splice(s,1);break}}(e))}),this.empty=(()=>{this.first=null,this.last=null,this.current=null,this.prev=null}),this.start=(()=>(this.current=this.first,this.prev=this.current,this.current)),this.next=(()=>{if(this.current&&1!==t.length&&this.prev.next!==this.first)return this.current=this.current.next,this.prev=this.current,this.current}),this.destroy=function(){for(let e=t.length-1;e>-1;e--)t[e]=null,t.splice(e,1);return e.nullObject(this)}}}class S{constructor(t,s){const i=[];if(this.array=i,t){s=s||10;for(let e=0;e<s;e++)i.push(new t)}this.get=(()=>i.shift()||(t?new t:null)),this.empty=(()=>{i.length=0}),this.put=(t=>{t&&i.push(t)}),this.insert=(t=>{void 0===t.push&&(t=[t]);for(let e=0;e<t.length;e++)i.push(t[e])}),this.length=(()=>i.length),this.destroy=(()=>{for(let t=0;t<i.length;t++)i[t].destroy&&i[t].destroy();return e.nullObject(this)})}}class A{constructor(t,e,s,i){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof s?s:0,this.w="number"==typeof i?i:1,this.type="vector3"}set(t,e,s,i){return this.x=t||0,this.y=e||0,this.z=s||0,this.w=i||1,this}clear(){return this.x=0,this.y=0,this.z=0,this.w=1,this}copyTo(t){return t.x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,t}copyFrom(t){return this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||1,this}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.lengthSq())}normalize(){const t=1/this.length();return this.set(this.x*t,this.y*t,this.z*t),this}setLength(t){return this.normalize().multiply(t),this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}multiply(t){return this.x*=t,this.y*=t,this.z*=t,this}divide(t){return this.x/=t,this.y/=t,this.z/=t,this}limit(t){this.length()>t&&(this.normalize(),this.multiply(t))}heading2D(){return-Math.atan2(-this.y,this.x)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}deltaLerp(t,e,s=1){for(let i=0;i<s;i++)this.lerp(t,e);return this}interp(t,e,s,i=5e3){this.calc||(this.calc=new A),this.calc.subVectors(this,t);const n=r.convertEase(s)(Math.clamp(Math.range(this.calc.lengthSq(),0,i*i,1,0),0,1)*(e/10));return this.lerp(t,n)}setAngleRadius(t,e){return this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this.z=Math.sin(t)*e,this}addAngleRadius(t,e){return this.x+=Math.cos(t)*e,this.y+=Math.sin(t)*e,this.z+=Math.sin(t)*e,this}applyQuaternion(t){const e=this.x,s=this.y,i=this.z,n=t.x,r=t.y,o=t.z,a=t.w,h=a*e+r*i-o*s,l=a*s+o*e-n*i,c=a*i+n*s-r*e,u=-n*e-r*s-o*i;return this.x=h*a+u*-n+l*-o-c*-r,this.y=l*a+u*-r+c*-n-h*-o,this.z=c*a+u*-o+h*-r-l*-n,this}dot(t,e=this){return t.x*e.x+t.y*e.y+t.z*e.z}clone(){return new A(this.x,this.y,this.z)}cross(t,e=this){const s=t.y*e.z-t.z*e.y,i=t.z*e.x-t.x*e.z,n=t.x*e.y-t.y*e.x;return this.set(s,i,n,this.w),this}distanceTo(t,e){const s=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e?s*s+i*i+n*n:Math.sqrt(s*s+i*i+n*n)}solveAngle(t,e=this){return Math.acos(t.dot(e)/(t.length()*e.length()||1e-5))}solveAngle2D(t,e=this){const s=new w,i=new w;return s.copyFrom(t),i.copyFrom(e),s.solveAngle(i)}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}toString(t=" "){return this.x+t+this.y+t+this.z}}const C=new class{constructor(){this.PATH="";const t={};let e,s,i;this.decompose=((t,e)=>{t.matrixWorld.decompose(e.position,e.quaternion,e.scale)}),this.createDebug=((t=40,e)=>{const s=new THREE.IcosahedronGeometry(t,1),i=e?new THREE.MeshBasicMaterial({color:e}):new THREE.MeshNormalMaterial;return new THREE.Mesh(s,i)}),this.createRT=((t,e)=>{const s={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1};return new THREE.WebGLRenderTarget(t,e,s)}),this.getTexture=(e=>{if(!t[e]){const s=x.createImg(this.PATH+e),i=new THREE.Texture(s);s.onload=(()=>{i.needsUpdate=!0,i.onload&&(i.onload(),i.onload=null),THREE.Math.isPowerOfTwo(s.width*s.height)||(i.minFilter=THREE.LinearFilter)}),t[e]=i}return t[e]}),this.setInfinity=(t=>{const e=Number.POSITIVE_INFINITY;return t.set(e,e,e),t}),this.freezeMatrix=(t=>{t.matrixAutoUpdate=!1,t.updateMatrix()}),this.getCubemap=(e=>{const s="cube_"+(Array.isArray(e)?e[0]:e);if(!t[s]){const i=[];for(let n=0;n<6;n++){const r=x.createImg(this.PATH+(Array.isArray(e)?e[n]:e));i.push(r),r.onload=(()=>{t[s].needsUpdate=!0})}t[s]=new THREE.Texture,t[s].image=i,t[s].minFilter=THREE.LinearFilter}return t[s]}),this.loadObject=(t=>(e||(e=new THREE.ObjectLoader),e.parse(t))),this.loadGeometry=(t=>(s||(s=new THREE.JSONLoader),i||(i=new THREE.BufferGeometryLoader),"BufferGeometry"===t.type?i.parse(t):s.parse(t.data).geometry)),this.disposeAllTextures=(()=>{for(let e in t)t[e].dispose()}),this.loadBufferGeometry=(t=>{const e=new THREE.BufferGeometry;return t.data&&(t=t.data),e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(t.position),3)),e.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.normal||t.position.length),3)),e.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(t.uv||t.position.length/3*2),2)),e}),this.loadSkinnedGeometry=(t=>{const e=new THREE.BufferGeometry;return e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(t.position),3)),e.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.normal),3)),e.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(t.uv),2)),e.addAttribute("skinIndex",new THREE.BufferAttribute(new Float32Array(t.skinIndices),4)),e.addAttribute("skinWeight",new THREE.BufferAttribute(new Float32Array(t.skinWeights),4)),e.bones=t.bones,e}),this.loadCurve=(t=>{const e=[];for(let s=0;s<t.length;s+=3)e.push(new THREE.Vector3(t[s+0],t[s+1],t[s+2]));return new THREE.CatmullRomCurve3(e)}),this.setLightCamera=((t,e,s,i,n)=>{t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.top=e,t.shadow.camera.bottom=-e,t.castShadow=!0,s&&(t.shadow.camera.near=s),i&&(t.shadow.camera.far=i),n&&(t.shadow.mapSize.width=t.shadow.mapSize.height=n),t.shadow.camera.updateProjectionMatrix()}),this.getRepeatTexture=(t=>{const e=this.getTexture(t);return e.onload=(()=>{e.wrapS=e.wrapT=THREE.RepeatWrapping}),e})}};class z{constructor(t){function s(t,e){return t.distance-e.distance}function i(t,e,s,n){if(!1===t.visible)return;let r=t.parent;for(;r;){if(!1===r.visible)return;r=r.parent}if(t.raycast(e,s),!0===n){const n=t.children;for(let t=0,r=n.length;t<r;t++)i(n[t],e,s,!0)}}function n(t){Array.isArray(t)||(t=[t]);const e=[];return t.forEach(t=>i(t,o,e,!1)),e.sort(s),a&&function(){const t=a.geometry.vertices;t[0].copy(o.ray.origin.clone()),t[1].copy(o.ray.origin.clone().add(o.ray.direction.clone().multiplyScalar(1e4))),a.geometry.verticesNeedUpdate=!0}(),e}this.camera=t;const r=new THREE.Vector2,o=new THREE.Raycaster;let a;this.pointsThreshold=(t=>{o.params.Points.threshold=t}),this.debug=(t=>{const e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(-100,0,0)),e.vertices.push(new THREE.Vector3(100,0,0));const s=new THREE.LineBasicMaterial({color:255});a=new THREE.Line(e,s),t.add(a)}),this.checkHit=((e,s=g)=>{const i=this.rect||c;return s===g&&i===c?r.copy(g.tilt):(r.x=s.x/i.width*2-1,r.y=-s.y/i.height*2+1),o.setFromCamera(r,t),n(e)}),this.checkFromValues=((t,e,s)=>(o.set(e,s,0,Number.POSITIVE_INFINITY),n(t))),this.destroy=(()=>e.nullObject(this))}}class L{constructor(t){function n(){if(!l.enabled)return;const t=r();t?(m=t.object).time=i.TIME:m=null}function r(){if(!l.enabled)return;const t=l.ray.checkHit(l.meshes)[0];if(t){const e=t.object;return e!==d&&(d&&a("out",d),a("over",d=e),c.css("cursor","pointer")),t}return d&&(a("out",d),d=null,c.css("cursor",l.cursor)),!1}function o(){if(!l.enabled)return;if(!m)return;const t=l.ray.checkHit(l.meshes)[0];t&&t.object===m&&function(t){u.action="click",u.mesh=t,l.events.fire(L.CLICK,u);const e=l.meshes.indexOf(m);l.meshCallbacks[e].clickCallback&&l.meshCallbacks[e].clickCallback(u)}(m),m=null}function a(t,e){u.action=t,u.mesh=e,l.events.fire(L.HOVER,u);const s=l.meshes.indexOf(d);l.meshCallbacks[s].hoverCallback&&l.meshCallbacks[s].hoverCallback(u)}function h(t){function e(t){"Mesh"===t.type&&t.mouseEnabled&&s.push(t),t.children.length&&t.children.forEach(e)}Array.isArray(t)||(t=[t]);const s=[];return t.forEach(e),s}L.instance||(L.HOVER="interaction3d_hover",L.CLICK="interaction3d_click",L.instance=this);const l=this;this.events=new s,this.ray=new z(t),this.meshes=[],this.meshCallbacks=[],this.cursor="auto",this.enabled=!0;const u={};let d,m;g.input.events.add(b.START,n),g.input.events.add(b.MOVE,r),g.input.events.add(b.CLICK,o),this.add=((t,e,s,i)=>{Array.isArray(t)&&!i||(t=h(t)),t.forEach(t=>{this.meshes.push(t),this.meshCallbacks.push({hoverCallback:e,clickCallback:s})})}),this.remove=((t,e)=>{Array.isArray(t)&&!e||(t=h(t)),t.forEach(t=>{t===d&&(a("out",d),d=null,c.css("cursor",this.cursor));for(let e=this.meshes.length-1;e>=0;e--)this.meshes[e]===t&&(this.meshes.splice(e,1),this.meshCallbacks.splice(e,1))})}),this.destroy=(()=>e.nullObject(this))}set camera(t){this.ray.camera=t}}class P{constructor(t){const e=new THREE.Vector3,s=new THREE.Vector3,i=new THREE.Vector3;this.set=(e=>{t=e}),this.unproject=((s,n)=>{const r=this.rect||c;e.set(s.x/r.width*2-1,-s.y/r.height*2+1,.5),e.unproject(t);const o=t.position;e.sub(o).normalize();const a=n||-o.z/e.z;return i.copy(o).add(e.multiplyScalar(a)),i}),this.project=(e=>{const i=this.rect||c;return e instanceof THREE.Object3D?(e.updateMatrixWorld(),s.set(0,0,0).setFromMatrixPosition(e.matrixWorld)):s.copy(e),s.project(t),s.x=(s.x+1)/2*i.width,s.y=-(s.y-1)/2*i.height,s})}}const j=new class{constructor(){function t(t){const e=t.split("#!ATTRIBUTES")[1].split("#!")[0],i=t.split("#!UNIFORMS")[1].split("#!")[0],n=t.split("#!VARYINGS")[1].split("#!")[0];for(;~t.indexOf("#!SHADER");){const r=(t=t.slice(t.indexOf("#!SHADER"))).split("#!SHADER")[1],o=r.indexOf("\n"),a=r.slice(0,o).split(": ")[1];let h=r.slice(o);h=~a.indexOf(".vs")?e+i+n+h:i+n+h,s[a]=h,t=t.replace("#!SHADER","$")}}function e(){for(let t in s){const e=s[t];"string"==typeof e&&~e.indexOf("require")&&(s[t]=function(t){for(;~t.indexOf("#require");){const e=t.split("#require(")[1].split(")")[0];t=t.replace(`#require(${e})`,s[e])}return t}(e))}}const s={};this.parse=((i,n)=>{~i.indexOf("{@}")?(!function(e){const i=e.split("{@}");i.shift();for(let e=0;e<i.length;e+=2){const n=i[e],r=i[e+1];~r.indexOf("#!UNIFORMS")?t(r):s[n]=r}}(i),e()):s[n.split("/").last()]=i}),this.getShader=(t=>s[t]),window.Shaders=this}};class H{constructor(t,e,s){function i(t,e){let s;return(t=(s="vs"===e?["precision highp float;","precision highp int;","attribute vec2 uv;","attribute vec3 position;","attribute vec3 normal;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"):[~t.indexOf("dFdx")?"#extension GL_OES_standard_derivatives : enable":"","precision highp float;","precision highp int;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"))+t).replace(/#s?chunk\(\s?(\w+)\s?\);/g,(t,e)=>THREE.ShaderChunk[e]+"\n")}"string"!=typeof e&&(s=e,e=t);const n=this;this.uniforms={},this.properties={},function(){for(let t in s)void 0!==s[t].value?n.uniforms[t]=s[t]:n.properties[t]=s[t]}(),function(){const s={};s.vertexShader=i(j.getShader(t+".vs")||t,"vs"),s.fragmentShader=i(j.getShader(e+".fs")||e,"fs"),s.uniforms=n.uniforms;for(let t in n.properties)s[t]=n.properties[t];n.material=new THREE.RawShaderMaterial(s),n.material.shader=n,n.uniforms=n.material.uniforms}()}set(t,e){a.clearTween(this.uniforms[t]),this.uniforms[t].value=e}tween(t,e,s,i,n,r,o){return a.tween(this.uniforms[t],{value:e},s,i,n,r,o)}getValues(){const t={};for(let e in this.uniforms)t[e]=this.uniforms[e].value;return t}copyUniformsTo(t){for(let e in this.uniforms)t.uniforms[e]=this.uniforms[e]}cloneUniformsTo(t){for(let e in this.uniforms)t.uniforms[e]={type:this.uniforms[e].type,value:this.uniforms[e].value}}destroy(){return this.material.dispose(),e.nullObject(this)}}"undefined"!=typeof Promise&&(Promise.create=function(){let t,e,s=new Promise(function(s,i){t=s,e=i});return s.resolve=t,s.reject=e,s}),Math.sign=function(t){return 0==(t=+t)||isNaN(t)?Number(t):t>0?1:-1},Math.degrees=function(t){return t*(180/Math.PI)},Math.radians=function(t){return t*(Math.PI/180)},Math.clamp=function(t,e=0,s=1){return Math.min(Math.max(t,Math.min(e,s)),Math.max(e,s))},Math.range=function(t,e=-1,s=1,i=0,n=1,r){const o=(t-e)*(n-i)/(s-e)+i;return r?Math.clamp(o,Math.min(i,n),Math.max(i,n)):o},Math.mix=function(t,e,s){return t*(1-s)+e*s},Math.step=function(t,e){return e<t?0:1},Math.smoothStep=function(t,e,s){const i=Math.max(0,Math.min(1,(s-t)/(e-t)));return i*i*(3-2*i)},Math.fract=function(t){return t-Math.floor(t)},Math.mod=function(t,e){return(t%e+e)%e},Array.prototype.remove=function(t){let e=this.indexOf(t);if(~e)return this.splice(e,1)},Array.prototype.last=function(){return this[this.length-1]},String.prototype.includes=function(t){if(!Array.isArray(t))return~this.indexOf(t);for(let e=t.length-1;e>=0;e--)if(~this.indexOf(t[e]))return!0;return!1},String.prototype.clip=function(t,e){return this.length>t?this.slice(0,t)+e:this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(t,e){return this.split(t).join(e)},window.fetch||(window.fetch=function(t,e={}){function s(){let t,e=[],i=[],r={};return n.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(s,n,o){e.push(n=n.toLowerCase()),i.push([n,o]),t=r[n],r[n]=t?`${t},${o}`:o}),{ok:1==(n.status/200|0),status:n.status,statusText:n.statusText,url:n.responseURL,clone:s,text:()=>Promise.resolve(n.responseText),json:()=>Promise.resolve(n.responseText).then(JSON.parse),xml:()=>Promise.resolve(n.responseXML),blob:()=>Promise.resolve(new Blob([n.response])),arrayBuffer:()=>Promise.resolve(new ArrayBuffer([n.response])),headers:{keys:()=>e,entries:()=>i,get:t=>r[t.toLowerCase()],has:t=>t.toLowerCase()in r}}}let i=Promise.create(),n=new XMLHttpRequest;n.open(e.method||"GET",t);for(let t in e.headers)n.setRequestHeader(t,e.headers[t]);return n.onload=(()=>i.resolve(s())),n.onerror=i.reject,n.send(e.body),i}),window.get=function(t,e={}){let s=Promise.create();return e.method="GET",window.fetch(t,e).then(function(t){if(!t.ok)return s.reject(t);t.text().then(function(t){if(t.charAt(0).includes(["[","{"]))try{s.resolve(JSON.parse(t))}catch(e){s.resolve(t)}else s.resolve(t)})}).catch(s.reject),s},window.post=function(t,e,s={}){let i=Promise.create();return s.method="POST",s.body=JSON.stringify(e),window.fetch(t,s).then(function(t){if(!t.ok)return i.reject(t);t.text().then(function(t){if(t.charAt(0).includes(["[","{"]))try{i.resolve(JSON.parse(t))}catch(e){i.resolve(t)}else i.resolve(t)})}).catch(i.reject),i},window.getURL=function(t,e="_blank"){window.open(t,e)},window.Global||(window.Global={}),window.Config||(window.Config={}),t.Events=s,t.Render=i,t.Stage=c,t.Interface=l,t.Component=u,t.Canvas=d,t.CanvasGraphics=f,t.CanvasFont=y,t.Device=n,t.Mouse=g,t.Interaction=b,t.Accelerometer=v,t.Utils=e,t.AssetLoader=E,t.FontLoader=R,t.Video=T,t.Images=x,t.SVG=O,t.Storage=k,t.WebAudio=I,t.TweenManager=a,t.Interpolation=r,t.MathTween=o,t.LinkedList=M,t.ObjectPool=S,t.Vector2=w,t.Vector3=A,t.Utils3D=C,t.Interaction3D=L,t.Raycaster=z,t.ScreenProjection=P,t.Shaders=j,t.Shader=H,Object.defineProperty(t,"__esModule",{value:!0})});
