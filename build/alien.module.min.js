//   _  /._  _  r3 2017-07-04 7:42pm
//  /_|///_'/ /
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Alien=e.Alien||{})}(this,function(e){"use strict";window.Events||(window.Events={BROWSER_FOCUS:"browser_focus",KEYBOARD_DOWN:"keyboard_down",KEYBOARD_UP:"keyboard_up",KEYBOARD_PRESS:"keyboard_press",RESIZE:"resize",COMPLETE:"complete",PROGRESS:"progress",UPDATE:"update",LOADED:"loaded",ERROR:"error",READY:"ready",HOVER:"hover",CLICK:"click"});class t{constructor(){let e=[];this.add=((t,s)=>{e.push({event:t,callback:s})}),this.remove=((t,s)=>{for(let i=e.length-1;i>-1;i--)e[i].event===t&&e[i].callback===s&&e.splice(i,1)}),this.fire=((t,s={})=>{for(let i=0;i<e.length;i++)e[i].event===t&&e[i].callback(s)})}}window.events||(window.events=new t),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(e=>Delayed(e,1e3/60)));let s=new class{constructor(){function e(e){"focus"===e.type&&(s=Date.now())}function t(){let h=Date.now(),o=h-n,l=0,u=60;s&&(u=1e3/(l=h-s)),s=h;for(let e=i.length-1;e>-1;e--){let t=i[e];if(t){if(t.fps){if((r+=l>200?0:l)<1e3/t.fps)continue;r-=1e3/t.fps}t(h,o,l,u,t.frameCount++)}}i.length?window.requestAnimationFrame(t):(a=!1,window.events.remove(Events.BROWSER_FOCUS,e))}let s,i=[],n=Date.now(),r=0,a=!1;this.start=(s=>{s.frameCount=0,-1===i.indexOf(s)&&i.push(s),i.length&&!a&&(a=!0,window.requestAnimationFrame(t),window.events.add(Events.BROWSER_FOCUS,e))}),this.stop=(e=>{let t=i.indexOf(e);t>-1&&i.splice(t,1)})}};class i{constructor(e){for(let t in e)this[t]=e[t];this.lerp=((t,s)=>{for(let i in e)this[i]+=(t[i]-this[i])*s;return this})}}let n=new class{rand(e,t){return new i({v:e}).lerp({v:t},Math.random()).v}doRandom(e,t,s){if("number"==typeof s){let i=Math.pow(10,s);return Math.round(this.rand(e,t)*i)/i}return Math.round(this.rand(e-.5,t+.5))}headsTails(e,t){return this.doRandom(0,1)?t:e}toDegrees(e){return e*(180/Math.PI)}toRadians(e){return e*(Math.PI/180)}findDistance(e,t){let s=t.x-e.x,i=t.y-e.y;return Math.sqrt(s*s+i*i)}timestamp(){return(Date.now()+this.doRandom(0,99999)).toString()}pad(e){return e<10?"0"+e:e}hitTestObject(e,t){let s=e.x,i=e.y,n=e.width,r=e.height,a=t.x,h=t.y,o=s+n,l=i+r,u=a+t.width,c=h+t.height;if(a>=s&&a<=o){if(h>=i&&h<=l)return!0;if(i>=h&&i<=c)return!0}else if(s>=a&&s<=u){if(h>=i&&h<=l)return!0;if(i>=h&&i<=c)return!0}return!1}clamp(e,t,s){return Math.min(Math.max(e,t),s)}constrain(e,t,s){return Math.min(Math.max(e,Math.min(t,s)),Math.max(t,s))}convertRange(e,t,s,i,n,r){let a=(e-t)*(n-i)/(s-t)+i;return r?this.constrain(a,i,n):a}nullObject(e){for(let t in e)void 0!==e[t]&&(e[t]=null);return null}cloneObject(e){return JSON.parse(JSON.stringify(e))}mergeObject(...e){let t={};for(let s of e)for(let e in s)t[e]=s[e];return t}cloneArray(e){return e.slice(0)}toArray(e){return Object.keys(e).map(t=>e[t])}queryString(e){return decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}basename(e){return e.replace(/.*\//,"").replace(/(.*)\..*$/,"$1")}},r=new class{constructor(){this.agent=navigator.userAgent.toLowerCase(),this.prefix=(()=>{let e="",t="",s=window.getComputedStyle(document.documentElement,"");e=(Array.prototype.slice.call(s).join("").match(/-(moz|webkit|ms)-/)||""===s.OLink&&["","o"])[1],t="WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1];var i=this.detect("trident");return{unprefixed:i&&!this.detect("msie 9"),dom:t,lowercase:e,css:"-"+e+"-",js:(i?e[0]:e[0].toUpperCase())+e.substr(1)}})(),this.transformProperty=(()=>{let e;switch(this.prefix.lowercase){case"webkit":e="-webkit-transform";break;case"moz":e="-moz-transform";break;case"o":e="-o-transform";break;case"ms":e="-ms-transform";break;default:e="transform"}return e})(),this.mobile=!(!("ontouchstart"in window||"onpointerdown"in window)||!this.detect(["ios","iphone","ipad","android","blackberry"]))&&{}}detect(e){"string"==typeof e&&(e=[e]);for(let t=0;t<e.length;t++)if(this.agent.indexOf(e[t])>-1)return!0;return!1}vendor(e){return this.prefix.js+e}},a=new class{constructor(){this.convertEase=(e=>(()=>{let t;switch(e){case"easeInQuad":t=this.Quad.In;break;case"easeInCubic":t=this.Cubic.In;break;case"easeInQuart":t=this.Quart.In;break;case"easeInQuint":t=this.Quint.In;break;case"easeInSine":t=this.Sine.In;break;case"easeInExpo":t=this.Expo.In;break;case"easeInCirc":t=this.Circ.In;break;case"easeInElastic":t=this.Elastic.In;break;case"easeInBack":t=this.Back.In;break;case"easeInBounce":t=this.Bounce.In;break;case"easeOutQuad":t=this.Quad.Out;break;case"easeOutCubic":t=this.Cubic.Out;break;case"easeOutQuart":t=this.Quart.Out;break;case"easeOutQuint":t=this.Quint.Out;break;case"easeOutSine":t=this.Sine.Out;break;case"easeOutExpo":t=this.Expo.Out;break;case"easeOutCirc":t=this.Circ.Out;break;case"easeOutElastic":t=this.Elastic.Out;break;case"easeOutBack":t=this.Back.Out;break;case"easeOutBounce":t=this.Bounce.Out;break;case"easeInOutQuad":t=this.Quad.InOut;break;case"easeInOutCubic":t=this.Cubic.InOut;break;case"easeInOutQuart":t=this.Quart.InOut;break;case"easeInOutQuint":t=this.Quint.InOut;break;case"easeInOutSine":t=this.Sine.InOut;break;case"easeInOutExpo":t=this.Expo.InOut;break;case"easeInOutCirc":t=this.Circ.InOut;break;case"easeInOutElastic":t=this.Elastic.InOut;break;case"easeInOutBack":t=this.Back.InOut;break;case"easeInOutBounce":t=this.Bounce.InOut;break;case"linear":t=this.Linear.None}return t})()||this.Cubic.Out),this.Linear={None:e=>e},this.Quad={In:e=>e*e,Out:e=>e*(2-e),InOut:e=>(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},this.Cubic={In:e=>e*e*e,Out:e=>--e*e*e+1,InOut:e=>(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},this.Quart={In:e=>e*e*e*e,Out:e=>1- --e*e*e*e,InOut:e=>(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},this.Quint={In:e=>e*e*e*e*e,Out:e=>--e*e*e*e*e+1,InOut:e=>(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},this.Sine={In:e=>1-Math.cos(e*Math.PI/2),Out:e=>Math.sin(e*Math.PI/2),InOut:e=>.5*(1-Math.cos(Math.PI*e))},this.Expo={In:e=>0===e?0:Math.pow(1024,e-1),Out:e=>1===e?1:1-Math.pow(2,-10*e),InOut:e=>0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},this.Circ={In:e=>1-Math.sqrt(1-e*e),Out:e=>Math.sqrt(1- --e*e),InOut:e=>(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},this.Elastic={In:e=>{let t,s=.1;return 0===e?0:1===e?1:(!s||s<1?(s=1,t=.1):t=.4*Math.asin(1/s)/(2*Math.PI),-s*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:e=>{let t,s=.1;return 0===e?0:1===e?1:(!s||s<1?(s=1,t=.1):t=.4*Math.asin(1/s)/(2*Math.PI),s*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:e=>{let t,s=.1;return 0===e?0:1===e?1:(!s||s<1?(s=1,t=.1):t=.4*Math.asin(1/s)/(2*Math.PI),(e*=2)<1?s*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:s*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},this.Back={In:e=>{let t=1.70158;return e*e*((t+1)*e-t)},Out:e=>{let t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:e=>{let t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},this.Bounce={In:e=>1-this.Bounce.Out(1-e),Out:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,InOut:e=>e<.5?.5*this.Bounce.In(2*e):.5*this.Bounce.Out(2*e-1)+.5}}};class h{constructor(e,t,s,i,n,r){function h(t){if(e.mathTween=null,!t)for(let t in c)"number"==typeof c[t]&&(e[t]=c[t]);l.removeMathTween(f)}let o,u,c,d,p,f=this;!function(){l.clearTween(e),l.addMathTween(f),e.mathTween=f,i=a.convertEase(i),o=Date.now(),o+=n,c=t,u={};for(let t in c)"number"==typeof e[t]&&(u[t]=e[t])}(),this.update=(t=>{if(d||t<o)return;let n=i(p=(p=(t-o)/s)>1?1:p);for(let t in u)if("number"==typeof u[t]){let s=u[t],i=c[t];e[t]=s+(i-s)*n}1===p&&(h(),r&&r())}),this.pause=(()=>{d=!0}),this.resume=(()=>{d=!1,o=Date.now()-p*s}),this.stop=(()=>h(!0))}}class o{constructor(e,t,s,i,n,r){function a(t){if(e.mathTween=null,!t)for(let t in u)"number"==typeof u[t]&&(e[t]=u[t]);l.removeMathTween(m)}let h,o,u,c,d,p,f,m=this;!function(){l.clearTween(e),l.addMathTween(m),e.mathTween=m,h=Date.now(),h+=n,u={},c={},o={},(t.x||t.y||t.z)&&(void 0===t.x&&(t.x=e.x),void 0===t.y&&(t.y=e.y),void 0===t.z&&(t.z=e.z)),p=0,d=t.damping||.1,delete t.damping;for(let e in t)"number"==typeof t[e]&&(o[e]=0,u[e]=t[e]);for(let s in t)"number"==typeof e[s]&&(c[s]=e[s]||0,t[s]=c[s])}(),this.update=(i=>{if(f||i<h)return;let n;for(let i in c)if("number"==typeof c[i]){let r=u[i],a=t[i],h=r-a,l=h*d;o[i]+=l,o[i]*=s,t[i]+=o[i],e[i]=t[i],n=o[i]}Math.abs(n)<.001&&++p>30&&(a(),r&&r())}),this.pause=(()=>{f=!0}),this.stop=(()=>a(!0))}}let l=new class{constructor(){function e(n){if(t.length)for(let e=0;e<t.length;e++)t[e].update(n);else i=!1,s.stop(e)}this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"};let t=[],i=!1;this.addMathTween=(n=>{t.push(n),i||(i=!0,s.start(e))}),this.removeMathTween=(e=>{let s=t.indexOf(e);s>-1&&t.splice(s,1)})}tween(e,t,s,i,n,r){"number"!=typeof n&&(r=n,n=0);let a=null;"undefined"!=typeof Promise&&(a=Promise.create(),r&&a.then(r),r=a.resolve);let l="spring"===i?new o(e,t,s,i,n,r):new h(e,t,s,i,n,r);return a||l}clearTween(e){e.mathTween&&e.mathTween.stop()}clearCSSTween(e){e.cssTween&&e.cssTween.stop()}checkTransform(e){return this.TRANSFORMS.indexOf(e)>-1}getEase(e){let t=this.CSS_EASES;return t[e]||t.easeOutCubic}getAllTransforms(e){let t={};for(let s=this.TRANSFORMS.length-1;s>-1;s--){let i=this.TRANSFORMS[s],n=e[i];0!==n&&"number"==typeof n&&(t[i]=n)}return t}parseTransform(e){let t="";if(void 0!==e.x||void 0!==e.y||void 0!==e.z){let s=e.x||0,i=e.y||0,n=e.z||0,r="";r+=s+"px, ",r+=i+"px, ",t+="translate3d("+(r+=n+"px")+")"}return void 0!==e.scale?t+="scale("+e.scale+")":(void 0!==e.scaleX&&(t+="scaleX("+e.scaleX+")"),void 0!==e.scaleY&&(t+="scaleY("+e.scaleY+")")),void 0!==e.rotation&&(t+="rotate("+e.rotation+"deg)"),void 0!==e.rotationX&&(t+="rotateX("+e.rotationX+"deg)"),void 0!==e.rotationY&&(t+="rotateY("+e.rotationY+"deg)"),void 0!==e.rotationZ&&(t+="rotateZ("+e.rotationZ+"deg)"),void 0!==e.skewX&&(t+="skewX("+e.skewX+"deg)"),void 0!==e.skewY&&(t+="skewY("+e.skewY+"deg)"),void 0!==e.perspective&&(t+="perspective("+e.perspective+"px)"),t}};class u{constructor(e,t,s,i,n,a){function h(){return!e||!e.element}function o(){h()||(e.element.style[r.vendor("Transition")]="",e.cssTween=null)}let u=this,c=l.getAllTransforms(e),d=[];!function(){for(let e in t)l.checkTransform(e)?(c.use=!0,c[e]=t[e],delete t[e]):("number"==typeof t[e]||e.indexOf("-")>-1)&&d.push(e);c.use&&d.push(r.transformProperty),delete c.use}(),function(){if(h())return;l.clearCSSTween(e),e.cssTween=u;let p="";for(let e=0;e<d.length;e++)p+=(p.length?", ":"")+d[e]+" "+s+"ms "+l.getEase(i)+" "+n+"ms";Delayed(()=>{h()||(e.element.style[r.vendor("Transition")]=p,e.css(t),e.transform(c),Delayed(()=>{h()||(o(),a&&a())},s+n))},50)}(),this.stop=(()=>o())}}let c=new class{constructor(){let e=[];this.defineSymbol=((t,s,i,n)=>{let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("style","display: none;"),r.setAttribute("width",s),r.setAttribute("height",i),r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.innerHTML=`<symbol id="${t}">${n}</symbol>`,document.body.insertBefore(r,document.body.firstChild),e.push({id:t,width:s,height:i})}),this.getSymbolConfig=(t=>{for(let s=0;s<e.length;s++)if(e[s].id===t)return e[s];return null})}};class d{constructor(e,s="div",i){if(this.events=new t,this.name=e,this.type=s,"svg"===this.type?(this.element=document.createElementNS("http://www.w3.org/2000/svg",this.type),this.element.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")):(this.element=document.createElement(this.type),"."===e[0]?this.element.className=e.substr(1):this.element.id=e),this.element.style.position="absolute",!i){let e=window.Alien&&window.Alien.Stage?window.Alien.Stage:document.body;e.appendChild(this.element)}}initClass(e,...t){let s=new e(...t);return s.element&&this.element.appendChild(s.element),s.parent=this,s}create(e,t){let s=new d(e,t);return this.element.appendChild(s.element),s.parent=this,s}destroy(){return this.loop&&s.stop(this.loop),this.element.parentNode.removeChild(this.element),n.nullObject(this)}empty(){return this.element.innerHTML="",this}text(e){return void 0===e?this.element.textContent:(this.element.textContent=e,this)}html(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)}hide(){return this.element.style.display="none",this}show(){return this.element.style.display="",this}visible(){return this.element.style.visibility="visible",this}invisible(){return this.element.style.visibility="hidden",this}setZ(e){return this.element.style.zIndex=e,this}clearAlpha(){return this.element.style.opacity="",this}size(e,t){return void 0!==e&&(void 0===t&&(t=e),"string"==typeof e?("string"!=typeof t&&(t+="px"),this.element.style.width=e,this.element.style.height=t):(this.element.style.width=e+"px",this.element.style.height=t+"px",this.element.style.backgroundSize=e+"px "+t+"px")),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this}mouseEnabled(e){return this.element.style.pointerEvents=e?"auto":"none",this}fontStyle(e,t,s,i){return this.css({fontFamily:e,fontSize:t,color:s,fontStyle:i}),this}bg(e,t,s,i){return e.indexOf(".")>-1||e.indexOf("data:")>-1?this.element.style.backgroundImage="url("+e+")":this.element.style.backgroundColor=e,void 0!==t&&(t="number"==typeof t?t+"px":t,s="number"==typeof s?s+"px":s,this.element.style.backgroundPosition=t+" "+s),i&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=i),"cover"!==t&&"contain"!==t||(this.element.style.backgroundSize=t,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==s?s+" "+i:"center"),this}center(e,t,s){let i={};return void 0===e?(i.left="50%",i.top="50%",i.marginLeft=-this.width/2,i.marginTop=-this.height/2):(e&&(i.left="50%",i.marginLeft=-this.width/2),t&&(i.top="50%",i.marginTop=-this.height/2)),s&&(delete i.left,delete i.top),this.css(i),this}mask(e){return this.element.style[r.vendor("Mask")]=(e.indexOf(".")>-1?"url("+e+")":e)+" no-repeat",this.element.style[r.vendor("MaskSize")]="contain",this}blendMode(e,t){return this.element.style[t?"background-blend-mode":"mix-blend-mode"]=e,this}css(e,t){if("object"!=typeof e){if(t)return this.element.style[e]=t,this;{let t=this.element.style[e];return"number"!=typeof t&&(t.indexOf("px")>-1&&(t=Number(t.slice(0,-2))),"opacity"===e&&(t=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),t||(t=0),t}}for(let t in e){let s=e[t];"string"!=typeof s&&"number"!=typeof s||("string"!=typeof s&&"opacity"!==t&&"zIndex"!==t&&(s+="px"),this.element.style[t]=s)}return this}transform(e){if(e)for(let t in e)"number"==typeof e[t]&&(this[t]=e[t]);else e=this;return this.element.style[r.vendor("Transform")]=l.parseTransform(e),this}enable3D(e,t,s){return this.element.style[r.vendor("TransformStyle")]="preserve-3d",e&&(this.element.style[r.vendor("Perspective")]=e+"px"),void 0!==t&&(t="number"==typeof t?t+"px":t,s="number"==typeof s?s+"px":s,this.element.style[r.vendor("PerspectiveOrigin")]=t+" "+s),this}disable3D(){return this.element.style[r.vendor("TransformStyle")]="",this.element.style[r.vendor("Perspective")]="",this}transformPoint(e,t,s){let i="";return void 0!==e&&(i+="number"==typeof e?e+"px ":e+" "),void 0!==t&&(i+="number"==typeof t?t+"px ":t+" "),void 0!==s&&(i+="number"==typeof s?s+"px":s),this.element.style[r.vendor("TransformOrigin")]=i,this}tween(e,t,s,i,n){"number"!=typeof i&&(n=i,i=0);let r=null;"undefined"!=typeof Promise&&(r=Promise.create(),n&&r.then(n),n=r.resolve);let a=new u(this,e,t,s,i,n);return r||a}clearTransform(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style[r.transformProperty]="",this}stopTween(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}attr(e,t){return void 0===t?this.element.getAttribute(e):(""===t?this.element.removeAttribute(e):this.element.setAttribute(e,t),this)}svgSymbol(e,t,s){let i=c.getSymbolConfig(e);this.html(`<svg viewBox="0 0 ${i.width} ${i.height}" width="${t}" height="${s}"><use xlink:href="#${i.id}" x="0" y="0"/></svg>`)}startRender(e){this.loop=e,s.start(e)}stopRender(e){this.loop=null,s.stop(e)}click(e){return this.element.addEventListener("click",t=>{t.object="hit"===this.element.className?this.parent:this,t.action="click",e&&e(t)},!0),this.element.style.cursor="pointer",this}hover(e){let t=t=>{t.object="hit"===this.element.className?this.parent:this,t.action="mouseout"===t.type?"out":"over",e&&e(t)};return this.element.addEventListener("mouseover",t,!0),this.element.addEventListener("mouseout",t,!0),this}press(e){let t=t=>{t.object="hit"===this.element.className?this.parent:this,t.action="mousedown"===t.type?"down":"up",e&&e(t)};return this.element.addEventListener("mousedown",t,!0),this.element.addEventListener("mouseup",t,!0),this}bind(e,t){return this.element.addEventListener(e,t,!0),this}unbind(e,t){return this.element.removeEventListener(e,t,!0),this}interact(e,t){return this.hit=this.create(".hit").css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}),this.hit.hover(e).click(t),this}split(e=""){let t={position:"relative",display:"block",width:"auto",height:"auto",margin:0,padding:0,cssFloat:"left"},s=[],i=this.text().split(e);this.empty();for(let n=0;n<i.length;n++)" "===i[n]&&(i[n]="&nbsp;"),s.push(this.create(".t","span").html(i[n]).css(t)),""!==e&&n<i.length-1&&s.push(this.create(".t","span").html(e).css(t));return s}}class p extends d{constructor(e,t,s=t,i,n){super(e,"canvas",n),this.children=[],this.retina=i,this.context=this.element.getContext("2d");let r=i?2:1;this.element.width=t*r,this.element.height=s*r,this.context.scale(r,r),this.size(t,s)}toDataURL(e,t){return this.element.toDataURL(e,t)}render(e){"boolean"==typeof e&&e||this.clear();for(let e=0;e<this.children.length;e++)this.children[e].render()}clear(){this.context.clearRect(0,0,this.element.width,this.element.height)}add(e){e.setCanvas(this),e.parent=this,this.children.push(e),e.z=this.children.length}remove(e){e.canvas=null,e.parent=null;let t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)}destroy(){this.stopRender();for(let e=0;e<this.children.length;e++)this.children[e].destroy();return n.nullObject(this)}getImageData(e=0,t=0,s=this.element.width,i=this.element.height){return this.imageData=this.context.getImageData(e,t,s,i),this.imageData}getPixel(e,t,s){this.imageData&&!s||this.getImageData();let i={},n=4*(e+t*this.element.width),r=this.imageData.data;return i.r=r[n],i.g=r[n+1],i.b=r[n+2],i.a=r[n+3],i}putImageData(e){this.context.putImageData(e,0,0)}}class f{constructor(e){this.styles={};let t={x:0,y:0,width:0,height:0};e?this.styled=!1:this.data=new Float32Array(6),this.hit=(e=>(t.x=this.data[0],t.y=this.data[1],t.width=e.width,t.height=e.height,t))}set shadowOffsetX(e){this.styled=!0,this.styles.shadowOffsetX=e}get shadowOffsetX(){return this.styles.shadowOffsetX}set shadowOffsetY(e){this.styled=!0,this.styles.shadowOffsetY=e}get shadowOffsetY(){return this.styles.shadowOffsetY}set shadowBlur(e){this.styled=!0,this.styles.shadowBlur=e}get shadowBlur(){return this.styles.shadowBlur}set shadowColor(e){this.styled=!0,this.styles.shadowColor=e}get shadowColor(){return this.styles.shadowColor}get values(){return this.styles}setTRSA(e,t,s,i,n,r){let a=this.data;a[0]=e,a[1]=t,a[2]=s,a[3]=i,a[4]=n,a[5]=r}calculate(e){let t=e.data,s=this.data;s[0]=s[0]+t[0],s[1]=s[1]+t[1],s[2]=s[2]+t[2],s[3]=s[3]*t[3],s[4]=s[4]*t[4],s[5]=s[5]*t[5]}calculateStyle(e){if(!e.styled)return!1;this.styled=!0;let t=e.values;for(let e in t)this.styles[e]||(this.styles[e]=t[e])}}class m{constructor(e){function t(e){e instanceof m?s(e):"number"==typeof e?i(e):Array.isArray(e)?n(e):i(Number("0x"+e.slice(1)))}function s(e){a.r=e.r,a.g=e.g,a.b=e.b}function i(e){e=Math.floor(e),a.r=(e>>16&255)/255,a.g=(e>>8&255)/255,a.b=(255&e)/255}function n(e){a.r=e[0],a.g=e[1],a.b=e[2]}function r(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+6*(t-e)*(2/3-s):e}let a=this;this.r=1,this.g=1,this.b=1,t(e),this.set=(e=>(t(e),this)),this.setRGB=((e,t,s)=>(this.r=e,this.g=t,this.b=s,this)),this.setHSL=((e,t,s)=>{if(0===t)this.r=this.g=this.b=s;else{let i=s<=.5?s*(1+t):s+t-s*t,n=2*s-i;this.r=r(n,i,e+1/3),this.g=r(n,i,e),this.b=r(n,i,e-1/3)}return this}),this.offsetHSL=((e,t,s)=>{let i=this.getHSL();return i.h+=e,i.s+=t,i.l+=s,this.setHSL(i.h,i.s,i.l),this}),this.getStyle=(()=>"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"),this.getHex=(()=>255*this.r<<16^255*this.g<<8^255*this.b<<0),this.getHexString=(()=>"#"+("000000"+this.getHex().toString(16)).slice(-6)),this.getHSL=(()=>{this.hsl=this.hsl||{h:0,s:0,l:0};let e,t,s=this.hsl,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),h=Math.min(i,n,r),o=(h+a)/2;if(h===a)e=0,t=0;else{let s=a-h;switch(t=o<=.5?s/(a+h):s/(2-a-h),a){case i:e=(n-r)/s+(n<r?6:0);break;case n:e=(r-i)/s+2;break;case r:e=(i-n)/s+4}e/=6}return s.h=e,s.s=t,s.l=o,s}),this.add=(e=>{this.r+=e.r,this.g+=e.g,this.b+=e.b}),this.mix=((e,t)=>{this.r*=1-t+e.r*t,this.g*=1-t+e.g*t,this.b*=1-t+e.b*t}),this.addScalar=(e=>{this.r+=e,this.g+=e,this.b+=e}),this.multiply=(e=>{this.r*=e.r,this.g*=e.g,this.b*=e.b}),this.multiplyScalar=(e=>{this.r*=e,this.g*=e,this.b*=e}),this.clone=(()=>new m([this.r,this.g,this.b])),this.toArray=(()=>(this.array||(this.array=[]),this.array[0]=this.r,this.array[1]=this.g,this.array[2]=this.b,this.array))}}class w{constructor(){this.visible=!0,this.blendMode="source-over",this.x=0,this.y=0,this.px=0,this.py=0,this.clipX=0,this.clipY=0,this.clipWidth=0,this.clipHeight=0,this.width=0,this.height=0,this.rotation=0,this.scale=1,this.opacity=1,this.values=new f,this.styles=new f(!0),this.children=[]}updateValues(){this.values.setTRSA(this.x,this.y,n.toRadians(this.rotation),this.scaleX||this.scale,this.scaleY||this.scale,this.opacity),this.parent.values&&this.values.calculate(this.parent.values),this.parent.styles&&this.styles.calculateStyle(this.parent.styles)}render(e){if(!this.visible)return!1;this.updateValues(),this.draw&&this.draw(e);for(let t=0;t<this.children.length;t++)this.children[t].render(e)}startDraw(e,t,s){let i=this.canvas.context,n=this.values.data,r=n[0]+(e||0),a=n[1]+(t||0);if(i.save(),s||(i.globalCompositeOperation=this.blendMode),i.translate(r,a),i.rotate(n[2]),i.scale(n[3],n[4]),i.globalAlpha=n[5],this.styles.styled){let e=this.styles.values;for(let t in e){let s=e[t];i[t]=s instanceof m?s.getHexString():s}}}endDraw(){this.canvas.context.restore()}add(e){e.canvas=this.canvas,e.parent=this,this.children.push(e),e.z=this.children.length}setCanvas(e){this.canvas=e;for(let t=this.children.length-1;t>-1;t--)this.children[t].setCanvas(e)}remove(e){e.canvas=null,e.parent=null;let t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)}isMask(){let e=this;for(;e;){if(e.masked)return!0;e=e.parent}return!1}unmask(){this.masked.mask(null),this.masked=null}setZ(e){this.z=e,this.parent.children.sort((e,t)=>e.z-t.z)}follow(e){return this.x=e.x,this.y=e.y,this.px=e.px,this.py=e.py,this.clipX=e.clipX,this.clipY=e.clipY,this.clipWidth=e.clipWidth,this.clipHeight=e.clipHeight,this.width=e.width,this.height=e.height,this.rotation=e.rotation,this.scale=e.scale,this.scaleX=e.scaleX||e.scale,this.scaleY=e.scaleY||e.scale,this}visible(){return this.visible=!0,this}invisible(){return this.visible=!1,this}transform(e){for(let t in e)"number"==typeof e[t]&&(this[t]=e[t]);return this}transformPoint(e,t){return this.px="number"==typeof e?e:this.width*(parseFloat(e)/100),this.py="number"==typeof t?t:this.height*(parseFloat(t)/100),this}clip(e,t,s,i){return this.clipX=e,this.clipY=t,this.clipWidth=s,this.clipHeight=i,this}hit(e){if(!this.ignoreHit&&n.hitTestObject(e,this.values.hit(this)))return this;for(let t=this.children.length-1;t>-1;t--){let s=this.children[t];if(s.hit(e))return s}return!1}destroy(){for(let e=0;e<this.children.length;e++)this.children[e].destroy();return n.nullObject(this)}}let b=new class{createImg(e,t){let s=new Image;return s.src=(Config.CDN||"")+e,s.onload=(()=>{t&&t()}),s}promise(e){let t=Promise.create();return e.onload=t.resolve,t}};class y extends w{constructor(e=0,t=e){function s(e){for(let t in i.props){let s=i.props[t];e[t]=s instanceof m?s.getHexString():s}}super();let i=this;this.width=e,this.height=t,this.props={};let r,a={},h=[];this.draw=(e=>{if(this.isMask()&&!e)return!1;let t=this.canvas.context;this.startDraw(-this.px,-this.py,e),s(t),this.clipWidth&&this.clipHeight&&(t.beginPath(),t.rect(this.clipX,this.clipY,this.clipWidth,this.clipHeight),t.clip());for(let e=0;e<h.length;e++){let s=h[e];if(!s)continue;let i=s.shift();t[i].apply(t,s),s.unshift(i)}this.endDraw(),r&&(t.globalCompositeOperation=r.blendMode,r.render(!0))}),this.clear=(()=>{for(let e=0;e<h.length;e++)h[e].length=0;h.length=0}),this.arc=((e=0,t=0,s=0,i=this.radius||this.width/2,r=0,a=!1)=>{e&&!t&&(s=e,e=0,t=0),s-=90,r-=90,h.push(["beginPath"]),h.push(["arc",e,t,i,n.toRadians(r),n.toRadians(s),a])}),this.quadraticCurveTo=((e,t,s,i)=>{h.push(["quadraticCurveTo",e,t,s,i])}),this.bezierCurveTo=((e,t,s,i,n,r)=>{h.push(["bezierCurveTo",e,t,s,i,n,r])}),this.fillRect=((e,t,s,i)=>{h.push(["fillRect",e,t,s,i])}),this.clearRect=((e,t,s,i)=>{h.push(["clearRect",e,t,s,i])}),this.strokeRect=((e,t,s,i)=>{h.push(["strokeRect",e,t,s,i])}),this.moveTo=((e,t)=>{h.push(["moveTo",e,t])}),this.lineTo=((e,t)=>{h.push(["lineTo",e,t])}),this.stroke=(()=>{h.push(["stroke"])}),this.fill=(()=>{r||h.push(["fill"])}),this.beginPath=(()=>{h.push(["beginPath"])}),this.closePath=(()=>{h.push(["closePath"])}),this.fillText=((e,t,s)=>{h.push(["fillText",e,t,s])}),this.strokeText=((e,t,s)=>{h.push(["strokeText",e,t,s])}),this.setLineDash=(e=>{h.push(["setLineDash",e])}),this.createImage=((e,t)=>{if(!a[e]||t){let s=b.createImg(e);if(t)return s;a[e]=s}return a[e]}),this.drawImage=((e,t=0,s=0,i=e.width,n=e.height,r=0,a=0,o=e.width,l=e.height)=>{"string"==typeof e&&(e=this.createImage(e)),h.push(["drawImage",e,t,s,i,n,r,a,o,l])}),this.mask=(e=>{if(!e)return r=null;r=e,e.masked=this;for(let e=0;e<h.length;e++)"fill"!==h[e][0]&&"stroke"!==h[e][0]||(h[e].length=0,h.splice(e,1))}),this.clone=(()=>{let e=new y(this.width,this.height);return e.visible=this.visible,e.blendMode=this.blendMode,e.opacity=this.opacity,e.follow(this),e.props=n.cloneObject(this.props),e.setDraw(n.cloneArray(h)),e}),this.setDraw=(e=>{h=e})}set strokeStyle(e){this.props.strokeStyle=e}get strokeStyle(){return this.props.strokeStyle}set fillStyle(e){this.props.fillStyle=e}get fillStyle(){return this.props.fillStyle}set lineWidth(e){this.props.lineWidth=e}get lineWidth(){return this.props.lineWidth}set lineCap(e){this.props.lineCap=e}get lineCap(){return this.props.lineCap}set lineDashOffset(e){this.props.lineDashOffset=e}get lineDashOffset(){return this.props.lineDashOffset}set lineJoin(e){this.props.lineJoin=e}get lineJoin(){return this.props.lineJoin}set miterLimit(e){this.props.miterLimit=e}get miterLimit(){return this.props.miterLimit}set font(e){this.props.font=e}get font(){return this.props.font}set textAlign(e){this.props.textAlign=e}get textAlign(){return this.props.textAlign}set textBaseline(e){this.props.textBaseline=e}get textBaseline(){return this.props.textBaseline}}class g extends y{constructor(e,t,s,i=s){super(s,i);let n=e.initClass(p,t,s,i);this.img=(e=>(this.drawImage(e,0,0,s,i),n.add(this),this))}}let v=new class{constructor(){function e(e,t,s,i,n,r,a,h){let o=e.context,l=e.initClass(y,t,s);l.font=n,l.fillStyle=r,l.totalWidth=0;let u,c=i.split(""),d=0,p=0;o.font=n;for(let e=0;e<c.length;e++)l.totalWidth+=o.measureText(c[e]).width+a;switch(h){case"start":case"left":p=0;break;case"end":case"right":p=t-l.totalWidth;break;case"center":p=(t-l.totalWidth)/2}do{u=c[d++],l.fillText(u,p,0),p+=o.measureText(u).width+a}while(d<i.length);return l}this.createText=((t,s,i,n,r,a,{letterSpacing:h=0,lineHeight:o=i,textAlign:l="start"})=>{let u=t.context;if(i===o)return e(t,s,i,n,r,a,h,l);{let c=t.initClass(y,s,i),d=n.split(" "),p="",f=[];c.totalWidth=0,c.totalHeight=0,u.font=r;for(let e=0;e<d.length;e++){let t=p+d[e]+" ",i=t.split(""),n=0;for(let e=0;e<i.length;e++)n+=u.measureText(i[e]).width+h;n>s&&e>0?(f.push(p),p=d[e]+" "):p=t}return f.push(p),f.every((i,n)=>{let u=e(t,s,o,i,r,a,h,l);return u.y=n*o,c.add(u),c.totalWidth=Math.max(u.totalWidth,c.totalWidth),c.totalHeight+=o,!0}),c}})}},O=new class{constructor(){this.x=0,this.y=0;let e=e=>{this.x=e.x,this.y=e.y};this.capture=(()=>{this.x=0,this.y=0,window.addEventListener("mousemove",e,!0)}),this.stop=(()=>{this.x=0,this.y=0,window.removeEventListener("mousemove",e,!0)})}},x=new class{constructor(){function e(s,i){if("object"==typeof i)for(let n in i){let r=s+"["+n+"]";"object"==typeof i[n]?e(r,i[n]):t.push(r+"="+i[n])}else t.push(s+"="+i)}this.headers={},this.options={};let t=[];this.get=((s,i,n,r)=>{if("function"==typeof i)r=n,n=i,i=null;else if("object"==typeof i){for(let t in i)e(t,i[t]);i=(i=(i=t.join("&")).replace(/\[/g,"%5B")).replace(/\]/g,"%5D"),t=null,s+="?"+i}let a=new XMLHttpRequest;a.open("GET",s,!0),"arraybuffer"===r&&(a.responseType="arraybuffer"),"blob"===r&&(a.responseType="blob"),"text"===r&&a.overrideMimeType("text/plain"),"json"===r&&a.setRequestHeader("Accept","application/json");for(let e in this.headers)a.setRequestHeader(e,this.headers[e]);for(let e in this.options)a[e]=this.options[e];let h=null;return"undefined"!=typeof Promise&&(h=Promise.create(),n&&h.then(n),n=h.resolve),a.send(),a.onreadystatechange=(()=>{n&&(4===a.readyState&&200===a.status?n("arraybuffer"===r||"blob"===r?a.response:"text"===r?a.responseText:JSON.parse(a.responseText)):0!=a.status&&400!=a.status&&401!=a.status&&404!=a.status&&500!=a.status||(h?h.reject(a):n(a)))}),h||a}),this.post=((s,i,n,r)=>{if("function"==typeof i)r=n,n=i,i=null;else if("object"==typeof i)if("json"===r)i=JSON.stringify(i);else{for(let t in i)e(t,i[t]);i=(i=(i=t.join("&")).replace(/\[/g,"%5B")).replace(/\]/g,"%5D"),t=null}let a=new XMLHttpRequest;a.open("POST",s,!0),"arraybuffer"===r&&(a.responseType="arraybuffer"),"blob"===r&&(a.responseType="blob"),"text"===r&&a.overrideMimeType("text/plain"),"json"===r&&a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","json"===r?"application/json":"application/x-www-form-urlencoded");for(let e in this.headers)a.setRequestHeader(e,this.headers[e]);for(let e in this.options)a[e]=this.options[e];let h=null;return"undefined"!=typeof Promise&&(h=Promise.create(),n&&h.then(n),n=h.resolve),a.send(),a.onreadystatechange=(()=>{n&&(4===a.readyState&&200===a.status?n("arraybuffer"===r||"blob"===r?a.response:"text"===r?a.responseText:JSON.parse(a.responseText)):0!=a.status&&400!=a.status&&401!=a.status&&404!=a.status&&500!=a.status||(h?h.reject(a):n(a)))}),h||a})}};window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext||window.oAudioContext);let k=new class{constructor(){let e,t=[];this.init=(()=>{e=new window.AudioContext,this.globalGain=e.createGain(),this.globalGain.connect(e.destination)}),this.createSound=((s,i,n)=>{let r={id:s};e.decodeAudioData(i,t=>{r.buffer=t,r.audioGain=e.createGain(),r.audioGain.connect(this.globalGain),r.complete=!0,n&&n()}),t.push(r)}),this.getSound=(e=>{for(let s=0;s<t.length;s++)if(t[s].id===e)return t[s];return null}),this.trigger=(t=>{if(!e)return;let s=this.getSound(t),i=e.createBufferSource();i.buffer=s.buffer,i.connect(s.audioGain),i.start(0)}),this.mute=(()=>{e&&l.tween(this.globalGain.gain,{value:0},300,"easeOutSine")}),this.unmute=(()=>{e&&l.tween(this.globalGain.gain,{value:1},500,"easeOutSine")})}};class S{constructor(e,s){function i(){o=++h/a,r.events.fire(Events.PROGRESS,{percent:o}),h===a&&(r.complete=!0,r.events.fire(Events.COMPLETE),s&&s())}Array.isArray(e)&&(e=e.map(e=>n.basename(e)).reduce((t,s,i)=>(t[s]=e[i],t),{}));let r=this;this.events=new t,this.CDN=Config.CDN||"";let a=Object.keys(e).length,h=0,o=0;for(let t in e)!function(e,t){let s=t.split("/"),n=(s=s[s.length-1]).split(".");switch(n[n.length-1].split("?")[0]){case"mp3":if(!window.AudioContext)return i();x.get(t,t=>{k.createSound(e,t,i)},"arraybuffer");break;default:b.createImg(t,i)}}(t,this.CDN+e[t])}}S.loadAssets=((e,t)=>{let s=Promise.create();return t||(t=s.resolve),new S(e,t),s});let I=new class extends d{constructor(){function e(){s.size()}super("Stage");let t,s=this;s.css({overflow:"hidden"}),window.addEventListener("focus",()=>{"focus"!==t&&(t="focus",window.events.fire(Events.BROWSER_FOCUS,{type:"focus"}))},!0),window.addEventListener("blur",()=>{"blur"!==t&&(t="blur",window.events.fire(Events.BROWSER_FOCUS,{type:"blur"}))},!0),window.addEventListener("keydown",()=>window.events.fire(Events.KEYBOARD_DOWN),!0),window.addEventListener("keyup",()=>window.events.fire(Events.KEYBOARD_UP),!0),window.addEventListener("keypress",()=>window.events.fire(Events.KEYBOARD_PRESS),!0),r.mobile||(window.addEventListener("resize",()=>window.events.fire(Events.RESIZE),!0),window.events.add(Events.RESIZE,e)),e()}};class E{constructor(e,s){let i=this;this.events=new t;let n;!function(){Array.isArray(e)||(e=[e]),n=I.create("FontLoader");for(let t=0;t<e.length;t++)n.create("font").fontStyle(e[t],12,"#000").text("LOAD").css({top:-999})}(),Delayed(()=>{n.destroy(),i.complete=!0,i.events.fire(Events.COMPLETE),s&&s()},500)}}E.loadFonts=((e,t)=>{let s=Promise.create();return t||(t=s.resolve),new E(e,t),s}),"undefined"!=typeof Promise&&(Promise.create=(()=>{let e,t,s=new Promise((s,i)=>{e=s,t=i});return s.resolve=e,s.reject=t,s})),window.getURL=((e,t="_blank")=>window.open(e,t)),window.Delayed=((e,t=0,s)=>window.setTimeout(()=>{e&&e(s)},t)),window.Global||(window.Global={}),window.Config||(window.Config={}),e.EventManager=t,e.Interface=d,e.Canvas=p,e.CanvasGraphics=y,e.CanvasImage=g,e.CanvasFont=v,e.Color=m,e.Render=s,e.DynamicObject=i,e.Utils=n,e.Device=r,e.Mouse=O,e.TweenManager=l,e.Interpolation=a,e.MathTween=h,e.SpringTween=o,e.AssetLoader=S,e.FontLoader=E,e.Images=b,e.SVG=c,e.XHR=x,e.WebAudio=k,e.Stage=I,Object.defineProperty(e,"__esModule",{value:!0})});
