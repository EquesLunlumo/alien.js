var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call};window.Events||(window.Events={BROWSER_FOCUS:"browser_focus",COMPLETE:"complete",PROGRESS:"progress",UPDATE:"update",LOADED:"loaded",ERROR:"error",RESIZE:"resize",HOVER:"hover",CLICK:"click"});var EventManager=function EventManager(){classCallCheck(this,EventManager);var events=[];this.add=function(event,callback){events.push({event:event,callback:callback})},this.remove=function(eventString,callback){for(var i=events.length-1;i>-1;i--)events[i].event===eventString&&events[i].callback===callback&&events.splice(i,1)},this.fire=function(eventString){for(var object=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=0;i<events.length;i++)events[i].event===eventString&&events[i].callback(object)}};window.events||(window.events=new EventManager),window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){Delayed(callback,1e3/60)}}());var Render=function Render(){var _this=this;classCallCheck(this,Render),this.TIME=Date.now(),this.TARGET_FPS=60;var last=void 0,render=[],time=Date.now(),timeSinceRender=0,rendering=!1,focus=function focus(e){"focus"===e.type&&(last=Date.now())},step=function step(){var t=Date.now(),timeSinceLoad=t-time,diff=0,fps=60;last&&(fps=1e3/(diff=t-last)),last=t,_this.FPS=fps,_this.TIME=t,_this.DELTA=diff,_this.TSL=timeSinceLoad;for(var i=render.length-1;i>-1;i--){var callback=render[i];if(callback){if(callback.fps){if((timeSinceRender+=diff>200?0:diff)<1e3/callback.fps)continue;timeSinceRender-=1e3/callback.fps}callback(t,timeSinceLoad,diff,fps,callback.frameCount++)}}render.length?window.requestAnimationFrame(step):(rendering=!1,window.events.remove(Events.BROWSER_FOCUS,focus))};this.start=function(callback,fps){_this.TARGET_FPS<60&&(fps=_this.TARGET_FPS),"number"==typeof fps&&(callback.fps=fps),callback.frameCount=0,-1===render.indexOf(callback)&&render.push(callback),render.length&&!rendering&&(rendering=!0,window.requestAnimationFrame(step),window.events.add(Events.BROWSER_FOCUS,focus))},this.stop=function(callback){var i=render.indexOf(callback);i>-1&&render.splice(i,1)}},Device=function(){function Device(){var _this=this;classCallCheck(this,Device),this.agent=navigator.userAgent.toLowerCase(),this.prefix=function(){var pre="",dom="",styles=window.getComputedStyle(document.documentElement,"");pre=(Array.prototype.slice.call(styles).join("").match(/-(moz|webkit|ms)-/)||""===styles.OLink&&["","o"])[1],dom="WebKit|Moz|MS|O".match(new RegExp("("+pre+")","i"))[1];var IE=_this.detect("trident");return{unprefixed:IE&&!_this.detect("msie 9"),dom:dom,lowercase:pre,css:"-"+pre+"-",js:(IE?pre[0]:pre[0].toUpperCase())+pre.substr(1)}}(),this.transformProperty=function(){var pre=void 0;switch(_this.prefix.lowercase){case"webkit":pre="-webkit-transform";break;case"moz":pre="-moz-transform";break;case"o":pre="-o-transform";break;case"ms":pre="-ms-transform";break;default:pre="transform"}return pre}(),this.system={},this.system.retina=window.devicePixelRatio>1}return createClass(Device,[{key:"detect",value:function detect(array){"string"==typeof array&&(array=[array]);for(var i=0;i<array.length;i++)if(this.agent.indexOf(array[i])>-1)return!0;return!1}},{key:"vendor",value:function vendor(style){return this.prefix.js+style}}]),Device}(),Interpolation=function Interpolation(){var _this=this;classCallCheck(this,Interpolation),this.convertEase=function(ease){return function(){var fn=void 0;switch(ease){case"easeInQuad":fn=_this.Quad.In;break;case"easeInCubic":fn=_this.Cubic.In;break;case"easeInQuart":fn=_this.Quart.In;break;case"easeInQuint":fn=_this.Quint.In;break;case"easeInSine":fn=_this.Sine.In;break;case"easeInExpo":fn=_this.Expo.In;break;case"easeInCirc":fn=_this.Circ.In;break;case"easeInElastic":fn=_this.Elastic.In;break;case"easeInBack":fn=_this.Back.In;break;case"easeInBounce":fn=_this.Bounce.In;break;case"easeOutQuad":fn=_this.Quad.Out;break;case"easeOutCubic":fn=_this.Cubic.Out;break;case"easeOutQuart":fn=_this.Quart.Out;break;case"easeOutQuint":fn=_this.Quint.Out;break;case"easeOutSine":fn=_this.Sine.Out;break;case"easeOutExpo":fn=_this.Expo.Out;break;case"easeOutCirc":fn=_this.Circ.Out;break;case"easeOutElastic":fn=_this.Elastic.Out;break;case"easeOutBack":fn=_this.Back.Out;break;case"easeOutBounce":fn=_this.Bounce.Out;break;case"easeInOutQuad":fn=_this.Quad.InOut;break;case"easeInOutCubic":fn=_this.Cubic.InOut;break;case"easeInOutQuart":fn=_this.Quart.InOut;break;case"easeInOutQuint":fn=_this.Quint.InOut;break;case"easeInOutSine":fn=_this.Sine.InOut;break;case"easeInOutExpo":fn=_this.Expo.InOut;break;case"easeInOutCirc":fn=_this.Circ.InOut;break;case"easeInOutElastic":fn=_this.Elastic.InOut;break;case"easeInOutBack":fn=_this.Back.InOut;break;case"easeInOutBounce":fn=_this.Bounce.InOut;break;case"linear":fn=_this.Linear.None}return fn}()||_this.Cubic.Out},this.Linear={None:function None(k){return k}},this.Quad={In:function In(k){return k*k},Out:function Out(k){return k*(2-k)},InOut:function InOut(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1)}},this.Cubic={In:function In(k){return k*k*k},Out:function Out(k){return--k*k*k+1},InOut:function InOut(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2)}},this.Quart={In:function In(k){return k*k*k*k},Out:function Out(k){return 1- --k*k*k*k},InOut:function InOut(k){return(k*=2)<1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2)}},this.Quint={In:function In(k){return k*k*k*k*k},Out:function Out(k){return--k*k*k*k*k+1},InOut:function InOut(k){return(k*=2)<1?.5*k*k*k*k*k:.5*((k-=2)*k*k*k*k+2)}},this.Sine={In:function In(k){return 1-Math.cos(k*Math.PI/2)},Out:function Out(k){return Math.sin(k*Math.PI/2)},InOut:function InOut(k){return.5*(1-Math.cos(Math.PI*k))}},this.Expo={In:function In(k){return 0===k?0:Math.pow(1024,k-1)},Out:function Out(k){return 1===k?1:1-Math.pow(2,-10*k)},InOut:function InOut(k){return 0===k?0:1===k?1:(k*=2)<1?.5*Math.pow(1024,k-1):.5*(2-Math.pow(2,-10*(k-1)))}},this.Circ={In:function In(k){return 1-Math.sqrt(1-k*k)},Out:function Out(k){return Math.sqrt(1- --k*k)},InOut:function InOut(k){return(k*=2)<1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-(k-=2)*k)+1)}},this.Elastic={In:function In(k){var s=void 0,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,s=.1):s=p*Math.asin(1/a)/(2*Math.PI),-a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))},Out:function Out(k){var s=void 0,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,s=.1):s=p*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1)},InOut:function InOut(k){var s=void 0,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,s=.1):s=p*Math.asin(1/a)/(2*Math.PI),(k*=2)<1?a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*-.5:a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*.5+1)}},this.Back={In:function In(k){var s=1.70158;return k*k*((s+1)*k-s)},Out:function Out(k){var s=1.70158;return--k*k*((s+1)*k+s)+1},InOut:function InOut(k){var s=2.5949095;return(k*=2)<1?k*k*((s+1)*k-s)*.5:.5*((k-=2)*k*((s+1)*k+s)+2)}},this.Bounce={In:function In(k){return 1-_this.Bounce.Out(1-k)},Out:function Out(k){return k<1/2.75?7.5625*k*k:k<2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k<2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375},InOut:function InOut(k){return k<.5?.5*_this.Bounce.In(2*k):.5*_this.Bounce.Out(2*k-1)+.5}}},MathTween=function MathTween(object,props,time,ease,delay,callback){function initMathTween(){TweenManager.clearTween(object),TweenManager.addMathTween(self),object.mathTween=self,ease=Interpolation.convertEase(ease),startTime=Date.now(),startTime+=delay,endValues=props,startValues={};for(var prop in endValues)"number"==typeof object[prop]&&(startValues[prop]=object[prop])}function clear(stop){if(object.mathTween=null,!stop)for(var prop in endValues)"number"==typeof endValues[prop]&&(object[prop]=endValues[prop]);TweenManager.removeMathTween(self)}classCallCheck(this,MathTween);var self=this,startTime=void 0,startValues=void 0,endValues=void 0,paused=void 0,elapsed=void 0;initMathTween(),this.update=function(t){if(!(paused||t<startTime)){var delta=ease(elapsed=(elapsed=(t-startTime)/time)>1?1:elapsed);for(var prop in startValues)if("number"==typeof startValues[prop]){var start=startValues[prop],end=endValues[prop];object[prop]=start+(end-start)*delta}1===elapsed&&(clear(),callback&&callback())}},this.pause=function(){paused=!0},this.resume=function(){paused=!1,startTime=Date.now()-elapsed*time},this.stop=function(){return clear(!0)}},SpringTween=function SpringTween(object,props,friction,ease,delay,callback){function initSpringTween(){TweenManager.clearTween(object),TweenManager.addMathTween(self),object.mathTween=self,startTime=Date.now(),startTime+=delay,endValues={},startValues={},velocityValues={},(props.x||props.y||props.z)&&(void 0===props.x&&(props.x=object.x),void 0===props.y&&(props.y=object.y),void 0===props.z&&(props.z=object.z)),count=0,damping=props.damping||.1,delete props.damping;for(var prop in props)"number"==typeof props[prop]&&(velocityValues[prop]=0,endValues[prop]=props[prop]);for(var _prop in props)"number"==typeof object[_prop]&&(startValues[_prop]=object[_prop]||0,props[_prop]=startValues[_prop])}function clear(stop){if(object.mathTween=null,!stop)for(var prop in endValues)"number"==typeof endValues[prop]&&(object[prop]=endValues[prop]);TweenManager.removeMathTween(self)}classCallCheck(this,SpringTween);var self=this,startTime=void 0,velocityValues=void 0,endValues=void 0,startValues=void 0,damping=void 0,count=void 0,paused=void 0;initSpringTween(),this.update=function(t){if(!(paused||t<startTime)){var vel=void 0;for(var prop in startValues)if("number"==typeof startValues[prop]){var a=(endValues[prop]-props[prop])*damping;velocityValues[prop]+=a,velocityValues[prop]*=friction,props[prop]+=velocityValues[prop],object[prop]=props[prop],vel=velocityValues[prop]}Math.abs(vel)<.001&&++count>30&&(clear(),callback&&callback())}},this.pause=function(){paused=!0},this.stop=function(){return clear(!0)}},TweenManager=function(){function TweenManager(){classCallCheck(this,TweenManager),this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"};var tweens=[],rendering=!1,updateTweens=function updateTweens(t){if(tweens.length)for(var i=0;i<tweens.length;i++)tweens[i].update(t);else rendering=!1,Render.stop(updateTweens)};this.addMathTween=function(tween){tweens.push(tween),rendering||(rendering=!0,Render.start(updateTweens))},this.removeMathTween=function(tween){var i=tweens.indexOf(tween);i>-1&&tweens.splice(i,1)}}return createClass(TweenManager,[{key:"tween",value:function tween(object,props,time,ease,delay,callback){"number"!=typeof delay&&(callback=delay,delay=0);var promise=null;"undefined"!=typeof Promise&&(promise=Promise.create(),callback&&promise.then(callback),callback=promise.resolve);var tween="spring"===ease?new SpringTween(object,props,time,ease,delay,callback):new MathTween(object,props,time,ease,delay,callback);return promise||tween}},{key:"clearTween",value:function clearTween(object){object.mathTween&&object.mathTween.stop()}},{key:"clearCSSTween",value:function clearCSSTween(object){object.cssTween&&object.cssTween.stop()}},{key:"checkTransform",value:function checkTransform(key){return this.TRANSFORMS.indexOf(key)>-1}},{key:"getEase",value:function getEase(name){var eases=this.CSS_EASES;return eases[name]||eases.easeOutCubic}},{key:"getAllTransforms",value:function getAllTransforms(object){for(var obj={},i=this.TRANSFORMS.length-1;i>-1;i--){var key=this.TRANSFORMS[i],val=object[key];0!==val&&"number"==typeof val&&(obj[key]=val)}return obj}},{key:"parseTransform",value:function parseTransform(props){var transforms="";if(void 0!==props.x||void 0!==props.y||void 0!==props.z){var translate="";translate+=(props.x||0)+"px, ",translate+=(props.y||0)+"px, ",transforms+="translate3d("+(translate+=(props.z||0)+"px")+")"}return void 0!==props.scale?transforms+="scale("+props.scale+")":(void 0!==props.scaleX&&(transforms+="scaleX("+props.scaleX+")"),void 0!==props.scaleY&&(transforms+="scaleY("+props.scaleY+")")),void 0!==props.rotation&&(transforms+="rotate("+props.rotation+"deg)"),void 0!==props.rotationX&&(transforms+="rotateX("+props.rotationX+"deg)"),void 0!==props.rotationY&&(transforms+="rotateY("+props.rotationY+"deg)"),void 0!==props.rotationZ&&(transforms+="rotateZ("+props.rotationZ+"deg)"),void 0!==props.skewX&&(transforms+="skewX("+props.skewX+"deg)"),void 0!==props.skewY&&(transforms+="skewY("+props.skewY+"deg)"),void 0!==props.perspective&&(transforms+="perspective("+props.perspective+"px)"),transforms}}]),TweenManager}(),CSSTransition=function CSSTransition(object,props,time,ease,delay,callback){function initProperties(){for(var key in props)TweenManager.checkTransform(key)?(transform.use=!0,transform[key]=props[key],delete props[key]):("number"==typeof props[key]||key.indexOf("-")>-1)&&properties.push(key);transform.use&&properties.push(Device.transformProperty),delete transform.use}function initCSSTween(){TweenManager.clearCSSTween(object),object.cssTween=self;for(var transition="",i=0;i<properties.length;i++)transition+=(transition.length?", ":"")+properties[i]+" "+time+"ms "+TweenManager.getEase(ease)+" "+delay+"ms";Delayed(function(){object.element.style[Device.vendor("Transition")]=transition,object.css(props),object.transform(transform),Delayed(function(){clear(),callback&&callback()},time+delay)},50)}function clear(){object.element.style[Device.vendor("Transition")]="",object.cssTween=null}classCallCheck(this,CSSTransition);var self=this,transform=TweenManager.getAllTransforms(object),properties=[];initProperties(),initCSSTween(),this.stop=function(){return clear()}},Interface=function(){function Interface(name,node){classCallCheck(this,Interface),this.events=new EventManager;var stage=window.Alien&&window.Alien.Stage?window.Alien.Stage:document.body,element=node||document.createElement("div");"."===name[0]?element.className=name.substr(1):element.id=name,element.style.position="absolute",stage.appendChild(element),this.element=element,this.name=name}return createClass(Interface,[{key:"initClass",value:function initClass(object,params){var child=new object(params);return child.element&&this.element.appendChild(child.element),child.parent=this,child}},{key:"create",value:function create(name,node){var child=new Interface(name,node);return this.element.appendChild(child.element),child.parent=this,child}},{key:"destroy",value:function destroy(){return this.loop&&Render.stop(this.loop),this.element.parentNode.removeChild(this.element),null}},{key:"empty",value:function empty(){return this.element.innerHTML="",this}},{key:"text",value:function text(_text){return void 0!==_text?(this.element.textContent=_text,this):this.element.textContent}},{key:"html",value:function html(text){return void 0!==text?(this.element.innerHTML=text,this):this.element.innerHTML}},{key:"hide",value:function hide(){return this.element.style.display="none",this}},{key:"show",value:function show(){return this.element.style.display="",this}},{key:"visible",value:function visible(){return this.element.style.visibility="visible",this}},{key:"invisible",value:function invisible(){return this.element.style.visibility="hidden",this}},{key:"setZ",value:function setZ(z){return this.element.style.zIndex=z,this}},{key:"clearAlpha",value:function clearAlpha(){return this.element.style.opacity="",this}},{key:"size",value:function size(w,h){return void 0!==w&&(void 0===h&&(h=w),"string"==typeof w?("string"!=typeof h&&(h+="px"),this.element.style.width=w,this.element.style.height=h):(this.element.style.width=w+"px",this.element.style.height=h+"px",this.element.style.backgroundSize=w+"px "+h+"px")),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this}},{key:"enablePointer",value:function enablePointer(bool){return this.element.style.pointerEvents=bool?"auto":"none",this}},{key:"fontStyle",value:function fontStyle(fontFamily,fontSize,color,_fontStyle){return this.css({fontFamily:fontFamily,fontSize:fontSize,color:color,fontStyle:_fontStyle}),this}},{key:"bg",value:function bg(src,x,y,repeat){return-1===src.indexOf(".")?this.element.style.backgroundColor=src:this.element.style.backgroundImage="url("+src+")",void 0!==x&&(x="number"==typeof x?x+"px":x,y="number"==typeof y?y+"px":y,this.element.style.backgroundPosition=x+" "+y),repeat&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=repeat),"cover"!==x&&"contain"!==x||(this.element.style.backgroundSize=x,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==y?y+" "+repeat:"center"),this}},{key:"center",value:function center(x,y,noPos){var css={};return void 0===x?(css.left="50%",css.top="50%",css.marginLeft=-this.width/2,css.marginTop=-this.height/2):(x&&(css.left="50%",css.marginLeft=-this.width/2),y&&(css.top="50%",css.marginTop=-this.height/2)),noPos&&(delete css.left,delete css.top),this.css(css),this}},{key:"mask",value:function mask(src){return this.element.style[Device.vendor("Mask")]=(src.indexOf(".")>-1?"url("+src+")":src)+" no-repeat",this.element.style[Device.vendor("MaskSize")]="contain",this}},{key:"blendMode",value:function blendMode(mode,bg){return this.element.style[bg?"background-blend-mode":"mix-blend-mode"]=mode,this}},{key:"css",value:function css(props,value){if("object"!==(void 0===props?"undefined":_typeof(props))){if(value)return this.element.style[props]=value,this;var style=this.element.style[props];return"number"!=typeof style&&(style.indexOf("px")>-1&&(style=Number(style.slice(0,-2))),"opacity"===props&&(style=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),style||(style=0),style}for(var key in props){var val=props[key];"string"!=typeof val&&"number"!=typeof val||("string"!=typeof val&&"opacity"!==key&&"zIndex"!==key&&(val+="px"),this.element.style[key]=val)}return this}},{key:"transform",value:function transform(props){if(props)for(var key in props)"number"==typeof props[key]&&(this[key]=props[key]);else props=this;return this.element.style[Device.vendor("Transform")]=TweenManager.parseTransform(props),this}},{key:"enable3D",value:function enable3D(perspective,x,y){return this.element.style[Device.vendor("TransformStyle")]="preserve-3d",perspective&&(this.element.style[Device.vendor("Perspective")]=perspective+"px"),void 0!==x&&(x="number"==typeof x?x+"px":x,y="number"==typeof y?y+"px":y,this.element.style[Device.vendor("PerspectiveOrigin")]=x+" "+y),this}},{key:"disable3D",value:function disable3D(){return this.element.style[Device.vendor("TransformStyle")]="",this.element.style[Device.vendor("Perspective")]="",this}},{key:"transformPoint",value:function transformPoint(x,y,z){var origin="";return void 0!==x&&(origin+="number"==typeof x?x+"px ":x+" "),void 0!==y&&(origin+="number"==typeof y?y+"px ":y+" "),void 0!==z&&(origin+="number"==typeof z?z+"px":z),this.element.style[Device.vendor("TransformOrigin")]=origin,this}},{key:"tween",value:function tween(props,time,ease,delay,callback){"number"!=typeof delay&&(callback=delay,delay=0);var promise=null;"undefined"!=typeof Promise&&(promise=Promise.create(),callback&&promise.then(callback),callback=promise.resolve);var tween=new CSSTransition(this,props,time,ease,delay,callback);return promise||tween}},{key:"clearTransform",value:function clearTransform(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style[Device.transformProperty]="",this}},{key:"stopTween",value:function stopTween(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}},{key:"attr",value:function attr(_attr,value){if(_attr&&value)""===value?this.element.removeAttribute(_attr):this.element.setAttribute(_attr,value);else if(_attr)return this.element.getAttribute(_attr);return this}},{key:"startRender",value:function startRender(callback){this.loop=callback,Render.start(callback)}},{key:"stopRender",value:function stopRender(callback){this.loop=null,Render.stop(callback)}},{key:"click",value:function click(callback){var _this=this;return this.element.addEventListener("click",function(e){e.object="hit"===_this.element.className?_this.parent:_this,e.action="click",e.pageX||(e.pageX=e.clientX,e.pageY=e.clientY),callback&&callback(e)},!1),this.element.style.cursor="pointer",this}},{key:"hover",value:function hover(callback){var _this2=this;return this.element.addEventListener("mouseover",function(e){e.object="hit"===_this2.element.className?_this2.parent:_this2,e.action="over",callback&&callback(e)},!1),this.element.addEventListener("mouseout",function(e){e.object="hit"===_this2.element.className?_this2.parent:_this2,e.action="out",callback&&callback(e)},!1),this}},{key:"interact",value:function interact(overCallback,clickCallback){this.hit=this.create(".hit").css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}).enablePointer(!0).hover(overCallback).click(clickCallback)}},{key:"split",value:function split(){var by=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",style={position:"relative",display:"block",width:"auto",height:"auto",margin:0,padding:0,cssFloat:"left"},array=[],split=this.text().split(by);this.empty();for(var i=0;i<split.length;i++)" "===split[i]&&(split[i]="&nbsp;"),array.push(this.create(".t",document.createElement("span")).html(split[i]).css(style)),""!==by&&i<split.length-1&&array.push(this.create(".t",document.createElement("span")).html(by).css(style));return array}}]),Interface}(),Canvas=function(_Interface){function Canvas(name,w,h){classCallCheck(this,Canvas);var _this=possibleConstructorReturn(this,(Canvas.__proto__||Object.getPrototypeOf(Canvas)).call(this,name,document.createElement("canvas")));_this.context=_this.element.getContext("2d");var ratio=Device.system.retina?2:1;return _this.element.width=w*ratio,_this.element.height=h*ratio,_this.size(w,h),_this.context.scale(ratio,ratio),_this}return inherits(Canvas,_Interface),createClass(Canvas,[{key:"toDataURL",value:function toDataURL(type,quality){return this.element.toDataURL(type,quality)}},{key:"getImageData",value:function getImageData(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.width,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.height;return this.imageData=this.context.getImageData(x,y,w,h),this.imageData}},{key:"getPixel",value:function getPixel(x,y,dirty){this.imageData&&!dirty||this.getImageData(0,0,this.width,this.height);var imgData={},index=4*(x+y*this.width),pixels=this.imageData.data;return imgData.r=pixels[index],imgData.g=pixels[index+1],imgData.b=pixels[index+2],imgData.a=pixels[index+3],imgData}}]),Canvas}(Interface),DynamicObject=function DynamicObject(props){var _this=this;classCallCheck(this,DynamicObject);for(var key in props)this[key]=props[key];this.lerp=function(v,ratio){for(var _key in props)_this[_key]+=(v[_key]-_this[_key])*ratio;return _this}},Utils=function(){function Utils(){classCallCheck(this,Utils)}return createClass(Utils,[{key:"rand",value:function rand(min,max){return new DynamicObject({v:min}).lerp({v:max},Math.random()).v}},{key:"doRandom",value:function doRandom(min,max,precision){if("number"==typeof precision){var p=Math.pow(10,precision);return Math.round(this.rand(min,max)*p)/p}return Math.round(this.rand(min-.5,max+.5))}},{key:"headsTails",value:function headsTails(heads,tails){return this.doRandom(0,1)?tails:heads}},{key:"toDegrees",value:function toDegrees(rad){return rad*(180/Math.PI)}},{key:"toRadians",value:function toRadians(deg){return deg*(Math.PI/180)}},{key:"findDistance",value:function findDistance(p1,p2){var dx=p2.x-p1.x,dy=p2.y-p1.y;return Math.sqrt(dx*dx+dy*dy)}},{key:"timestamp",value:function timestamp(){return(Date.now()+this.doRandom(0,99999)).toString()}},{key:"clamp",value:function clamp(num,min,max){return Math.min(Math.max(num,min),max)}},{key:"constrain",value:function constrain(num,min,max){return Math.min(Math.max(num,Math.min(min,max)),Math.max(min,max))}},{key:"convertRange",value:function convertRange(oldValue,oldMin,oldMax,newMin,newMax,constrain){var newValue=(oldValue-oldMin)*(newMax-newMin)/(oldMax-oldMin)+newMin;return constrain?this.constrain(newValue,newMin,newMax):newValue}},{key:"cloneObject",value:function cloneObject(object){return JSON.parse(JSON.stringify(object))}},{key:"mergeObject",value:function mergeObject(){for(var object={},_len=arguments.length,objects=Array(_len),_key=0;_key<_len;_key++)objects[_key]=arguments[_key];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=objects[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var obj=_step.value;for(var key in obj)object[key]=obj[key]}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return object}},{key:"queryString",value:function queryString(key){return decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(key).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}}]),Utils}(),Mouse=function Mouse(){var _this=this;classCallCheck(this,Mouse),this.x=0,this.y=0;var moved=function moved(e){_this.x=e.x,_this.y=e.y};this.capture=function(){_this.x=0,_this.y=0,window.addEventListener("mousemove",moved,!1)},this.stop=function(){_this.x=0,_this.y=0,window.removeEventListener("mousemove",moved,!1)}},AssetLoader=function AssetLoader(assets,callback){function loadAsset(asset){var image=new Image;image.src=asset,image.onload=assetLoaded}function assetLoaded(){percent=++loaded/total,self.events.fire(Events.PROGRESS,{percent:percent}),loaded===total&&(self.complete=!0,self.events.fire(Events.COMPLETE),callback&&callback())}classCallCheck(this,AssetLoader);var self=this;this.events=new EventManager,this.CDN=Config.CDN||"";for(var total=assets.length,loaded=0,percent=0,i=0;i<assets.length;i++)loadAsset(this.CDN+assets[i])},XHR=function XHR(){var _this=this;classCallCheck(this,XHR),this.headers={},this.options={};var serial=[],serialize=function serialize(key,data){if("object"===(void 0===data?"undefined":_typeof(data)))for(var i in data){var newKey=key+"["+i+"]";"object"===_typeof(data[i])?serialize(newKey,data[i]):serial.push(newKey+"="+data[i])}else serial.push(key+"="+data)};this.get=function(url,data,callback,type){if("function"==typeof data)type=callback,callback=data,data=null;else if("object"===(void 0===data?"undefined":_typeof(data))){for(var key in data)serialize(key,data[key]);data=(data=(data=serial.join("&")).replace(/\[/g,"%5B")).replace(/\]/g,"%5D"),serial=null,url+="?"+data}var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),"text"===type&&xhr.overrideMimeType("text/plain"),"json"===type&&xhr.setRequestHeader("Accept","application/json");for(var _key in _this.headers)xhr.setRequestHeader(_key,_this.headers[_key]);for(var _key2 in _this.options)xhr[_key2]=_this.options[_key2];var promise=null;return"undefined"!=typeof Promise&&(promise=Promise.create(),callback&&promise.then(callback),callback=promise.resolve),xhr.send(),xhr.onreadystatechange=function(){if(4===xhr.readyState&&200===xhr.status){var _data=xhr.responseText;if("text"===type)callback&&callback(_data);else try{callback&&callback(JSON.parse(_data))}catch(e){throw e}}0!=xhr.status&&400!=xhr.status&&401!=xhr.status&&404!=xhr.status&&500!=xhr.status||callback&&(promise?promise.reject(xhr):callback(xhr))},promise||xhr},this.post=function(url,data,callback,type){if("function"==typeof data)type=callback,callback=data,data=null;else if("object"===(void 0===data?"undefined":_typeof(data)))if("json"===type)data=JSON.stringify(data);else{for(var key in data)serialize(key,data[key]);data=(data=(data=serial.join("&")).replace(/\[/g,"%5B")).replace(/\]/g,"%5D"),serial=null}var xhr=new XMLHttpRequest;xhr.open("POST",url,!0),"text"===type&&xhr.overrideMimeType("text/plain"),"json"===type&&xhr.setRequestHeader("Accept","application/json"),xhr.setRequestHeader("Content-Type","json"===type?"application/json":"application/x-www-form-urlencoded");for(var _key3 in _this.headers)xhr.setRequestHeader(_key3,_this.headers[_key3]);for(var _key4 in _this.options)xhr[_key4]=_this.options[_key4];var promise=null;return"undefined"!=typeof Promise&&(promise=Promise.create(),callback&&promise.then(callback),callback=promise.resolve),xhr.send(),xhr.onreadystatechange=function(){if(4===xhr.readyState&&200===xhr.status){var _data2=xhr.responseText;if("text"===type)callback&&callback(_data2);else try{callback&&callback(JSON.parse(_data2))}catch(e){throw e}}0!=xhr.status&&400!=xhr.status&&401!=xhr.status&&404!=xhr.status&&500!=xhr.status||callback&&(promise?promise.reject(xhr):callback(xhr))},promise||xhr}},Stage=function(_Interface){function Stage(){function initHTML(){self.css({overflow:"hidden"})}function addListeners(){window.addEventListener("focus",function(){"focus"!==last&&(last="focus",window.events.fire(Events.BROWSER_FOCUS,{type:"focus"}))},!1),window.addEventListener("blur",function(){"blur"!==last&&(last="blur",window.events.fire(Events.BROWSER_FOCUS,{type:"blur"}))},!1),window.addEventListener("resize",function(){window.events.fire(Events.RESIZE)},!1),window.events.add(Events.RESIZE,resizeHandler)}function resizeHandler(){self.size()}classCallCheck(this,Stage);var _this=possibleConstructorReturn(this,(Stage.__proto__||Object.getPrototypeOf(Stage)).call(this,"Stage")),self=_this,last=void 0;return initHTML(),addListeners(),resizeHandler(),_this}return inherits(Stage,_Interface),Stage}(Interface);"undefined"==typeof Promise||Promise.create||(Promise.create=function(){var resolve=void 0,reject=void 0,promise=new Promise(function(res,rej){resolve=res,reject=rej});return promise.resolve=resolve,promise.reject=reject,promise}),window.getURL||(window.getURL=function(url){var target=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";return window.open(url,target)}),window.Delayed||(window.Delayed=function(callback){var time=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,params=arguments[2];return window.setTimeout(function(){callback&&callback(params)},time)}),window.Global||(window.Global={}),window.Config||(window.Config={}),Function(function(){var instances="";return["Render","Utils","Device","Mouse","TweenManager","Interpolation","XHR","Stage"].forEach(function(i){instances+="try {"+i+" = new "+i+"();} catch(e) {}"}),instances}())();
