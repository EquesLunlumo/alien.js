//   _  /._  _  r6 2017-11-29 9:53pm
//  /_|///_'/ /
function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Alien={})}(this,function(e){"use strict";var t=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"random",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(void 0===e)return Math.random();if(e===t)return e;e=e||0,t=t||1;var i=Math.pow(10,n);return Math.round((e+Math.random()*(t-e))*i)/i}},{key:"headsTails",value:function(e,t){return this.random(0,1)?t:e}},{key:"queryString",value:function(e){var t=decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(e).replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return!(!t.length||"0"===t||"false"===t)&&t}},{key:"getConstructorName",value:function(e){return e.constructor.name||e.constructor.toString().match(/function ([^(]+)/)[1]}},{key:"nullObject",value:function(e){for(var t in e)void 0!==e[t]&&(e[t]=null);return null}},{key:"cloneObject",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"mergeObject",value:function(){for(var e={},t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=!0,s=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;for(var h in l)e[h]=l[h]}}catch(e){s=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw a}}return e}},{key:"toArray",value:function(e){return Object.keys(e).map(function(t){return e[t]})}},{key:"cloneArray",value:function(e){return e.slice(0)}},{key:"basename",value:function(e,t){var n=e.split("/").last();return t?n:n.split(".")[0]}},{key:"extension",value:function(e){return e.split(".").last().split("?")[0].toLowerCase()}},{key:"base64",value:function(e){return window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}},{key:"timestamp",value:function(){return(Date.now()+this.random(0,99999)).toString()}},{key:"pad",value:function(e){return e<10?"0"+e:e}}]),e}()),n=function e(){var n=this;_classCallCheck(this,e);var i={};this.add=function(e,t){i[e]||(i[e]=[]),i[e].push(t)},this.remove=function(e,t){i[e]&&i[e].remove(t)},this.destroy=function(){for(var e in i)for(var r=i[e].length-1;r>-1;r--)i[e][r]=null,i[e].splice(r,1);return t.nullObject(n)},this.fire=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i[e]&&i[e].forEach(function(e){return e(t)})}};n.VISIBILITY="visibility",n.KEYBOARD_PRESS="keyboard_press",n.KEYBOARD_DOWN="keyboard_down",n.KEYBOARD_UP="keyboard_up",n.RESIZE="resize",n.COMPLETE="complete",n.PROGRESS="progress",n.UPDATE="update",n.LOADED="loaded",n.ERROR="error",n.READY="ready",n.HOVER="hover",n.CLICK="click",window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(){var e=Date.now();return function(t){return setTimeout(function(){return t(Date.now()-e)},1e3/60)}}());var i=new function e(){function t(e){var n=Math.min(s,e-a);a=e,i.TIME=e,i.DELTA=n;for(var o=r.length-1;o>=0;o--){var u=r[o];if(u)if(u.fps){if(e-u.last<1e3/u.fps)continue;u(++u.frame),u.last=e}else u(e,n);else r.remove(u)}i.paused||requestAnimationFrame(t)}var n=this;_classCallCheck(this,e);var i=this,r=[],s=200,a=performance.now();requestAnimationFrame(t),this.start=function(e,t){t&&(e.fps=t,e.last=-1/0,e.frame=-1),~r.indexOf(e)||r.unshift(e)},this.stop=function(e){r.remove(e)},this.pause=function(){n.paused=!0},this.resume=function(){n.paused&&(n.paused=!1,requestAnimationFrame(t))}},r=new(function(){function e(){var t=this;_classCallCheck(this,e),this.agent=navigator.userAgent.toLowerCase(),this.pixelRatio=window.devicePixelRatio,this.prefix=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(webkit|moz|ms)-/)||""===e.OLink&&["","o"])[1];return{lowercase:t,js:t[0].toUpperCase()+t.substr(1)}}(),this.transformProperty=function(){var e=void 0;switch(t.prefix.lowercase){case"webkit":e="-webkit-transform";break;case"moz":e="-moz-transform";break;case"ms":e="-ms-transform";break;case"o":e="-o-transform";break;default:e="transform"}return e}(),this.mobile=!(!("ontouchstart"in window||"onpointerdown"in window)||!this.detect(["ios","iphone","ipad","android","blackberry"]))&&{},this.tablet=window.innerWidth>window.innerHeight?document.body.clientWidth>800:document.body.clientHeight>800,this.phone=!this.tablet}return _createClass(e,[{key:"detect",value:function(e){"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)if(~this.agent.indexOf(e[t]))return!0;return!1}},{key:"vendor",value:function(e){return this.prefix.js+e}},{key:"vibrate",value:function(e){navigator.vibrate&&navigator.vibrate(e)}}]),e}()),s=new function e(){var t=this;_classCallCheck(this,e),this.convertEase=function(e){return function(){var n=void 0;switch(e){case"easeInQuad":n=t.Quad.In;break;case"easeInCubic":n=t.Cubic.In;break;case"easeInQuart":n=t.Quart.In;break;case"easeInQuint":n=t.Quint.In;break;case"easeInSine":n=t.Sine.In;break;case"easeInExpo":n=t.Expo.In;break;case"easeInCirc":n=t.Circ.In;break;case"easeInElastic":n=t.Elastic.In;break;case"easeInBack":n=t.Back.In;break;case"easeInBounce":n=t.Bounce.In;break;case"easeOutQuad":n=t.Quad.Out;break;case"easeOutCubic":n=t.Cubic.Out;break;case"easeOutQuart":n=t.Quart.Out;break;case"easeOutQuint":n=t.Quint.Out;break;case"easeOutSine":n=t.Sine.Out;break;case"easeOutExpo":n=t.Expo.Out;break;case"easeOutCirc":n=t.Circ.Out;break;case"easeOutElastic":n=t.Elastic.Out;break;case"easeOutBack":n=t.Back.Out;break;case"easeOutBounce":n=t.Bounce.Out;break;case"easeInOutQuad":n=t.Quad.InOut;break;case"easeInOutCubic":n=t.Cubic.InOut;break;case"easeInOutQuart":n=t.Quart.InOut;break;case"easeInOutQuint":n=t.Quint.InOut;break;case"easeInOutSine":n=t.Sine.InOut;break;case"easeInOutExpo":n=t.Expo.InOut;break;case"easeInOutCirc":n=t.Circ.InOut;break;case"easeInOutElastic":n=t.Elastic.InOut;break;case"easeInOutBack":n=t.Back.InOut;break;case"easeInOutBounce":n=t.Bounce.InOut;break;case"linear":n=t.Linear.None}return n}()||t.Cubic.Out},this.Linear={None:function(e){return e}},this.Quad={In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},this.Cubic={In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},this.Quart={In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},this.Quint={In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},this.Sine={In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},this.Expo={In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},this.Circ={In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},this.Elastic={In:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),-t*Math.pow(2,10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n))},Out:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin((e-i)*(2*Math.PI)/n)+1)},InOut:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),(e*=2)<1?t*Math.pow(2,10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n)*-.5:t*Math.pow(2,-10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n)*.5+1)}},this.Back={In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},this.Bounce={In:function(e){return 1-this.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*this.Bounce.In(2*e):.5*this.Bounce.Out(2*e-1)+.5}}},a=function e(n,i,r,a,u,l,h){function c(){if(!n&&!i)return!1;n.mathTween=null,o.removeMathTween(d),t.nullObject(d),n.mathTweens&&n.mathTweens.remove(d)}var f=this;_classCallCheck(this,e);var d=this,v=void 0,y=void 0,p=void 0,m=void 0,g=void 0,b=void 0,w=void 0;!function(){!n.multiTween&&n.mathTween&&o.clearTween(n),o.addMathTween(d),n.mathTween=d,n.multiTween&&(n.mathTweens||(n.mathTweens=[]),n.mathTweens.push(d)),a=s.convertEase(a),v=performance.now(),v+=u,p=i,y={},i.spring&&(g=i.spring),i.damping&&(b=i.damping);for(var e in p)"number"==typeof n[e]&&(y[e]=n[e])}(),this.update=function(e){if(!(m||e<v)){w=(w=(e-v)/r)>1?1:w;var t=f.interpolate(w);l&&l(t),1===w&&(h&&h(),c())}},this.stop=function(){c()},this.pause=function(){m=!0},this.resume=function(){m=!1,v=performance.now()-w*r},this.interpolate=function(e){var t=a(e,g,b);for(var i in y)if("number"==typeof y[i]&&"number"==typeof p[i]){var r=y[i],s=p[i];n[i]=r+(s-r)*t}return t}},o=new(function(){function e(){_classCallCheck(this,e);var t=this;this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"};var n=[];i.start(function(e){for(var i=n.length-1;i>=0;i--){var r=n[i];r.update?r.update(e):t.removeMathTween(r)}}),this.addMathTween=function(e){n.push(e)},this.removeMathTween=function(e){n.remove(e)}}return _createClass(e,[{key:"tween",value:function(e,t,n,i,r,s,o){"number"!=typeof r&&(o=s,s=r,r=0);var u=null;"undefined"!=typeof Promise&&(u=Promise.create(),s&&u.then(s),s=u.resolve);var l=new a(e,t,n,i,r,o,s);return u||l}},{key:"clearTween",value:function(e){if(e.mathTween&&e.mathTween.stop(),e.mathTweens){for(var t=e.mathTweens,n=0;n<t.length;n++){var i=t[n];i&&i.stop()}e.mathTweens=null}}},{key:"parseTransform",value:function(e){var t="";if(void 0!==e.x||void 0!==e.y||void 0!==e.z){var n="";n+=(e.x||0)+"px, ",n+=(e.y||0)+"px, ",t+="translate3d("+(n+=(e.z||0)+"px")+")"}return void 0!==e.scale?t+="scale("+e.scale+")":(void 0!==e.scaleX&&(t+="scaleX("+e.scaleX+")"),void 0!==e.scaleY&&(t+="scaleY("+e.scaleY+")")),void 0!==e.rotation&&(t+="rotate("+e.rotation+"deg)"),void 0!==e.rotationX&&(t+="rotateX("+e.rotationX+"deg)"),void 0!==e.rotationY&&(t+="rotateY("+e.rotationY+"deg)"),void 0!==e.rotationZ&&(t+="rotateZ("+e.rotationZ+"deg)"),void 0!==e.skewX&&(t+="skewX("+e.skewX+"deg)"),void 0!==e.skewY&&(t+="skewY("+e.skewY+"deg)"),void 0!==e.perspective&&(t+="perspective("+e.perspective+"px)"),t}},{key:"isTransform",value:function(e){return~this.TRANSFORMS.indexOf(e)}},{key:"getAllTransforms",value:function(e){for(var t={},n=this.TRANSFORMS.length-1;n>-1;n--){var i=this.TRANSFORMS[n],r=e[i];0!==r&&"number"==typeof r&&(t[i]=r)}return t}},{key:"getEase",value:function(e){return this.CSS_EASES[e]||this.CSS_EASES.easeOutCubic}}]),e}()),u=function e(n,i,s,a,u,l){function h(){return!f||f.kill||!n||!n.element}function c(){h()||(f.kill=!0,n.element.style[r.vendor("Transition")]="",n.cssTween=null,n.willChange(null),n=i=null,t.nullObject(f))}_classCallCheck(this,e);var f=this,d=void 0,v=void 0;!function(){var e=o.getAllTransforms(n),t=[];for(var s in i)o.isTransform(s)?(e.use=!0,e[s]=i[s],delete i[s]):("number"==typeof i[s]||~s.indexOf("-"))&&t.push(s);e.use&&(t.push(r.transformProperty),delete e.use),d=e,v=t}(),function(){if(!h()){n.cssTween&&(n.cssTween.kill=!0),n.cssTween=f;var e=function(e,t,n){for(var i="",r="",s=0;s<v.length;s++){var a=v[s];i+=(i.length?", ":"")+a,r+=(r.length?", ":"")+a+" "+e+"ms "+o.getEase(t)+" "+n+"ms"}return{props:i,transition:r}}(s,a,u);n.willChange(e.props),setTimeout(function(){h()||(n.element.style[r.vendor("Transition")]=e.transition,n.css(i),n.transform(d),setTimeout(function(){h()||(c(),l&&l())},s+u))},50)}}(),this.stop=c},l=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",r=arguments[2];if(_classCallCheck(this,e),this.events=new n,this.classes=[],this.timers=[],this.loops=[],void 0!==t){if("string"==typeof t){if(this.name=t,this.type=i,"svg"===this.type){var s=r||"svg";r=!0,this.element=document.createElementNS("http://www.w3.org/2000/svg",s),this.element.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")}else this.element=document.createElement(this.type),"."!==t[0]?this.element.id=t:this.element.className=t.substr(1);this.element.style.position="absolute",r||(window.Alien&&window.Alien.Stage?window.Alien.Stage:document.body).appendChild(this.element)}else this.element=t;this.element.object=this}}return _createClass(e,[{key:"initClass",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=new(Function.prototype.bind.apply(e,[null].concat(n)));return this.add(r),r}},{key:"add",value:function(e){var t=this.element;return e.element?(t.appendChild(e.element),this.classes.push(e),e.parent=this):e.nodeName&&t.appendChild(e),this}},{key:"delayedCall",value:function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=setTimeout(function(){e&&e.apply(void 0,n)},r);return this.timers.push(s),this.timers.length>50&&this.timers.shift(),s}},{key:"clearTimers",value:function(){for(var e=this.timers.length-1;e>=0;e--)clearTimeout(this.timers[e]);this.timers.length=0}},{key:"startRender",value:function(e,t){this.loops.push(e),i.start(e,t)}},{key:"stopRender",value:function(e){this.loops.remove(e),i.stop(e)}},{key:"clearRenders",value:function(){for(var e=this.loops.length-1;e>=0;e--)this.stopRender(this.loops[e]);this.loops.length=0}},{key:"destroy",value:function(){this.removed=!0;var e=this.parent;e&&!e.removed&&e.remove&&e.remove(this);for(var n=this.classes.length-1;n>=0;n--){var i=this.classes[n];i&&i.destroy&&i.destroy()}return this.classes.length=0,this.element.object=null,this.clearRenders(),this.clearTimers(),this.events.destroy(),t.nullObject(this)}},{key:"remove",value:function(e){e.element.parentNode.removeChild(e.element),this.classes.remove(e)}},{key:"create",value:function(t,n){var i=new e(t,n);return this.add(i),i}},{key:"clone",value:function(){return new e(this.element.cloneNode(!0))}},{key:"empty",value:function(){return this.element.innerHTML="",this}},{key:"text",value:function(e){return void 0===e?this.element.textContent:(this.element.textContent=e,this)}},{key:"html",value:function(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)}},{key:"hide",value:function(){return this.element.style.display="none",this}},{key:"show",value:function(){return this.element.style.display="",this}},{key:"visible",value:function(){return this.element.style.visibility="visible",this}},{key:"invisible",value:function(){return this.element.style.visibility="hidden",this}},{key:"setZ",value:function(e){return this.element.style.zIndex=e,this}},{key:"clearAlpha",value:function(){return this.element.style.opacity="",this}},{key:"size",value:function(e,t){return void 0!==e&&(void 0===t&&(t=e),"string"==typeof e?("string"!=typeof t&&(t+="px"),this.element.style.width=e,this.element.style.height=t):(this.element.style.width=e+"px",this.element.style.height=t+"px",this.element.style.backgroundSize=e+"px "+t+"px")),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this}},{key:"mouseEnabled",value:function(e){return this.element.style.pointerEvents=e?"auto":"none",this}},{key:"fontStyle",value:function(e,t,n,i){return this.css({fontFamily:e,fontSize:t,color:n,fontStyle:i}),this}},{key:"bg",value:function(e,t,n,i){return e.includes(["data:","."])?this.element.style.backgroundImage="url("+e+")":this.element.style.backgroundColor=e,void 0!==t&&(t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,this.element.style.backgroundPosition=t+" "+n),i&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=i),"cover"!==t&&"contain"!==t||(this.element.style.backgroundSize=t,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==n?n+" "+i:"center"),this}},{key:"center",value:function(e,t,n){var i={};return void 0===e?(i.left="50%",i.top="50%",i.marginLeft=-this.width/2,i.marginTop=-this.height/2):(e&&(i.left="50%",i.marginLeft=-this.width/2),t&&(i.top="50%",i.marginTop=-this.height/2)),n&&(delete i.left,delete i.top),this.css(i),this}},{key:"mask",value:function(e){return this.element.style[r.vendor("Mask")]=(~e.indexOf(".")?"url("+e+")":e)+" no-repeat",this.element.style[r.vendor("MaskSize")]="contain",this}},{key:"blendMode",value:function(e,t){return this.element.style[t?"background-blend-mode":"mix-blend-mode"]=e,this}},{key:"css",value:function(e,t){if("object"!==(void 0===e?"undefined":_typeof(e))){if(t)return this.element.style[e]=t,this;var n=this.element.style[e];return"number"!=typeof n&&(~n.indexOf("px")&&(n=Number(n.slice(0,-2))),"opacity"===e&&(n=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),n||(n=0),n}for(var i in e){var r=e[i];"string"!=typeof r&&"number"!=typeof r||("string"!=typeof r&&"opacity"!==i&&"zIndex"!==i&&(r+="px"),this.element.style[i]=r)}return this}},{key:"transform",value:function(e){if(e)for(var t in e)"number"==typeof e[t]&&(this[t]=e[t]);else e=this;return this.element.style[r.vendor("Transform")]=o.parseTransform(e),this}},{key:"willChange",value:function(e){if("boolean"==typeof e)this.willChangeLock=e;else if(this.willChangeLock)return;var t="string"==typeof e;this.element.style["will-change"]=e?t?e:r.transformProperty+", opacity":""}},{key:"backfaceVisibility",value:function(e){this.element.style[r.vendor("BackfaceVisibility")]=e?"visible":"hidden"}},{key:"enable3D",value:function(e,t,n){return this.element.style[r.vendor("TransformStyle")]="preserve-3d",e&&(this.element.style[r.vendor("Perspective")]=e+"px"),void 0!==t&&(t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,this.element.style[r.vendor("PerspectiveOrigin")]=t+" "+n),this}},{key:"disable3D",value:function(){return this.element.style[r.vendor("TransformStyle")]="",this.element.style[r.vendor("Perspective")]="",this}},{key:"transformPoint",value:function(e,t,n){var i="";return void 0!==e&&(i+="number"==typeof e?e+"px ":e+" "),void 0!==t&&(i+="number"==typeof t?t+"px ":t+" "),void 0!==n&&(i+="number"==typeof n?n+"px":n),this.element.style[r.vendor("TransformOrigin")]=i,this}},{key:"tween",value:function(e,t,n,i,r){"number"!=typeof i&&(r=i,i=0);var s=null;"undefined"!=typeof Promise&&(s=Promise.create(),r&&s.then(r),r=s.resolve);var a=new u(this,e,t,n,i,r);return s||a}},{key:"clearTransform",value:function(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style[r.transformProperty]="",this}},{key:"clearTween",value:function(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}},{key:"attr",value:function(e,t){return void 0===t?this.element.getAttribute(e):(""===t?this.element.removeAttribute(e):this.element.setAttribute(e,t),this)}},{key:"convertTouchEvent",value:function(e){var t={};return t.x=0,t.y=0,e?(e.touches||e.changedTouches?e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t):t}},{key:"click",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="click",e&&e(n)};return this.element.addEventListener("click",n,!0),this.element.style.cursor="pointer",this}},{key:"hover",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="mouseout"===n.type?"out":"over",e&&e(n)};return this.element.addEventListener("mouseover",n,!0),this.element.addEventListener("mouseout",n,!0),this}},{key:"press",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="mousedown"===n.type?"down":"up",e&&e(n)};return this.element.addEventListener("mousedown",n,!0),this.element.addEventListener("mouseup",n,!0),this}},{key:"bind",value:function(e,t){var n=this;"touchstart"!==e||r.mobile?"touchmove"!==e||r.mobile?"touchend"!==e||r.mobile||(e="mouseup"):e="mousemove":e="mousedown",this.events["bind_"+e]||(this.events["bind_"+e]=[]);var i=this.events["bind_"+e];i.push({target:this.element,callback:t});var s=function(e){var t=n.convertTouchEvent(e);e.x=t.x,e.y=t.y,i.forEach(function(t){t.target===e.currentTarget&&t.callback(e)})};return this.events["fn_"+e]||(this.events["fn_"+e]=s,this.element.addEventListener(e,s,!0)),this}},{key:"unbind",value:function(e,t){"touchstart"!==e||r.mobile?"touchmove"!==e||r.mobile?"touchend"!==e||r.mobile||(e="mouseup"):e="mousemove":e="mousedown";var n=this.events["bind_"+e];return n?(n.forEach(function(e,i){e.callback===t&&n.splice(i,1)}),this.events["fn_"+e]&&!n.length&&(this.element.removeEventListener(e,this.events["fn_"+e],!0),this.events["fn_"+e]=null),this):this}},{key:"interact",value:function(e,t){return this.hit=this.create(".hit"),this.hit.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}),r.mobile?this.hit.touchClick(e,t):this.hit.hover(e).click(t),this}},{key:"touchClick",value:function(e,t){var n=this,i={},r=void 0,s=void 0,a=void 0,o=function(e){var t=n.convertTouchEvent(e);e.touchX=t.x,e.touchY=t.y,i.x=e.touchX,i.y=e.touchY};return this.element.addEventListener("touchmove",function(e){if(!n.element)return!1;a=n.convertTouchEvent(e),s=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}(i,a)>5},{passive:!0}),this.element.addEventListener("touchstart",function(t){if(!n.element)return!1;r=performance.now(),t.object="hit"===n.element.className?n.parent:n,t.action="over",o(t),e&&!s&&e(t)},{passive:!0}),this.element.addEventListener("touchend",function(i){if(!n.element)return!1;var a=performance.now();i.object="hit"===n.element.className?n.parent:n,o(i),r&&a-r<750&&t&&!s&&(i.action="click",t(i)),e&&(i.action="out",e(i)),s=!1},{passive:!0}),this}},{key:"split",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={position:"relative",display:"block",width:"auto",height:"auto",margin:0,padding:0,cssFloat:"left"},n=[],i=this.text().split(e);this.empty();for(var r=0;r<i.length;r++)" "===i[r]&&(i[r]="&nbsp;"),n.push(this.create(".t","span").html(i[r]).css(t)),""!==e&&r<i.length-1&&n.push(this.create(".t","span").html(e).css(t));return n}}]),e}(),h=new(function(e){function t(){function e(){r.size(),r.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait"}_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Stage")),r=i,s=void 0;return r.css({overflow:"hidden"}),window.addEventListener("focus",function(){"focus"!==s&&(s="focus",r.events.fire(n.VISIBILITY,{type:"focus"}))},!0),window.addEventListener("blur",function(){"blur"!==s&&(s="blur",r.events.fire(n.VISIBILITY,{type:"blur"}))},!0),window.addEventListener("keydown",function(){return r.events.fire(n.KEYBOARD_DOWN)},!0),window.addEventListener("keyup",function(){return r.events.fire(n.KEYBOARD_UP)},!0),window.addEventListener("keypress",function(){return r.events.fire(n.KEYBOARD_PRESS)},!0),window.addEventListener("resize",function(){return r.events.fire(n.RESIZE)},!0),r.events.add(n.RESIZE,e),e(),i}return _inherits(t,l),t}()),c=function(){function e(){_classCallCheck(this,e),this.events=new n,this.classes=[],this.timers=[],this.loops=[]}return _createClass(e,[{key:"initClass",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=new(Function.prototype.bind.apply(e,[null].concat(n)));return this.add(r),r}},{key:"add",value:function(e){return e.destroy&&(this.classes.push(e),e.parent=this),this}},{key:"delayedCall",value:function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=setTimeout(function(){e&&e.apply(void 0,n)},r);return this.timers.push(s),this.timers.length>50&&this.timers.shift(),s}},{key:"clearTimers",value:function(){for(var e=this.timers.length-1;e>=0;e--)clearTimeout(this.timers[e]);this.timers.length=0}},{key:"startRender",value:function(e,t){this.loops.push(e),i.start(e,t)}},{key:"stopRender",value:function(e){this.loops.remove(e),i.stop(e)}},{key:"clearRenders",value:function(){for(var e=this.loops.length-1;e>=0;e--)this.stopRender(this.loops[e]);this.loops.length=0}},{key:"destroy",value:function(){this.removed=!0;var e=this.parent;e&&!e.removed&&e.remove&&e.remove(this);for(var n=this.classes.length-1;n>=0;n--){var i=this.classes[n];i&&i.destroy&&i.destroy()}return this.classes.length=0,this.clearRenders(),this.clearTimers(),this.events.destroy(),t.nullObject(this)}},{key:"remove",value:function(e){this.classes.remove(e)}}]),e}(),f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments[2];_classCallCheck(this,e),this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.object=new l(this.element),this.children=[],this.retina=i,this.size(t,n,i)}return _createClass(e,[{key:"size",value:function(e,t,n){var i=n?2:1;this.element.width=e*i,this.element.height=t*i,this.width=e,this.height=t,this.scale=i,this.object.size(this.width,this.height),this.context.scale(i,i),this.element.style.width=e+"px",this.element.style.height=t+"px"}},{key:"toDataURL",value:function(e,t){return this.element.toDataURL(e,t)}},{key:"render",value:function(e){"boolean"==typeof e&&e||this.clear();for(var t=0;t<this.children.length;t++)this.children[t].render()}},{key:"clear",value:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}},{key:"add",value:function(e){e.setCanvas(this),e.parent=this,this.children.push(e),e.z=this.children.length}},{key:"remove",value:function(e){e.canvas=null,e.parent=null,this.children.remove(e)}},{key:"destroy",value:function(){for(var e=0;e<this.children.length;e++)this.children[e].destroy();return this.object.destroy(),t.nullObject(this)}},{key:"getImageData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.element.width,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.element.height;return this.imageData=this.context.getImageData(e,t,n,i),this.imageData}},{key:"getPixel",value:function(e,t,n){this.imageData&&!n||this.getImageData();var i={},r=4*(e+t*this.element.width),s=this.imageData.data;return i.r=s[r],i.g=s[r+1],i.b=s[r+2],i.a=s[r+3],i}},{key:"putImageData",value:function(e){this.context.putImageData(e,0,0)}}]),e}(),d=function(){function e(t){_classCallCheck(this,e),this.styles={},t?this.styled=!1:this.data=new Float32Array(6)}return _createClass(e,[{key:"setTRSA",value:function(e,t,n,i,r,s){var a=this.data;a[0]=e,a[1]=t,a[2]=n,a[3]=i,a[4]=r,a[5]=s}},{key:"calculate",value:function(e){var t=e.data,n=this.data;n[0]=n[0]+t[0],n[1]=n[1]+t[1],n[2]=n[2]+t[2],n[3]=n[3]*t[3],n[4]=n[4]*t[4],n[5]=n[5]*t[5]}},{key:"calculateStyle",value:function(e){if(!e.styled)return!1;this.styled=!0;var t=e.values;for(var n in t)this.styles[n]||(this.styles[n]=t[n])}},{key:"shadowOffsetX",set:function(e){this.styled=!0,this.styles.shadowOffsetX=e},get:function(){return this.styles.shadowOffsetX}},{key:"shadowOffsetY",set:function(e){this.styled=!0,this.styles.shadowOffsetY=e},get:function(){return this.styles.shadowOffsetY}},{key:"shadowBlur",set:function(e){this.styled=!0,this.styles.shadowBlur=e},get:function(){return this.styles.shadowBlur}},{key:"shadowColor",set:function(e){this.styled=!0,this.styles.shadowColor=e},get:function(){return this.styles.shadowColor}},{key:"values",get:function(){return this.styles}}]),e}(),v=function(){function e(){_classCallCheck(this,e),this.visible=!0,this.blendMode="source-over",this.x=0,this.y=0,this.px=0,this.py=0,this.clipX=0,this.clipY=0,this.clipWidth=0,this.clipHeight=0,this.width=0,this.height=0,this.rotation=0,this.scale=1,this.opacity=1,this.values=new d,this.styles=new d(!0),this.children=[]}return _createClass(e,[{key:"updateValues",value:function(){this.values.setTRSA(this.x,this.y,Math.radians(this.rotation),this.scaleX||this.scale,this.scaleY||this.scale,this.opacity),this.parent.values&&this.values.calculate(this.parent.values),this.parent.styles&&this.styles.calculateStyle(this.parent.styles)}},{key:"render",value:function(e){if(!this.visible)return!1;this.updateValues(),this.draw&&this.draw(e);for(var t=0;t<this.children.length;t++)this.children[t].render(e)}},{key:"startDraw",value:function(e,t,n){var i=this.canvas.context,r=this.values.data,s=r[0]+(e||0),a=r[1]+(t||0);if(i.save(),n||(i.globalCompositeOperation=this.blendMode),i.translate(s,a),i.rotate(r[2]),i.scale(r[3],r[4]),i.globalAlpha=r[5],this.styles.styled){var o=this.styles.values;for(var u in o)i[u]=o[u]}}},{key:"endDraw",value:function(){this.canvas.context.restore()}},{key:"add",value:function(e){e.canvas=this.canvas,e.parent=this,this.children.push(e),e.z=this.children.length;for(var t=this.children.length-1;t>-1;t--)this.children[t].setCanvas(this.canvas)}},{key:"setCanvas",value:function(e){this.canvas=e;for(var t=this.children.length-1;t>-1;t--)this.children[t].setCanvas(e)}},{key:"remove",value:function(e){e.canvas=null,e.parent=null,this.children.remove(e)}},{key:"isMask",value:function(){for(var e=this;e;){if(e.masked)return!0;e=e.parent}return!1}},{key:"unmask",value:function(){this.masked.mask(null),this.masked=null}},{key:"setZ",value:function(e){this.z=e,this.parent.children.sort(function(e,t){return e.z-t.z})}},{key:"follow",value:function(e){return this.x=e.x,this.y=e.y,this.px=e.px,this.py=e.py,this.clipX=e.clipX,this.clipY=e.clipY,this.clipWidth=e.clipWidth,this.clipHeight=e.clipHeight,this.width=e.width,this.height=e.height,this.rotation=e.rotation,this.scale=e.scale,this.scaleX=e.scaleX||e.scale,this.scaleY=e.scaleY||e.scale,this}},{key:"visible",value:function(){return this.visible=!0,this}},{key:"invisible",value:function(){return this.visible=!1,this}},{key:"transform",value:function(e){for(var t in e)"number"==typeof e[t]&&(this[t]=e[t]);return this}},{key:"transformPoint",value:function(e,t){return this.px="number"==typeof e?e:this.width*(parseFloat(e)/100),this.py="number"==typeof t?t:this.height*(parseFloat(t)/100),this}},{key:"clip",value:function(e,t,n,i){return this.clipX=e,this.clipY=t,this.clipWidth=n,this.clipHeight=i,this}},{key:"destroy",value:function(){for(var e=0;e<this.children.length;e++)this.children[e].destroy();return t.nullObject(this)}}]),e}(),y=function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),s=r;r.width=e,r.height=i,r.props={};var a=[],o=void 0;return r.draw=function(e){if(r.isMask()&&!e)return!1;var t=r.canvas.context;r.startDraw(r.px,r.py,e),function(e){for(var t in s.props)e[t]=s.props[t]}(t),r.clipWidth&&r.clipHeight&&(t.beginPath(),t.rect(r.clipX,r.clipY,r.clipWidth,r.clipHeight),t.clip());for(var n=0;n<a.length;n++){var i=a[n];if(i){var u=i.shift();t[u].apply(t,i),i.unshift(u)}}r.endDraw(),o&&(t.globalCompositeOperation=o.blendMode,o.render(!0))},r.clear=function(){for(var e=0;e<a.length;e++)a[e].length=0;a.length=0},r.arc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.radius||r.width/2,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e&&!t&&(n=e,e=0,t=0),n-=90,s-=90,a.push(["beginPath"]),a.push(["arc",e,t,i,Math.radians(s),Math.radians(n),o])},r.quadraticCurveTo=function(e,t,n,i){a.push(["quadraticCurveTo",e,t,n,i])},r.bezierCurveTo=function(e,t,n,i,r,s){a.push(["bezierCurveTo",e,t,n,i,r,s])},r.fillRect=function(e,t,n,i){a.push(["fillRect",e,t,n,i])},r.clearRect=function(e,t,n,i){a.push(["clearRect",e,t,n,i])},r.strokeRect=function(e,t,n,i){a.push(["strokeRect",e,t,n,i])},r.moveTo=function(e,t){a.push(["moveTo",e,t])},r.lineTo=function(e,t){a.push(["lineTo",e,t])},r.stroke=function(){a.push(["stroke"])},r.fill=function(){o||a.push(["fill"])},r.beginPath=function(){a.push(["beginPath"])},r.closePath=function(){a.push(["closePath"])},r.fillText=function(e,t,n){a.push(["fillText",e,t,n])},r.strokeText=function(e,t,n){a.push(["strokeText",e,t,n])},r.setLineDash=function(e){a.push(["setLineDash",e])},r.drawImage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.width,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.height,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:e.width,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:e.height;a.push(["drawImage",e,t,n,i,s,o+-r.px,u+-r.py,l,h])},r.mask=function(e){if(!e)return o=null;o=e,e.masked=r;for(var t=0;t<a.length;t++)"fill"!==a[t][0]&&"stroke"!==a[t][0]||(a[t].length=0,a.splice(t,1))},r.clone=function(){var e=new n(r.width,r.height);return e.visible=r.visible,e.blendMode=r.blendMode,e.opacity=r.opacity,e.follow(r),e.props=t.cloneObject(r.props),e.setDraw(t.cloneArray(a)),e},r.setDraw=function(e){a=e},r}return _inherits(n,v),_createClass(n,[{key:"strokeStyle",set:function(e){this.props.strokeStyle=e},get:function(){return this.props.strokeStyle}},{key:"fillStyle",set:function(e){this.props.fillStyle=e},get:function(){return this.props.fillStyle}},{key:"lineWidth",set:function(e){this.props.lineWidth=e},get:function(){return this.props.lineWidth}},{key:"lineCap",set:function(e){this.props.lineCap=e},get:function(){return this.props.lineCap}},{key:"lineDashOffset",set:function(e){this.props.lineDashOffset=e},get:function(){return this.props.lineDashOffset}},{key:"lineJoin",set:function(e){this.props.lineJoin=e},get:function(){return this.props.lineJoin}},{key:"miterLimit",set:function(e){this.props.miterLimit=e},get:function(){return this.props.miterLimit}},{key:"font",set:function(e){this.props.font=e},get:function(){return this.props.font}},{key:"textAlign",set:function(e){this.props.textAlign=e},get:function(){return this.props.textAlign}},{key:"textBaseline",set:function(e){this.props.textBaseline=e},get:function(){return this.props.textBaseline}}]),n}(),p=new function e(){function t(e,t,n,i,r,s,a,o){var u=e.context,l=new y(t,n);l.font=r,l.fillStyle=s,l.totalWidth=0,l.totalHeight=n;var h=i.split(""),c=void 0,f=0,d=0;u.font=r;for(var v=0;v<h.length;v++)l.totalWidth+=u.measureText(h[v]).width+a;switch(o){case"start":case"left":d=0;break;case"end":case"right":d=t-l.totalWidth;break;case"center":d=(t-l.totalWidth)/2}do{c=h[f++],l.fillText(c,d,0),d+=u.measureText(c).width+a}while(f<i.length);return l}_classCallCheck(this,e),this.createText=function(e,n,i,r,s,a,o){var u=o.letterSpacing,l=void 0===u?0:u,h=o.lineHeight,c=void 0===h?i:h,f=o.textAlign,d=void 0===f?"start":f,v=e.context;if(i===c)return t(e,n,i,r,s,a,l,d);var p=new y(n,i),m=r.split(" "),g=[],b="";p.totalWidth=0,p.totalHeight=0,v.font=s;for(var w=0;w<m.length;w++){for(var k=b+m[w]+" ",x=k.split(""),C=0,E=0;E<x.length;E++)C+=v.measureText(x[E]).width+l;C>n&&w>0?(g.push(b),b=m[w]+" "):b=k}return g.push(b),g.every(function(i,r){var o=t(e,n,c,i,s,a,l,d);return o.y=r*c,p.add(o),p.totalWidth=Math.max(o.totalWidth,p.totalWidth),p.totalHeight+=c,!0}),p}},m=function(){function e(t,n){_classCallCheck(this,e),this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.type="vector2"}return _createClass(e,[{key:"set",value:function(e,t){return this.x=e||0,this.y=t||0,this}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"copyTo",value:function(e){return e.x=this.x,e.y=this.y,this}},{key:"copyFrom",value:function(e){return this.x=e.x||0,this.y=e.y||0,this}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y||1e-5}},{key:"length",value:function(){return Math.sqrt(this.lengthSq())}},{key:"normalize",value:function(){var e=this.length();return this.x/=e,this.y/=e,this}},{key:"setLength",value:function(e){return this.normalize().multiply(e),this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"multiply",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e,this.y/=e,this}},{key:"perpendicular",value:function(){var e=this.x,t=this.y;return this.x=-t,this.y=e,this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"deltaLerp",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0;i<n;i++)this.lerp(e,t);return this}},{key:"interp",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;this.calc||(this.calc=new e),this.calc.subVectors(this,t);var a=s.convertEase(i)(Math.clamp(Math.range(this.calc.lengthSq(),0,r*r,1,0),0,1)*(n/10));return this.lerp(t,a)}},{key:"setAngleRadius",value:function(e,t){return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this}},{key:"addAngleRadius",value:function(e,t){return this.x+=Math.cos(e)*t,this.y+=Math.sin(e)*t,this}},{key:"dot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return e.x*t.x+e.y*t.y}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"distanceTo",value:function(e,t){var n=this.x-e.x,i=this.y-e.y;return t?n*n+i*i:Math.sqrt(n*n+i*i)}},{key:"solveAngle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return Math.atan2(e.y-t.y,e.x-t.x)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";return this.x+e+this.y}}]),e}(),g=function e(){function r(t){v.isTouching=!0,v.x=t.x,v.y=t.y,v.hold.x=v.last.x=t.x,v.hold.y=v.last.y=t.y,v.delta.x=v.move.x=v.velocity.x=0,v.delta.y=v.move.y=v.velocity.y=0,y=0,v.events.fire(e.START,t),p=g=i.TIME}function s(t){v.isTouching&&(v.move.x=t.x-v.hold.x,v.move.y=t.y-v.hold.y),v.x=t.x,v.y=t.y,v.delta.x=t.x-v.last.x,v.delta.y=t.y-v.last.y,v.last.x=t.x,v.last.y=t.y,y+=v.delta.length();var n=Math.max(.001,i.TIME-(g||i.TIME));g=i.TIME,v.velocity.x=Math.abs(v.delta.x)/n,v.velocity.y=Math.abs(v.delta.y)/n,v.events.fire(e.MOVE,t),v.isTouching&&v.events.fire(e.DRAG,t)}function a(t){if(v.isTouching){v.isTouching=!1,v.move.x=0,v.move.y=0;Math.max(.001,i.TIME-(g||i.TIME))>100&&(v.delta.x=0,v.delta.y=0),v.events.fire(e.END,t),y<20&&i.TIME-p<2e3&&v.events.fire(e.CLICK,t)}}var o=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;if(_classCallCheck(this,e),!e.instance){e.CLICK="interaction_click",e.START="interaction_start",e.MOVE="interaction_move",e.DRAG="interaction_drag",e.END="interaction_end";var l={touchstart:[],touchmove:[],touchend:[]},c=function(e){return l.touchstart.forEach(function(t){return t(e)})},f=function(e){return l.touchmove.forEach(function(t){return t(e)})},d=function(e){return l.touchend.forEach(function(t){return t(e)})};e.bind=function(e,t){return l[e].push(t)},e.unbind=function(e,t){return l[e].remove(t)},h.bind("touchstart",c),h.bind("touchmove",f),h.bind("touchend",d),h.bind("touchcancel",d),h.bind("contextmenu",d),e.instance=this}var v=this;this.events=new n,this.x=0,this.y=0,this.hold=new m,this.last=new m,this.delta=new m,this.move=new m,this.velocity=new m;var y=void 0,p=void 0,g=void 0;u===h?e.bind("touchstart",r):u.bind("touchstart",r),e.bind("touchmove",s),e.bind("touchend",a),this.destroy=function(){return e.unbind("touchstart",r),e.unbind("touchmove",s),e.unbind("touchend",a),u!==h&&u.unbind&&u.unbind("touchstart",r),o.events.destroy(),t.nullObject(o)}},b=new function e(){function t(e){i.x=e.x,i.y=e.y,i.normal.x=e.x/h.width,i.normal.y=e.y/h.height,i.tilt.x=2*i.normal.x-1,i.tilt.y=1-2*i.normal.y,i.inverseNormal.x=i.normal.x,i.inverseNormal.y=1-i.normal.y}var n=this;_classCallCheck(this,e);var i=this;this.x=0,this.y=0,this.normal={x:0,y:0},this.tilt={x:0,y:0},this.inverseNormal={x:0,y:0},this.init=function(){n.input=new g,n.input.events.add(g.START,t),n.input.events.add(g.MOVE,t),t({x:h.width/2,y:h.height/2})}},w=new function e(){function t(e){switch(window.orientation){case 0:i.x=-e.accelerationIncludingGravity.x,i.y=e.accelerationIncludingGravity.y,i.z=e.accelerationIncludingGravity.z,e.rotationRate&&(i.rotationRate.alpha=e.rotationRate.beta*i.toRadians,i.rotationRate.beta=-e.rotationRate.alpha*i.toRadians,i.rotationRate.gamma=e.rotationRate.gamma*i.toRadians);break;case 180:i.x=e.accelerationIncludingGravity.x,i.y=-e.accelerationIncludingGravity.y,i.z=e.accelerationIncludingGravity.z,e.rotationRate&&(i.rotationRate.alpha=-e.rotationRate.beta*i.toRadians,i.rotationRate.beta=e.rotationRate.alpha*i.toRadians,i.rotationRate.gamma=e.rotationRate.gamma*i.toRadians);break;case 90:i.x=e.accelerationIncludingGravity.y,i.y=e.accelerationIncludingGravity.x,i.z=e.accelerationIncludingGravity.z,e.rotationRate&&(i.rotationRate.alpha=e.rotationRate.alpha*i.toRadians,i.rotationRate.beta=e.rotationRate.beta*i.toRadians,i.rotationRate.gamma=e.rotationRate.gamma*i.toRadians);break;case-90:i.x=-e.accelerationIncludingGravity.y,i.y=-e.accelerationIncludingGravity.x,i.z=e.accelerationIncludingGravity.z,e.rotationRate&&(i.rotationRate.alpha=-e.rotationRate.alpha*i.toRadians,i.rotationRate.beta=-e.rotationRate.beta*i.toRadians,i.rotationRate.gamma=e.rotationRate.gamma*i.toRadians)}}function n(e){for(var t in e)~t.toLowerCase().indexOf("heading")&&(i.heading=e[t]);switch(window.orientation){case 0:i.alpha=e.beta*i.toRadians,i.beta=-e.alpha*i.toRadians,i.gamma=e.gamma*i.toRadians;break;case 180:i.alpha=-e.beta*i.toRadians,i.beta=e.alpha*i.toRadians,i.gamma=e.gamma*i.toRadians;break;case 90:i.alpha=e.alpha*i.toRadians,i.beta=e.beta*i.toRadians,i.gamma=e.gamma*i.toRadians;break;case-90:i.alpha=-e.alpha*i.toRadians,i.beta=-e.beta*i.toRadians,i.gamma=e.gamma*i.toRadians}i.tilt=e.beta*i.toRadians,i.yaw=e.alpha*i.toRadians,i.roll=-e.gamma*i.toRadians,"Android"===r.os&&(i.heading=function(e,t,n){var i=Math.PI/180,r=t?t*i:0,s=n?n*i:0,a=e?e*i:0,o=Math.cos(s),u=Math.cos(a),l=Math.sin(r),h=Math.sin(s),c=Math.sin(a),f=-u*h-c*l*o,d=-c*h+u*l*o,v=Math.atan(f/d);d<0?v+=Math.PI:f<0&&(v+=2*Math.PI);return v*(180/Math.PI)}(e.alpha,e.beta,e.gamma))}_classCallCheck(this,e);var i=this;this.x=0,this.y=0,this.z=0,this.alpha=0,this.beta=0,this.gamma=0,this.heading=0,this.rotationRate={},this.rotationRate.alpha=0,this.rotationRate.beta=0,this.rotationRate.gamma=0,this.toRadians="iOS"===r.os?Math.PI/180:1,this.init=function(){window.addEventListener("devicemotion",t,!0),window.addEventListener("deviceorientation",n,!0)}},k=new(function(){function e(){_classCallCheck(this,e),this.CORS=null}return _createClass(e,[{key:"createImg",value:function(e,t){var n=new Image;return n.crossOrigin=this.CORS,n.src=e,n.onload=t,n.onerror=t,n}},{key:"promise",value:function(e){"string"==typeof e&&(e=this.createImg(e));var t=Promise.create();return e.onload=t.resolve,e.onerror=t.resolve,t}}]),e}()),x=function(){function e(i,r){function s(){a.events.fire(n.PROGRESS,{percent:++u/o}),u===o&&(a.events.fire(n.COMPLETE),r&&r())}_classCallCheck(this,e),Array.isArray(i)&&(i=i.map(function(e){return t.basename(e)}).reduce(function(e,t,n){return e[t]=i[n],e},{}));var a=this;this.events=new n,this.CDN=Config.CDN||"";var o=Object.keys(i).length,u=0;for(var l in i)!function(e,n){var i=t.extension(n);if(!i.includes(["jpg","jpeg","png","gif","svg"]))return i.includes(["mp3","m4a","ogg","wav","aif"])?window.AudioContext&&window.WebAudio?void window.fetch(n).then(function(t){if(!t.ok)return s();t.arrayBuffer().then(function(t){return window.WebAudio.createSound(e,t,s)})}).catch(function(){s()}):s():void window.get(n).then(function(e){"js"===i?window.eval(e.replace("use strict","")):i.includes(["fs","vs","glsl"])&&window.Shaders&&window.Shaders.parse(e,n),s()}).catch(function(){s()});k.createImg(n,s)}(l,this.CDN+i[l])}return _createClass(e,null,[{key:"loadAssets",value:function(t,n){var i=Promise.create();return n||(n=i.resolve),i.loader=new e(t,n),i}}]),e}(),C=function(){function e(t,i){_classCallCheck(this,e);var r=this;this.events=new n;var s=void 0;!function(){Array.isArray(t)||(t=[t]),s=h.create("FontLoader");for(var e=0;e<t.length;e++)s.create("font").fontStyle(t[e],12,"#000").text("LOAD").css({top:-999})}(),setTimeout(function(){s.destroy(),r.complete=!0,r.events.fire(n.COMPLETE),i&&i()},500)}return _createClass(e,null,[{key:"loadFonts",value:function(t,n){var i=Promise.create();return n||(n=i.resolve),i.loader=new e(t,n),i}}]),e}(),E=function(e){function t(e){function i(){if(!u.element)return u.stopRender(i);u.duration=u.element.duration,u.time=u.element.currentTime,u.element.currentTime===c?++y>30&&!f&&(f=!0,u.events.fire(n.ERROR)):(y=0,f&&(u.events.fire(n.READY),f=!1)),c=u.element.currentTime,u.element.currentTime>=(u.duration||u.element.duration)-.001&&(u.loop||(v||u.stopRender(i),u.events.fire(n.COMPLETE))),h.time=u.element.currentTime,h.duration=u.element.duration,h.loaded=u.loaded,u.events.fire(n.UPDATE,h)}function s(){if(!u.element)return!1;if(d){var e=u.element.seekable,t=-1;if(e){for(var i=0;i<e.length;i++)e.start(i)<d&&(t=e.end(i)-.5);t>=d&&(u.buffered=!0)}else u.buffered=!0}else u.buffered=u.element.readyState===u.element.HAVE_ENOUGH_DATA;u.buffered&&(u.stopRender(s),u.events.fire(n.READY))}function a(){if(u.ready()){for(var e=u.element.buffered,t=u.element.currentTime,i=0;!(e.start(i)<=t&&t<=e.end(i));)i+=1;u.loaded.start=e.start(i)/u.element.duration,u.loaded.end=e.end(i)/u.element.duration,u.loaded.percent=u.loaded.end-u.loaded.start,u.events.fire(n.PROGRESS,u.loaded)}}_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),u=o;o.CDN=Config.CDN||"",o.loaded={start:0,end:0,percent:0};var h={},c=void 0,f=void 0,d=void 0,v=void 0,y=0;return function(){var t=e.src;t&&(t=u.CDN+e.src),u.element=document.createElement("video"),t&&(u.element.src=t),u.element.controls=e.controls,u.element.id=e.id||"",u.element.width=e.width,u.element.height=e.height,u.element.loop=e.loop,u.object=new l(u.element),u.width=e.width,u.height=e.height,u.object.size(u.width,u.height),r.mobile&&(u.object.attr("webkit-playsinline",!0),u.object.attr("playsinline",!0))}(),!1!==e.preload&&(u.element.preload="auto",u.element.load()),o.play=function(){o.playing=!0,o.element.play(),o.startRender(i)},o.pause=function(){o.playing=!1,o.element.pause(),o.stopRender(i)},o.stop=function(){o.playing=!1,o.element.pause(),o.stopRender(i),o.ready()&&(o.element.currentTime=0)},o.volume=function(e){o.element.volume=e,o.muted&&(o.muted=!1,o.object.attr("muted",""))},o.mute=function(){o.volume(0),o.muted=!0,o.object.attr("muted",!0)},o.seek=function(e){o.element.readyState<=1?o.delayedCall(function(){o.seek&&o.seek(e)},32):o.element.currentTime=e},o.canPlayTo=function(e){return d=null,e&&(d=e),o.buffered||o.startRender(s),o.buffered},o.ready=function(){return o.element.readyState>=2},o.size=function(e,t){o.element.width=o.width=e,o.element.height=o.height=t,o.object.size(o.width,o.height)},o.forceRender=function(){v=!0,o.startRender(i)},o.trackProgress=function(){o.element.addEventListener("progress",a,!0)},o.destroy=function(){return o.stop(),o.element.src="",o.object.destroy(),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",o).call(o)},o}return _inherits(t,c),_createClass(t,[{key:"loop",set:function(e){this.element.loop=e},get:function(){return this.element.loop}},{key:"src",set:function(e){this.element.src=this.CDN+e},get:function(){return this.element.src}}]),t}(),R=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"set",value:function(e,t){null!==t&&"object"===(void 0===t?"undefined":_typeof(t))&&(t=JSON.stringify(t)),null===t?window.localStorage.removeItem(e):window.localStorage[e]=t}},{key:"get",value:function(e){var t=window.localStorage[e];if(t){var n=void 0;t.charAt&&(n=t.charAt(0)),"{"!==n&&"["!==n||(t=JSON.parse(t)),"true"!==t&&"false"!==t||(t="true"===t)}return t}}]),e}());window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext||window.oAudioContext);var T=new function e(){var t=this;_classCallCheck(this,e);var n={},i=void 0;this.init=function(){window.AudioContext&&(i=new AudioContext),i&&(t.globalGain=i.createGain(),t.globalGain.connect(i.destination))},this.createSound=function(e,r,s){var a={};i.decodeAudioData(r,function(e){a.buffer=e,a.audioGain=i.createGain(),a.audioGain.connect(t.globalGain),a.complete=!0,s&&s()}),n[e]=a},this.getSound=function(e){return n[e]},this.trigger=function(e){if(i){var n=t.getSound(e),r=i.createBufferSource();r.buffer=n.buffer,r.connect(n.audioGain),r.loop=!!n.loop,r.start(0)}},this.mute=function(){i&&o.tween(t.globalGain.gain,{value:0},300,"easeOutSine")},this.unmute=function(){i&&o.tween(t.globalGain.gain,{value:1},500,"easeOutSine")},window.WebAudio=this},O=function(){function e(t,n,i,r){_classCallCheck(this,e),this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.z="number"==typeof i?i:0,this.w="number"==typeof r?r:1,this.type="vector3"}return _createClass(e,[{key:"set",value:function(e,t,n,i){return this.x=e||0,this.y=t||0,this.z=n||0,this.w=i||1,this}},{key:"clear",value:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this}},{key:"copyTo",value:function(e){return e.x=this.x,e.y=this.y,e.z=this.z,e.w=this.w,e}},{key:"copyFrom",value:function(e){return this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||1,this}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.lengthSq())}},{key:"normalize",value:function(){var e=1/this.length();return this.set(this.x*e,this.y*e,this.z*e),this}},{key:"setLength",value:function(e){return this.normalize().multiply(e),this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"multiply",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"divide",value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:"limit",value:function(e){this.length()>e&&(this.normalize(),this.multiply(e))}},{key:"heading2D",value:function(){return-Math.atan2(-this.y,this.x)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"deltaLerp",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0;i<n;i++)this.lerp(e,t);return this}},{key:"interp",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;this.calc||(this.calc=new e),this.calc.subVectors(this,t);var a=s.convertEase(i)(Math.clamp(Math.range(this.calc.lengthSq(),0,r*r,1,0),0,1)*(n/10));return this.lerp(t,a)}},{key:"setAngleRadius",value:function(e,t){return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this.z=Math.sin(e)*t,this}},{key:"addAngleRadius",value:function(e,t){return this.x+=Math.cos(e)*t,this.y+=Math.sin(e)*t,this.z+=Math.sin(e)*t,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,u=o*t+s*i-a*n,l=o*n+a*t-r*i,h=o*i+r*n-s*t,c=-r*t-s*n-a*i;return this.x=u*o+c*-r+l*-a-h*-s,this.y=l*o+c*-s+h*-r-u*-a,this.z=h*o+c*-a+u*-s-l*-r,this}},{key:"dot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return e.x*t.x+e.y*t.y+e.z*t.z}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"cross",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=e.y*t.z-e.z*t.y,i=e.z*t.x-e.x*t.z,r=e.x*t.y-e.y*t.x;return this.set(n,i,r,this.w),this}},{key:"distanceTo",value:function(e,t){var n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t?n*n+i*i+r*r:Math.sqrt(n*n+i*i+r*r)}},{key:"solveAngle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return Math.acos(e.dot(t)/(e.length()*t.length()||1e-5))}},{key:"solveAngle2D",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=new m,i=new m;return n.copyFrom(e),i.copyFrom(t),n.solveAngle(i)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";return this.x+e+this.y+e+this.z}}]),e}(),I=new function e(){var t=this;_classCallCheck(this,e),this.PATH="";var n={},i=void 0,r=void 0,s=void 0;this.decompose=function(e,t){e.matrixWorld.decompose(t.position,t.quaternion,t.scale)},this.createDebug=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=arguments[1],n=new THREE.IcosahedronGeometry(e,1),i=t?new THREE.MeshBasicMaterial({color:t}):new THREE.MeshNormalMaterial;return new THREE.Mesh(n,i)},this.createRT=function(e,t){var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1};return new THREE.WebGLRenderTarget(e,t,n)},this.getTexture=function(e){if(!n[e]){var i=k.createImg(t.PATH+e),r=new THREE.Texture(i);i.onload=function(){r.needsUpdate=!0,r.onload&&(r.onload(),r.onload=null),THREE.Math.isPowerOfTwo(i.width*i.height)||(r.minFilter=THREE.LinearFilter)},n[e]=r}return n[e]},this.setInfinity=function(e){var t=Number.POSITIVE_INFINITY;return e.set(t,t,t),e},this.freezeMatrix=function(e){e.matrixAutoUpdate=!1,e.updateMatrix()},this.getCubemap=function(e){var i="cube_"+(Array.isArray(e)?e[0]:e);if(!n[i]){for(var r=[],s=0;s<6;s++){var a=k.createImg(t.PATH+(Array.isArray(e)?e[s]:e));r.push(a),a.onload=function(){n[i].needsUpdate=!0}}n[i]=new THREE.Texture,n[i].image=r,n[i].minFilter=THREE.LinearFilter}return n[i]},this.loadObject=function(e){return i||(i=new THREE.ObjectLoader),i.parse(e)},this.loadGeometry=function(e){return r||(r=new THREE.JSONLoader),s||(s=new THREE.BufferGeometryLoader),"BufferGeometry"===e.type?s.parse(e):r.parse(e.data).geometry},this.disposeAllTextures=function(){for(var e in n)n[e].dispose()},this.loadBufferGeometry=function(e){var t=new THREE.BufferGeometry;return e.data&&(e=e.data),t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e.position),3)),t.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.normal||e.position.length),3)),t.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(e.uv||e.position.length/3*2),2)),t},this.loadSkinnedGeometry=function(e){var t=new THREE.BufferGeometry;return t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e.position),3)),t.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.normal),3)),t.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(e.uv),2)),t.addAttribute("skinIndex",new THREE.BufferAttribute(new Float32Array(e.skinIndices),4)),t.addAttribute("skinWeight",new THREE.BufferAttribute(new Float32Array(e.skinWeights),4)),t.bones=e.bones,t},this.loadCurve=function(e){for(var t=[],n=0;n<e.length;n+=3)t.push(new THREE.Vector3(e[n+0],e[n+1],e[n+2]));return new THREE.CatmullRomCurve3(t)},this.setLightCamera=function(e,t,n,i,r){e.shadow.camera.left=-t,e.shadow.camera.right=t,e.shadow.camera.top=t,e.shadow.camera.bottom=-t,e.castShadow=!0,n&&(e.shadow.camera.near=n),i&&(e.shadow.camera.far=i),r&&(e.shadow.mapSize.width=e.shadow.mapSize.height=r),e.shadow.camera.updateProjectionMatrix()},this.getRepeatTexture=function(e){var n=t.getTexture(e);return n.onload=function(){n.wrapS=n.wrapT=THREE.RepeatWrapping},n}},M=function e(n){function i(e,t){return e.distance-t.distance}function r(e,t,n,i){if(!1!==e.visible){for(var s=e.parent;s;){if(!1===s.visible)return;s=s.parent}if(e.raycast(t,n),!0===i)for(var a=e.children,o=0,u=a.length;o<u;o++)r(a[o],t,n,!0)}}function s(e){Array.isArray(e)||(e=[e]);var t=[];return e.forEach(function(e){return r(e,u,t,!1)}),t.sort(i),l&&function(){var e=l.geometry.vertices;e[0].copy(u.ray.origin.clone()),e[1].copy(u.ray.origin.clone().add(u.ray.direction.clone().multiplyScalar(1e4))),l.geometry.verticesNeedUpdate=!0}(),t}var a=this;_classCallCheck(this,e),this.camera=n;var o=new THREE.Vector2,u=new THREE.Raycaster,l=void 0;this.pointsThreshold=function(e){u.params.Points.threshold=e},this.debug=function(e){var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3(-100,0,0)),t.vertices.push(new THREE.Vector3(100,0,0));var n=new THREE.LineBasicMaterial({color:255});l=new THREE.Line(t,n),e.add(l)},this.checkHit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,i=a.rect||h;return t===b&&i===h?o.copy(b.tilt):(o.x=t.x/i.width*2-1,o.y=-t.y/i.height*2+1),u.setFromCamera(o,n),s(e)},this.checkFromValues=function(e,t,n){return u.set(t,n,0,Number.POSITIVE_INFINITY),s(e)},this.destroy=function(){return t.nullObject(a)}},S=function(){function e(r){function s(){if(f.enabled){var e=a();e?(y=e.object).time=i.TIME:y=null}}function a(){if(f.enabled){var e=f.ray.checkHit(f.meshes)[0];if(e){var t=e.object;return t!==v&&(v&&u("out",v),u("over",v=t),h.css("cursor","pointer")),e}return v&&(u("out",v),v=null,h.css("cursor",f.cursor)),!1}}function o(){if(f.enabled&&y){var t=f.ray.checkHit(f.meshes)[0];t&&t.object===y&&function(t){d.action="click",d.mesh=t,f.events.fire(e.CLICK,d);var n=f.meshes.indexOf(y);f.meshCallbacks[n].clickCallback&&f.meshCallbacks[n].clickCallback(d)}(y),y=null}}function u(t,n){d.action=t,d.mesh=n,f.events.fire(e.HOVER,d);var i=f.meshes.indexOf(v);f.meshCallbacks[i].hoverCallback&&f.meshCallbacks[i].hoverCallback(d)}function l(e){function t(e){"Mesh"===e.type&&e.mouseEnabled&&n.push(e),e.children.length&&e.children.forEach(t)}Array.isArray(e)||(e=[e]);var n=[];return e.forEach(t),n}var c=this;_classCallCheck(this,e),e.instance||(e.HOVER="interaction3d_hover",e.CLICK="interaction3d_click",e.instance=this);var f=this;this.events=new n,this.ray=new M(r),this.meshes=[],this.meshCallbacks=[],this.cursor="auto",this.enabled=!0;var d={},v=void 0,y=void 0;b.input.events.add(g.START,s),b.input.events.add(g.MOVE,a),b.input.events.add(g.CLICK,o),this.add=function(e,t,n,i){Array.isArray(e)&&!i||(e=l(e)),e.forEach(function(e){c.meshes.push(e),c.meshCallbacks.push({hoverCallback:t,clickCallback:n})})},this.remove=function(e,t){Array.isArray(e)&&!t||(e=l(e)),e.forEach(function(e){e===v&&(u("out",v),v=null,h.css("cursor",c.cursor));for(var t=c.meshes.length-1;t>=0;t--)c.meshes[t]===e&&(c.meshes.splice(t,1),c.meshCallbacks.splice(t,1))})},this.destroy=function(){return t.nullObject(c)}}return _createClass(e,[{key:"camera",set:function(e){this.ray.camera=e}}]),e}(),A=new function e(){function t(e){for(var t=e.split("#!ATTRIBUTES")[1].split("#!")[0],n=e.split("#!UNIFORMS")[1].split("#!")[0],r=e.split("#!VARYINGS")[1].split("#!")[0];~e.indexOf("#!SHADER");){var s=(e=e.slice(e.indexOf("#!SHADER"))).split("#!SHADER")[1],a=s.indexOf("\n"),o=s.slice(0,a).split(": ")[1],u=s.slice(a);u=~o.indexOf(".vs")?t+n+r+u:n+r+u,i[o]=u,e=e.replace("#!SHADER","$")}}function n(){for(var e in i){var t=i[e];"string"==typeof t&&~t.indexOf("require")&&(i[e]=function(e){for(;~e.indexOf("#require");){var t=e.split("#require(")[1].split(")")[0];e=e.replace("#require("+t+")",i[t])}return e}(t))}}_classCallCheck(this,e);var i={};this.parse=function(e,r){~e.indexOf("{@}")?(!function(e){var n=e.split("{@}");n.shift();for(var r=0;r<n.length;r+=2){var s=n[r],a=n[r+1];~a.indexOf("#!UNIFORMS")?t(a):i[s]=a}}(e),n()):i[r.split("/").last()]=e},this.getShader=function(e){return i[e]},window.Shaders=this},_=function(){function e(t,n,i){function r(e,t){return(e=("vs"===t?["precision highp float;","precision highp int;","attribute vec2 uv;","attribute vec3 position;","attribute vec3 normal;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"):[~e.indexOf("dFdx")?"#extension GL_OES_standard_derivatives : enable":"","precision highp float;","precision highp int;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"))+e).replace(/#s?chunk\(\s?(\w+)\s?\);/g,function(e,t){return THREE.ShaderChunk[t]+"\n"})}_classCallCheck(this,e),"string"!=typeof n&&(i=n,n=t);var s=this;this.uniforms={},this.properties={},function(){for(var e in i)void 0!==i[e].value?s.uniforms[e]=i[e]:s.properties[e]=i[e]}(),function(){var e={};e.vertexShader=r(A.getShader(t+".vs")||t,"vs"),e.fragmentShader=r(A.getShader(n+".fs")||n,"fs"),e.uniforms=s.uniforms;for(var i in s.properties)e[i]=s.properties[i];s.material=new THREE.RawShaderMaterial(e),s.material.shader=s,s.uniforms=s.material.uniforms}()}return _createClass(e,[{key:"set",value:function(e,t){o.clearTween(this.uniforms[e]),this.uniforms[e].value=t}},{key:"tween",value:function(e,t,n,i,r,s,a){return o.tween(this.uniforms[e],{value:t},n,i,r,s,a)}},{key:"getValues",value:function(){var e={};for(var t in this.uniforms)e[t]=this.uniforms[t].value;return e}},{key:"copyUniformsTo",value:function(e){for(var t in this.uniforms)e.uniforms[t]=this.uniforms[t]}},{key:"cloneUniformsTo",value:function(e){for(var t in this.uniforms)e.uniforms[t]={type:this.uniforms[t].type,value:this.uniforms[t].value}}},{key:"destroy",value:function(){return this.material.dispose(),t.nullObject(this)}}]),e}();"undefined"!=typeof Promise&&(Promise.create=function(){var e=void 0,t=void 0,n=new Promise(function(n,i){e=n,t=i});return n.resolve=e,n.reject=t,n}),Math.sign=function(e){return 0==(e=+e)||isNaN(e)?Number(e):e>0?1:-1},Math.degrees=function(e){return e*(180/Math.PI)},Math.radians=function(e){return e*(Math.PI/180)},Math.clamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,Math.min(t,n)),Math.max(t,n))},Math.range=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=(e-t)*(r-i)/(n-t)+i;return arguments[5]?Math.clamp(s,Math.min(i,r),Math.max(i,r)):s},Math.mix=function(e,t,n){return e*(1-n)+t*n},Math.step=function(e,t){return t<e?0:1},Math.smoothStep=function(e,t,n){var i=Math.max(0,Math.min(1,(n-e)/(t-e)));return i*i*(3-2*i)},Math.fract=function(e){return e-Math.floor(e)},Math.mod=function(e,t){return(e%t+t)%t},Array.prototype.remove=function(e){var t=this.indexOf(e);if(~t)return this.splice(t,1)},Array.prototype.last=function(){return this[this.length-1]},String.prototype.includes=function(e){if(!Array.isArray(e))return~this.indexOf(e);for(var t=e.length-1;t>=0;t--)if(~this.indexOf(e[t]))return!0;return!1},String.prototype.clip=function(e,t){return this.length>e?this.slice(0,e)+t:this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},window.fetch||(window.fetch=function(e){function t(){var e=[],n=[],i={},s=void 0;return r.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(t,r,a){e.push(r=r.toLowerCase()),n.push([r,a]),s=i[r],i[r]=s?s+","+a:a}),{ok:1==(r.status/200|0),status:r.status,statusText:r.statusText,url:r.responseURL,clone:t,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(r.responseXML)},blob:function(){return Promise.resolve(new Blob([r.response]))},arrayBuffer:function(){return Promise.resolve(new ArrayBuffer([r.response]))},headers:{keys:function(){return e},entries:function(){return n},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Promise.create(),r=new XMLHttpRequest;r.open(n.method||"GET",e);for(var s in n.headers)r.setRequestHeader(s,n.headers[s]);return r.onload=function(){return i.resolve(t())},r.onerror=i.reject,r.send(n.body),i}),window.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Promise.create();return t.method="GET",window.fetch(e,t).then(function(e){if(!e.ok)return n.reject(e);e.text().then(function(e){if(e.charAt(0).includes(["[","{"]))try{n.resolve(JSON.parse(e))}catch(t){n.resolve(e)}else n.resolve(e)})}).catch(n.reject),n},window.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Promise.create();return n.method="POST",n.body=JSON.stringify(t),window.fetch(e,n).then(function(e){if(!e.ok)return i.reject(e);e.text().then(function(e){if(e.charAt(0).includes(["[","{"]))try{i.resolve(JSON.parse(e))}catch(t){i.resolve(e)}else i.resolve(e)})}).catch(i.reject),i},window.getURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";window.open(e,t)},window.Global||(window.Global={}),window.Config||(window.Config={}),e.Events=n,e.Render=i,e.Stage=h,e.Interface=l,e.Component=c,e.Canvas=f,e.CanvasGraphics=y,e.CanvasFont=p,e.Device=r,e.Mouse=b,e.Interaction=g,e.Accelerometer=w,e.Utils=t,e.AssetLoader=x,e.FontLoader=C,e.Video=E,e.Images=k,e.SVG=function e(n,i,r){function s(){h=new l(n,"svg",i),"circle"===i?["cx","cy","r"].forEach(function(e){r.stroke&&"r"===e?h.element.setAttributeNS(null,e,r.width/2-r.stroke):h.element.setAttributeNS(null,e,r.width/2)}):"radialGradient"===i&&(["cx","cy","r","fx","fy","name"].forEach(function(e){h.element.setAttributeNS(null,"name"===e?"id":e,r[e])}),h.element.setAttributeNS(null,"gradientUnits","userSpaceOnUse")),u.object=h}function a(){s(),r.colors.forEach(function(e){h.element.appendChild(function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","stop");return["offset","style"].forEach(function(n){t.setAttributeNS(null,n,"style"===n?"stop-color:"+e[n]:e[n])}),t}(e))})}var o=this;_classCallCheck(this,e);var u=this,h=void 0;!function(){switch(i){case"svg":(h=new l(n,"svg")).element.setAttribute("preserveAspectRatio","xMinYMid meet"),h.element.setAttribute("version","1.1"),h.element.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.width&&(h.element.setAttribute("viewBox","0 0 "+r.width+" "+r.height),h.element.style.width=r.width+"px",h.element.style.height=r.height+"px"),u.object=h;break;case"radialGradient":case"linearGradient":a();break;default:s()}}(),this.addTo=function(e){e.points?e=e.points:e.element?e=e.element:e.object&&(e=e.object.element),e.appendChild(h.element)},this.destroy=function(){return o.object.destroy(),t.nullObject(o)}},e.Storage=R,e.WebAudio=T,e.TweenManager=o,e.Interpolation=s,e.MathTween=a,e.LinkedList=function e(){var n=this;_classCallCheck(this,e),this.first=null,this.last=null,this.current=null,this.prev=null;var i=[];this.push=function(e){var t=function(e){return i[i.push({object:e,prev:null,next:null})-1]}(e);n.first?(t.next=n.first,t.prev=n.last,n.last.next=t,n.last=t):t.next=t.prev=n.last=n.first=t},this.remove=function(e){var t=function(e){for(var t=0;t<i.length;t++)if(i[t].object===e)return i[t];return null}(e);t&&t.next&&(i.length<=1?n.empty():t===n.first?(n.first=t.next,n.last.next=n.first,n.first.prev=n.last):t==n.last?(n.last=t.prev,n.last.next=n.first,n.first.prev=n.last):(t.prev.next=t.next,t.next.prev=t.prev),function(e){for(var t=i.length-1;t>-1;t--)if(i[t].object===e){i[t]=null,i.splice(t,1);break}}(e))},this.empty=function(){n.first=null,n.last=null,n.current=null,n.prev=null},this.start=function(){return n.current=n.first,n.prev=n.current,n.current},this.next=function(){if(n.current&&1!==i.length&&n.prev.next!==n.first)return n.current=n.current.next,n.prev=n.current,n.current},this.destroy=function(){for(var e=i.length-1;e>-1;e--)i[e]=null,i.splice(e,1);return t.nullObject(this)}},e.ObjectPool=function e(n,i){var r=this;_classCallCheck(this,e);var s=[];if(this.array=s,n){i=i||10;for(var a=0;a<i;a++)s.push(new n)}this.get=function(){return s.shift()||(n?new n:null)},this.empty=function(){s.length=0},this.put=function(e){e&&s.push(e)},this.insert=function(e){void 0===e.push&&(e=[e]);for(var t=0;t<e.length;t++)s.push(e[t])},this.length=function(){return s.length},this.destroy=function(){for(var e=0;e<s.length;e++)s[e].destroy&&s[e].destroy();return t.nullObject(r)}},e.Vector2=m,e.Vector3=O,e.Utils3D=I,e.Interaction3D=S,e.Raycaster=M,e.ScreenProjection=function e(t){var n=this;_classCallCheck(this,e);var i=new THREE.Vector3,r=new THREE.Vector3,s=new THREE.Vector3;this.set=function(e){t=e},this.unproject=function(e,r){var a=n.rect||h;i.set(e.x/a.width*2-1,-e.y/a.height*2+1,.5),i.unproject(t);var o=t.position;i.sub(o).normalize();var u=r||-o.z/i.z;return s.copy(o).add(i.multiplyScalar(u)),s},this.project=function(e){var i=n.rect||h;return e instanceof THREE.Object3D?(e.updateMatrixWorld(),r.set(0,0,0).setFromMatrixPosition(e.matrixWorld)):r.copy(e),r.project(t),r.x=(r.x+1)/2*i.width,r.y=-(r.y-1)/2*i.height,r}},e.Shaders=A,e.Shader=_,Object.defineProperty(e,"__esModule",{value:!0})});
