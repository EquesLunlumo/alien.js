//   _  /._  _  r10.about 2018-03-30 8:30pm
//  /_|///_'/ /
var _get=function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(i):void 0},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}"undefined"!=typeof Promise&&(Promise.create=function(){var e=void 0,t=void 0,n=new Promise(function(n,i){e=n,t=i});return n.resolve=e,n.reject=t,n}),Math.sign=function(e){return 0===(e=+e)||isNaN(e)?Number(e):e>0?1:-1},Math.degrees=function(e){return e*(180/Math.PI)},Math.radians=function(e){return e*(Math.PI/180)},Math.clamp=function(e,t,n){return Math.min(Math.max(e,Math.min(t,n)),Math.max(t,n))},Math.range=function(e,t,n,i,a,r){var o=(e-t)*(a-i)/(n-t)+i;return r?Math.clamp(o,i,a):o},Math.mix=function(e,t,n){return e*(1-n)+t*n},Math.step=function(e,t){return t<e?0:1},Math.smoothStep=function(e,t,n){var i=Math.max(0,Math.min(1,(n-e)/(t-e)));return i*i*(3-2*i)},Math.fract=function(e){return e-Math.floor(e)},Math.mod=function(e,t){return(e%t+t)%t},Array.prototype.remove=function(e){var t=this.indexOf(e);if(~t)return this.splice(t,1)},Array.prototype.last=function(){return this[this.length-1]},String.prototype.includes=function(e){if(!Array.isArray(e))return~this.indexOf(e);for(var t=0;t<e.length;t++)if(~this.indexOf(e[t]))return!0;return!1},String.prototype.clip=function(e,t){return this.length>e?this.slice(0,e)+t:this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},window.fetch||(window.fetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Promise.create(),i=new XMLHttpRequest;for(var a in i.open(t.method||"GET",e),t.headers)i.setRequestHeader(a,t.headers[a]);function r(){var e=[],t=[],n={},a=void 0;return i.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(i,r,o){e.push(r=r.toLowerCase()),t.push([r,o]),a=n[r],n[r]=a?a+","+o:o}),{ok:1==(i.status/200|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:r,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(i.responseXML)},blob:function(){return Promise.resolve(new Blob([i.response]))},arrayBuffer:function(){return Promise.resolve(new ArrayBuffer([i.response]))},headers:{keys:function(){return e},entries:function(){return t},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}return i.onload=function(){return n.resolve(r())},i.onerror=n.reject,i.send(t.body),n}),window.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Promise.create();return t.method="GET",window.fetch(e,t).then(function(e){if(!e.ok)return n.reject(e);e.text().then(function(e){if(e.charAt(0).includes(["[","{"]))try{n.resolve(JSON.parse(e))}catch(t){n.resolve(e)}else n.resolve(e)})}).catch(n.reject),n},window.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Promise.create();return n.method="POST",n.body=JSON.stringify(t),window.fetch(e,n).then(function(e){if(!e.ok)return i.reject(e);e.text().then(function(e){if(e.charAt(0).includes(["[","{"]))try{i.resolve(JSON.parse(e))}catch(t){i.resolve(e)}else i.resolve(e)})}).catch(i.reject),i},window.defer=window.requestAnimationFrame,window.getURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";window.open(e,t)},window.Config||(window.Config={}),window.Global||(window.Global={});var Utils=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"random",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(void 0===e)return Math.random();if(e===t)return e;e=e||0,t=t||1;var i=Math.pow(10,n);return Math.round((e+Math.random()*(t-e))*i)/i}},{key:"headsTails",value:function(e,t){return this.random(0,1)?t:e}},{key:"queryString",value:function(e){var t=decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(e).replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return!(!t.length||"0"===t||"false"===t)&&t}},{key:"getConstructorName",value:function(e){return e.constructor.name||e.constructor.toString().match(/function ([^(]+)/)[1]}},{key:"nullObject",value:function(e){for(var t in e)void 0!==e[t]&&(e[t]=null);return null}},{key:"cloneObject",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"mergeObject",value:function(){for(var e={},t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=!0,r=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var l=s.value;for(var c in l)e[c]=l[c]}}catch(e){r=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(r)throw o}}return e}},{key:"toArray",value:function(e){return Object.keys(e).map(function(t){return e[t]})}},{key:"cloneArray",value:function(e){return e.slice(0)}},{key:"basename",value:function(e,t){var n=e.split("/").last();return t?n:n.split(".")[0]}},{key:"extension",value:function(e){return e.split(".").last().split("?")[0].toLowerCase()}},{key:"base64",value:function(e){return window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}},{key:"timestamp",value:function(){return(Date.now()+this.random(0,99999)).toString()}},{key:"pad",value:function(e){return e<10?"0"+e:e}},{key:"hash",get:function(){return window.location.hash.slice(1)}}]),e}(),Render=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e=this,t=this,n=[],i=200,a=performance.now();function r(e){var o=Math.min(i,e-a);a=e,t.TIME=e,t.DELTA=o;for(var s=n.length-1;s>=0;s--){var u=n[s];if(u)if(u.fps){if(e-u.last<1e3/u.fps)continue;u(++u.frame),u.last=e}else u(e,o);else n.remove(u)}t.paused||requestAnimationFrame(r)}requestAnimationFrame(r),this.start=function(e,t){t&&(e.fps=t,e.last=-1/0,e.frame=-1),~n.indexOf(e)||n.unshift(e)},this.stop=function(e){n.remove(e)},this.pause=function(){e.paused=!0},this.resume=function(){e.paused&&(e.paused=!1,requestAnimationFrame(r))}}}]),e}();Render.init();var Timer=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e=[],t=[];Render.start(function(n,i){for(var a=0;a<t.length;a++){var r=t[a];r.callback=null,e.remove(r)}t.length&&(t.length=0);for(var o=0;o<e.length;o++){var s=e[o];s?(s.current+=i)>=s.time&&(s.callback&&s.callback.apply(s,_toConsumableArray(s.args)),t.push(s)):e.remove(s)}}),this.clearTimeout=function(t){var n=function(t){for(var n=0;n<e.length;n++)if(e[n].ref===t)return e[n];return null}(t);return!!n&&(n.callback=null,e.remove(n),!0)},this.create=function(t,n){for(var i=arguments.length,a=Array(i>2?i-2:0),r=2;r<i;r++)a[r-2]=arguments[r];var o={time:Math.max(1,n||1),current:0,ref:Utils.timestamp(),callback:t,args:a};return e.push(o),o.ref}}}]),e}();Timer.init();var Events=function e(){var t=this;_classCallCheck(this,e);var n=function(){function e(){_classCallCheck(this,e),this.events=[],this.links=[]}return _createClass(e,[{key:"add",value:function(e,t,n,i){this.events.push({event:e,callback:t,object:n,target:i})}},{key:"remove",value:function(e,t){for(var n=this.events.length-1;n>=0;n--)this.events[n].event===e&&this.events[n].callback===t&&(this.events[n].removed=!0,this.events.splice(n,1)[0]=null)}},{key:"fire",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,i=Utils.cloneArray(this.events),a=0;a<i.length;a++)i[a].event!==e||i[a].removed||(i[a].target&&t&&"object"===(void 0===t?"undefined":_typeof(t))&&(t.target=t.target||i[a].target),i[a].callback(t),n=!0);return n}},{key:"destroy",value:function(e){for(var t=this.events.length-1;t>=0;t--)this.events[t].object===e&&(this.events.splice(t,1)[0]=null)}},{key:"link",value:function(e){~this.links.indexOf(e)||this.links.push(e)}}]),e}();e.initialized||(e.emitter=new n,e.VISIBILITY="visibility",e.KEYBOARD_PRESS="keyboard_press",e.KEYBOARD_DOWN="keyboard_down",e.KEYBOARD_UP="keyboard_up",e.RESIZE="resize",e.COMPLETE="complete",e.PROGRESS="progress",e.UPDATE="update",e.LOADED="loaded",e.ERROR="error",e.READY="ready",e.HOVER="hover",e.CLICK="click",e.initialized=!0),this.emitter=new n;var i=[];this.add=function(n,a,r){if("object"!==(void 0===n?"undefined":_typeof(n))&&(r=a,a=n,n=null),n){var o=n.events.emitter;o.add(a,r,t,n),o.link(t),i.push(o)}else e.emitter.add(a,r,t)},this.remove=function(t,n,i){"object"!==(void 0===t?"undefined":_typeof(t))&&(i=n,n=t,t=null),t?t.events.emitter.remove(n,i):e.emitter.remove(n,i)},this.fire=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];t.emitter.fire(n,i)||a||e.emitter.fire(n,i)},this.destroy=function(){return e.emitter.destroy(t),i.forEach(function(e){return e.destroy(t)}),t.emitter.links.forEach(function(e){e.unlink&&e.unlink(t.emitter)}),Utils.nullObject(t)},this.unlink=function(e){i.remove(e)}},Device=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e,t,n=this;this.agent=navigator.userAgent.toLowerCase(),this.prefix=(e=window.getComputedStyle(document.documentElement,""),{lowercase:t=(Array.prototype.slice.call(e).join("").match(/-(webkit|moz|ms)-/)||""===e.OLink&&["","o"])[1],js:t[0].toUpperCase()+t.substr(1)}),this.transformProperty=function(){var e=void 0;switch(n.prefix.lowercase){case"webkit":e="-webkit-transform";break;case"moz":e="-moz-transform";break;case"ms":e="-ms-transform";break;case"o":e="-o-transform";break;default:e="transform"}return e}(),this.pixelRatio=window.devicePixelRatio,this.os=n.detect(["iphone","ipad"])?"ios":n.detect(["android"])?"android":n.detect(["blackberry"])?"blackberry":n.detect(["mac os"])?"mac":n.detect(["windows"])?"windows":n.detect(["linux"])?"linux":"unknown",this.browser="ios"===n.os?n.detect(["safari"])?"safari":"unknown":"android"===n.os?n.detect(["chrome"])?"chrome":n.detect(["firefox"])?"firefox":"browser":n.detect(["msie"])?"ie":n.detect(["trident"])&&n.detect(["rv:"])?"ie":n.detect(["windows"])&&n.detect(["edge"])?"ie":n.detect(["chrome"])?"chrome":n.detect(["safari"])?"safari":n.detect(["firefox"])?"firefox":"unknown",this.mobile="ontouchstart"in window&&this.detect(["iphone","ipad","android","blackberry"]),this.tablet=Math.max(screen.width,screen.height)>800,this.phone=!this.tablet,this.webgl=function(){try{for(var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],t=document.createElement("canvas"),n=void 0,i=0;i<e.length&&!(n=t.getContext(e[i]));i++);var a=n.getExtension("WEBGL_debug_renderer_info"),r={};return a&&(r.gpu=n.getParameter(a.UNMASKED_RENDERER_WEBGL).toLowerCase()),r.renderer=n.getParameter(n.RENDERER).toLowerCase(),r.version=n.getParameter(n.VERSION).toLowerCase(),r.glsl=n.getParameter(n.SHADING_LANGUAGE_VERSION).toLowerCase(),r.extensions=n.getSupportedExtensions(),r.detect=function(e){if(r.gpu&&r.gpu.includes(e))return!0;if(r.version&&r.version.includes(e))return!0;for(var t=0;t<r.extensions.length;t++)if(r.extensions[t].toLowerCase().includes(e))return!0;return!1},r}catch(e){return!1}}()}},{key:"detect",value:function(e){return this.agent.includes(e)}},{key:"vendor",value:function(e){return this.prefix.js+e}},{key:"vibrate",value:function(e){navigator.vibrate&&navigator.vibrate(e)}}]),e}();Device.init();var Component=function(){function e(){_classCallCheck(this,e),this.events=new Events,this.classes=[],this.timers=[],this.loops=[]}return _createClass(e,[{key:"initClass",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=new(Function.prototype.bind.apply(e,[null].concat(n)));return this.add(a),a}},{key:"add",value:function(e){return e.destroy&&(this.classes.push(e),e.parent=this),this}},{key:"delayedCall",value:function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.timers){var r=Timer.create(function(){e&&e.apply(void 0,n)},a);return this.timers.push(r),this.timers.length>50&&this.timers.shift(),r}}},{key:"clearTimers",value:function(){for(var e=this.timers.length-1;e>=0;e--)Timer.clearTimeout(this.timers[e]);this.timers.length=0}},{key:"startRender",value:function(e,t){this.loops.push(e),Render.start(e,t)}},{key:"stopRender",value:function(e){this.loops.remove(e),Render.stop(e)}},{key:"clearRenders",value:function(){for(var e=this.loops.length-1;e>=0;e--)this.stopRender(this.loops[e]);this.loops.length=0}},{key:"destroy",value:function(){this.removed=!0;var e=this.parent;e&&!e.removed&&e.remove&&e.remove(this);for(var t=this.classes.length-1;t>=0;t--){var n=this.classes[t];n&&n.destroy&&n.destroy()}return this.classes.length=0,this.clearRenders(),this.clearTimers(),this.events.destroy(),Utils.nullObject(this)}},{key:"remove",value:function(e){this.classes.remove(e)}}]),e}(),Assets=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e=this;this.CDN="",this.CORS=null;var t={},n={};this.getPath=function(t){return~t.indexOf("//")?t:(e.CDN&&!~t.indexOf(e.CDN)&&(t=e.CDN+t),t)},this.createImage=function(n,i,a){"boolean"!=typeof i&&(a=i,i=void 0);var r=new Image;return r.crossOrigin=e.CORS,r.src=e.getPath(n),r.onload=a,r.onerror=a,i&&(t[n]=r),r},this.getImage=function(e){return t[e]},this.storeData=function(e,t){return n[e]=t,n[e]},this.getData=function(e){return n[e]}}},{key:"loadImage",value:function(e){"string"==typeof e&&(e=this.createImage(e));var t=Promise.create();return e.onload=function(){return t.resolve(e)},e.onerror=function(){return t.resolve(e)},t}}]),e}();Assets.init();var Interpolation=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var t=this;function n(e,t,n){return((i(t,n)*e+a(t,n))*e+r(t))*e}function i(e,t){return 1-3*t+3*e}function a(e,t){return 3*t-6*e}function r(e){return 3*e}this.convertEase=function(e){return function(){var n=void 0;switch(e){case"easeInQuad":n=t.Quad.In;break;case"easeInCubic":n=t.Cubic.In;break;case"easeInQuart":n=t.Quart.In;break;case"easeInQuint":n=t.Quint.In;break;case"easeInSine":n=t.Sine.In;break;case"easeInExpo":n=t.Expo.In;break;case"easeInCirc":n=t.Circ.In;break;case"easeInElastic":n=t.Elastic.In;break;case"easeInBack":n=t.Back.In;break;case"easeInBounce":n=t.Bounce.In;break;case"easeOutQuad":n=t.Quad.Out;break;case"easeOutCubic":n=t.Cubic.Out;break;case"easeOutQuart":n=t.Quart.Out;break;case"easeOutQuint":n=t.Quint.Out;break;case"easeOutSine":n=t.Sine.Out;break;case"easeOutExpo":n=t.Expo.Out;break;case"easeOutCirc":n=t.Circ.Out;break;case"easeOutElastic":n=t.Elastic.Out;break;case"easeOutBack":n=t.Back.Out;break;case"easeOutBounce":n=t.Bounce.Out;break;case"easeInOutQuad":n=t.Quad.InOut;break;case"easeInOutCubic":n=t.Cubic.InOut;break;case"easeInOutQuart":n=t.Quart.InOut;break;case"easeInOutQuint":n=t.Quint.InOut;break;case"easeInOutSine":n=t.Sine.InOut;break;case"easeInOutExpo":n=t.Expo.InOut;break;case"easeInOutCirc":n=t.Circ.InOut;break;case"easeInOutElastic":n=t.Elastic.InOut;break;case"easeInOutBack":n=t.Back.InOut;break;case"easeInOutBounce":n=t.Bounce.InOut;break;case"linear":n=t.Linear.None}if(!n){var i=TweenManager.getEase(e);if(i){for(var a=i.split("(")[1].slice(0,-1).split(","),r=0;r<a.length;r++)a[r]=parseFloat(a[r]);n=a}else n=t.Cubic.Out}return n}()},this.solve=function(e,t){return e[0]===e[1]&&e[2]===e[3]?t:n(function(e,t,o){for(var s,u,l,c=e,h=0;h<4;h++){var d=(s=c,3*i(u=t,l=o)*s*s+2*a(u,l)*s+r(u));if(0===d)return c;c-=(n(c,t,o)-e)/d}return c}(t,e[0],e[2]),e[1],e[3])},this.Linear={None:function(e){return e}},this.Quad={In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},this.Cubic={In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},this.Quart={In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},this.Quint={In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},this.Sine={In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},this.Expo={In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},this.Circ={In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},this.Elastic={In:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),-t*Math.pow(2,10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n))},Out:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin((e-i)*(2*Math.PI)/n)+1)},InOut:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),(e*=2)<1?t*Math.pow(2,10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n)*-.5:t*Math.pow(2,-10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n)*.5+1)}},this.Back={In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},this.Bounce={In:function(t){return 1-e.Bounce.Out(1-t)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(t){return t<.5?.5*e.Bounce.In(2*t):.5*e.Bounce.Out(2*t-1)+.5}}}}]),e}();Interpolation.init();var MathTween=function e(t,n,i,a,r,o,s){var u=this;_classCallCheck(this,e);var l=this,c=void 0,h=void 0,d=void 0,f=void 0,v=void 0,p=void 0,m=void 0,g=void 0;function y(){if(!t&&!n)return!1;t.mathTween=null,TweenManager.removeMathTween(l),Utils.nullObject(l),t.mathTweens&&t.mathTweens.remove(l)}!function(){!t.multiTween&&t.mathTween&&TweenManager.clearTween(t);TweenManager.addMathTween(l),t.mathTween=l,t.multiTween&&(t.mathTweens||(t.mathTweens=[]),t.mathTweens.push(l));a=Interpolation.convertEase(a),f="function"==typeof a,c=performance.now(),c+=r,d=n,h={},n.spring&&(p=n.spring);n.damping&&(m=n.damping);for(var e in d)"number"==typeof t[e]&&(h[e]=t[e])}(),this.update=function(e){if(!(v||e<c)){g=(g=(e-c)/i)>1?1:g;var t=u.interpolate(g);o&&o(t),1===g&&(s&&s(),y())}},this.stop=function(){y()},this.pause=function(){v=!0},this.resume=function(){v=!1,c=performance.now()-g*i},this.interpolate=function(e){var n=f?a(e,p,m):Interpolation.solve(a,e);for(var i in h)if("number"==typeof h[i]&&"number"==typeof d[i]){var r=h[i],o=d[i];t[i]=r+(o-r)*n}return n}},TweenManager=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e=this;this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"};var t=[];Render.start(function(n){for(var i=t.length-1;i>=0;i--){var a=t[i];a.update?a.update(n):e.removeMathTween(a)}}),this.addMathTween=function(e){t.push(e)},this.removeMathTween=function(e){t.remove(e)}}},{key:"tween",value:function(e,t,n,i,a,r,o){"number"!=typeof a&&(o=r,r=a,a=0);var s=null;"undefined"!=typeof Promise&&(s=Promise.create(),r&&s.then(r),r=s.resolve);var u=new MathTween(e,t,n,i,a,o,r);return s||u}},{key:"clearTween",value:function(e){if(e.mathTween&&e.mathTween.stop(),e.mathTweens){for(var t=e.mathTweens,n=t.length-1;n>=0;n--){var i=t[n];i&&i.stop()}e.mathTweens=null}}},{key:"isTransform",value:function(e){return~this.TRANSFORMS.indexOf(e)}},{key:"getEase",value:function(e){return this.CSS_EASES[e]||this.CSS_EASES.easeOutCubic}},{key:"getAllTransforms",value:function(e){for(var t={},n=0;n<this.TRANSFORMS.length;n++){var i=this.TRANSFORMS[n],a=e[i];0!==a&&"number"==typeof a&&(t[i]=a)}return t}},{key:"parseTransform",value:function(e){var t="";if(void 0!==e.x||void 0!==e.y||void 0!==e.z){var n="";n+=(e.x||0)+"px, ",n+=(e.y||0)+"px, ",t+="translate3d("+(n+=(e.z||0)+"px")+")"}return void 0!==e.scale?t+="scale("+e.scale+")":(void 0!==e.scaleX&&(t+="scaleX("+e.scaleX+")"),void 0!==e.scaleY&&(t+="scaleY("+e.scaleY+")")),void 0!==e.rotation&&(t+="rotate("+e.rotation+"deg)"),void 0!==e.rotationX&&(t+="rotateX("+e.rotationX+"deg)"),void 0!==e.rotationY&&(t+="rotateY("+e.rotationY+"deg)"),void 0!==e.rotationZ&&(t+="rotateZ("+e.rotationZ+"deg)"),void 0!==e.skewX&&(t+="skewX("+e.skewX+"deg)"),void 0!==e.skewY&&(t+="skewY("+e.skewY+"deg)"),void 0!==e.perspective&&(t+="perspective("+e.perspective+"px)"),t}},{key:"interpolate",value:function(e,t,n){var i=Interpolation.convertEase(n);return e*("function"==typeof i?i(t):Interpolation.solve(i,t))}},{key:"interpolateValues",value:function(e,t,n,i){var a=Interpolation.convertEase(i);return e+(t-e)*("function"==typeof a?a(n):Interpolation.solve(a,n))}}]),e}();TweenManager.init();var CSSTransition=function e(t,n,i,a,r,o){_classCallCheck(this,e);var s=this,u=void 0,l=void 0;function c(){return!s||s.kill||!t||!t.element}function h(){c()||(s.kill=!0,t.element.style[Device.vendor("Transition")]="",t.willChange(null),t.cssTween=null,t=n=null,Utils.nullObject(s))}!function(){var e=TweenManager.getAllTransforms(t),i=[];for(var a in n)TweenManager.isTransform(a)?(e.use=!0,e[a]=n[a],delete n[a]):("number"==typeof n[a]||~a.indexOf("-"))&&i.push(a);e.use&&(i.push(Device.transformProperty),delete e.use);u=e,l=i}(),function(){if(c())return;t.cssTween&&(t.cssTween.kill=!0);t.cssTween=s;var e=function(e,t,n){for(var i="",a="",r=0;r<l.length;r++){var o=l[r];i+=(i.length?", ":"")+o,a+=(a.length?", ":"")+o+" "+e+"ms "+TweenManager.getEase(t)+" "+n+"ms"}return{props:i,transition:a}}(i,a,r);t.willChange(e.props),Timer.create(function(){c()||(t.element.style[Device.vendor("Transition")]=e.transition,t.css(n),t.transform(u),Timer.create(function(){c()||(h(),o&&o())},i+r))},35)}(),this.stop=h},Interface=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",i=arguments[2];if(_classCallCheck(this,e),this.events=new Events,this.classes=[],this.timers=[],this.loops=[],void 0!==t){if("string"==typeof t){if(this.name=t,this.type=n,"svg"===n){var a=i||"svg";i=!0,this.element=document.createElementNS("http://www.w3.org/2000/svg",a),this.element.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")}else this.element=document.createElement(n),"."!==t[0]?this.element.id=t:this.element.className=t.substr(1);this.element.style.position="absolute",i||document.body.appendChild(this.element)}else this.element=t;this.element.object=this}}return _createClass(e,[{key:"initClass",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=new(Function.prototype.bind.apply(e,[null].concat(n)));return this.add(a),a}},{key:"add",value:function(e){return e.destroy&&(this.classes.push(e),e.parent=this),e.element?this.element.appendChild(e.element):e.nodeName&&this.element.appendChild(e),this}},{key:"delayedCall",value:function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.timers){var r=Timer.create(function(){e&&e.apply(void 0,n)},a);return this.timers.push(r),this.timers.length>50&&this.timers.shift(),r}}},{key:"clearTimers",value:function(){for(var e=this.timers.length-1;e>=0;e--)Timer.clearTimeout(this.timers[e]);this.timers.length=0}},{key:"startRender",value:function(e,t){this.loops.push(e),Render.start(e,t)}},{key:"stopRender",value:function(e){this.loops.remove(e),Render.stop(e)}},{key:"clearRenders",value:function(){for(var e=this.loops.length-1;e>=0;e--)this.stopRender(this.loops[e]);this.loops.length=0}},{key:"destroy",value:function(){this.removed=!0;var e=this.parent;e&&!e.removed&&e.remove&&e.remove(this);for(var t=this.classes.length-1;t>=0;t--){var n=this.classes[t];n&&n.destroy&&n.destroy()}return this.classes.length=0,this.element.object=null,this.clearRenders(),this.clearTimers(),this.events.destroy(),Utils.nullObject(this)}},{key:"remove",value:function(e){e.element?e.element.parentNode.removeChild(e.element):e.nodeName&&e.parentNode.removeChild(e),this.classes.remove(e)}},{key:"create",value:function(t,n){var i=new e(t,n);return this.add(i),i}},{key:"clone",value:function(){return new e(this.element.cloneNode(!0))}},{key:"empty",value:function(){return this.element.innerHTML="",this}},{key:"text",value:function(e){return void 0===e?this.element.textContent:(this.element.textContent=e,this)}},{key:"html",value:function(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)}},{key:"hide",value:function(){return this.element.style.display="none",this}},{key:"show",value:function(){return this.element.style.display="",this}},{key:"visible",value:function(){return this.element.style.visibility="visible",this}},{key:"invisible",value:function(){return this.element.style.visibility="hidden",this}},{key:"setZ",value:function(e){return this.element.style.zIndex=e,this}},{key:"clearOpacity",value:function(){return this.element.style.opacity="",this}},{key:"size",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments[2];return"boolean"==typeof t&&(n=t,t=e),void 0!==e&&("string"==typeof e||"string"==typeof t?("string"!=typeof e&&(e+="px"),"string"!=typeof t&&(t+="px"),this.element.style.width=e,this.element.style.height=t):(this.element.style.width=e+"px",this.element.style.height=t+"px",n||(this.element.style.backgroundSize=e+"px "+t+"px"))),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this}},{key:"mouseEnabled",value:function(e){return this.element.style.pointerEvents=e?"auto":"none",this}},{key:"fontStyle",value:function(e,t,n,i){return this.css({fontFamily:e,fontSize:t,color:n,fontStyle:i}),this}},{key:"bg",value:function(e,t,n,i){return~e.indexOf(".")&&(e=Assets.getPath(e)),e.includes(["data:","."])?this.element.style.backgroundImage="url("+e+")":this.element.style.backgroundColor=e,void 0!==t&&(t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,this.element.style.backgroundPosition=t+" "+n),i&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=i),"cover"!==t&&"contain"!==t||(i="number"==typeof i?i+"px":i,this.element.style.backgroundSize=t,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==n?n+" "+i:"center"),this}},{key:"center",value:function(e,t,n){var i={};return void 0===e?(i.left="50%",i.top="50%",i.marginLeft=-this.width/2,i.marginTop=-this.height/2):(e&&(i.left="50%",i.marginLeft=-this.width/2),t&&(i.top="50%",i.marginTop=-this.height/2)),n&&(delete i.left,delete i.top),this.css(i),this}},{key:"mask",value:function(e){return this.element.style[Device.vendor("Mask")]=(~e.indexOf(".")?"url("+e+")":e)+" no-repeat",this.element.style[Device.vendor("MaskSize")]="contain",this}},{key:"blendMode",value:function(e,t){return this.element.style[t?"background-blend-mode":"mix-blend-mode"]=e,this}},{key:"css",value:function(e,t){if("object"!==(void 0===e?"undefined":_typeof(e))){if(t)return this.element.style[e]=t,this;var n=this.element.style[e];return"number"!=typeof n&&(~n.indexOf("px")&&(n=Number(n.slice(0,-2))),"opacity"===e&&(n=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),n||0}for(var i in e){var a=e[i];"string"!=typeof a&&"number"!=typeof a||("string"!=typeof a&&"opacity"!==i&&"zIndex"!==i&&(a+="px"),this.element.style[i]=a)}return this}},{key:"transform",value:function(e){if(e)for(var t in e)"number"==typeof e[t]&&(this[t]=e[t]);else e=this;return this.element.style[Device.vendor("Transform")]=TweenManager.parseTransform(e),this}},{key:"willChange",value:function(e){var t="string"==typeof e;this.element.style["will-change"]=e?t?e:Device.transformProperty+", opacity":""}},{key:"backfaceVisibility",value:function(e){this.element.style[Device.vendor("BackfaceVisibility")]=e?"visible":"hidden"}},{key:"enable3D",value:function(e,t,n){return this.element.style[Device.vendor("TransformStyle")]="preserve-3d",e&&(this.element.style[Device.vendor("Perspective")]=e+"px"),void 0!==t&&(t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,this.element.style[Device.vendor("PerspectiveOrigin")]=t+" "+n),this}},{key:"disable3D",value:function(){return this.element.style[Device.vendor("TransformStyle")]="",this.element.style[Device.vendor("Perspective")]="",this}},{key:"transformPoint",value:function(e,t,n){var i="";return void 0!==e&&(i+="number"==typeof e?e+"px":e),void 0!==t&&(i+="number"==typeof t?" "+t+"px":" "+t),void 0!==n&&(i+="number"==typeof n?" "+n+"px":" "+n),this.element.style[Device.vendor("TransformOrigin")]=i,this}},{key:"tween",value:function(e,t,n,i,a){"number"!=typeof i&&(a=i,i=0);var r=null;"undefined"!=typeof Promise&&(r=Promise.create(),a&&r.then(a),a=r.resolve);var o=new CSSTransition(this,e,t,n,i,a);return r||o}},{key:"clearTransform",value:function(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style[Device.transformProperty]="",this}},{key:"clearTween",value:function(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}},{key:"attr",value:function(e,t){return void 0===t?this.element.getAttribute(e):(""===t?this.element.removeAttribute(e):this.element.setAttribute(e,t),this)}},{key:"convertTouchEvent",value:function(e){var t={x:0,y:0};return e?(e.touches||e.changedTouches?e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t):t}},{key:"click",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="click",e&&e(n)};return this.element.addEventListener("click",n,!0),this.element.style.cursor="pointer",this}},{key:"hover",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="mouseout"===n.type?"out":"over",e&&e(n)};return this.element.addEventListener("mouseover",n,!0),this.element.addEventListener("mouseout",n,!0),this}},{key:"press",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="mousedown"===n.type?"down":"up",e&&e(n)};return this.element.addEventListener("mousedown",n,!0),this.element.addEventListener("mouseup",n,!0),this}},{key:"bind",value:function(e,t){var n=this;"touchstart"!==e||Device.mobile?"touchmove"!==e||Device.mobile?"touchend"!==e||Device.mobile||(e="mouseup"):e="mousemove":e="mousedown",this.events["bind_"+e]||(this.events["bind_"+e]=[]);var i=this.events["bind_"+e];i.push({target:this.element,callback:t});var a=function(e){var t=n.convertTouchEvent(e);e instanceof MouseEvent||(e.x=t.x,e.y=t.y),i.forEach(function(t){t.target===e.currentTarget&&t.callback(e)})};return this.events["fn_"+e]||(this.events["fn_"+e]=a,this.element.addEventListener(e,a,!0)),this}},{key:"unbind",value:function(e,t){"touchstart"!==e||Device.mobile?"touchmove"!==e||Device.mobile?"touchend"!==e||Device.mobile||(e="mouseup"):e="mousemove":e="mousedown";var n=this.events["bind_"+e];return n?(n.forEach(function(e,i){e.callback===t&&n.splice(i,1)}),this.events["fn_"+e]&&!n.length&&(this.element.removeEventListener(e,this.events["fn_"+e],!0),this.events["fn_"+e]=null),this):this}},{key:"interact",value:function(e,t){return this.hit=this.create(".hit"),this.hit.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}),Device.mobile?this.hit.touchClick(e,t):this.hit.hover(e).click(t),this}},{key:"touchClick",value:function(e,t){var n=this,i={},a=void 0,r=void 0,o=void 0,s=function(e){var t=n.convertTouchEvent(e);e.touchX=t.x,e.touchY=t.y,i.x=e.touchX,i.y=e.touchY};return this.element.addEventListener("touchmove",function(e){if(!n.element)return!1;var t,a,s,u;o=n.convertTouchEvent(e),t=i,s=(a=o).x-t.x,u=a.y-t.y,r=Math.sqrt(s*s+u*u)>5},{passive:!0}),this.element.addEventListener("touchstart",function(t){if(!n.element)return!1;a=performance.now(),t.object="hit"===n.element.className?n.parent:n,t.action="over",s(t),e&&!r&&e(t)},{passive:!0}),this.element.addEventListener("touchend",function(i){if(!n.element)return!1;var o=performance.now();i.object="hit"===n.element.className?n.parent:n,s(i),a&&o-a<750&&t&&!r&&(i.action="click",t(i)),e&&(i.action="out",e(i)),r=!1},{passive:!0}),this}},{key:"preventScroll",value:function(){if(Device.mobile){var e=function(e){var t=e.target;if("INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName&&"A"!==t.nodeName){for(var n=!0;t.parentNode&&n;)t.scrollParent&&(n=!1),t=t.parentNode;n&&e.preventDefault()}};this.element.addEventListener("touchstart",e,{passive:!1})}}},{key:"overflowScroll",value:function(e){if(Device.mobile){var t=!!e.x,n=!!e.y,i={"-webkit-overflow-scrolling":"touch"};(!t&&!n||t&&n)&&(i.overflow="scroll"),!t&&n&&(i.overflowY="scroll",i.overflowX="hidden"),t&&!n&&(i.overflowX="scroll",i.overflowY="hidden"),this.css(i),this.element.scrollParent=!0,this.element.preventEvent=function(e){return e.stopPropagation()},this.bind("touchmove",this.element.preventEvent)}}},{key:"removeOverflowScroll",value:function(){Device.mobile&&(this.css({overflow:"hidden",overflowX:"",overflowY:"","-webkit-overflow-scrolling":""}),this.unbind("touchmove",this.element.preventEvent))}},{key:"split",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={position:"relative",display:"block",width:"auto",height:"auto",margin:0,padding:0,cssFloat:"left"},n=[],i=this.text().split(e);this.empty()," "===e&&(e="&nbsp;");for(var a=0;a<i.length;a++)" "===i[a]&&(i[a]="&nbsp;"),n.push(this.create(".t","span").html(i[a]).css(t)),""!==e&&a<i.length-1&&n.push(this.create(".t","span").html(e).css(t));return n}}]),e}(),Accelerometer=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e=this;if(!this.active){this.active=!0,this.x=0,this.y=0,this.z=0,this.alpha=0,this.beta=0,this.gamma=0,this.heading=0,this.rotationRate={},this.rotationRate.alpha=0,this.rotationRate.beta=0,this.rotationRate.gamma=0,this.toRadians="ios"===Device.os?Math.PI/180:1;var t=function(t){switch(window.orientation){case 0:e.x=-t.accelerationIncludingGravity.x,e.y=t.accelerationIncludingGravity.y,e.z=t.accelerationIncludingGravity.z,t.rotationRate&&(e.rotationRate.alpha=t.rotationRate.beta*e.toRadians,e.rotationRate.beta=-t.rotationRate.alpha*e.toRadians,e.rotationRate.gamma=t.rotationRate.gamma*e.toRadians);break;case 180:e.x=t.accelerationIncludingGravity.x,e.y=-t.accelerationIncludingGravity.y,e.z=t.accelerationIncludingGravity.z,t.rotationRate&&(e.rotationRate.alpha=-t.rotationRate.beta*e.toRadians,e.rotationRate.beta=t.rotationRate.alpha*e.toRadians,e.rotationRate.gamma=t.rotationRate.gamma*e.toRadians);break;case 90:e.x=t.accelerationIncludingGravity.y,e.y=t.accelerationIncludingGravity.x,e.z=t.accelerationIncludingGravity.z,t.rotationRate&&(e.rotationRate.alpha=t.rotationRate.alpha*e.toRadians,e.rotationRate.beta=t.rotationRate.beta*e.toRadians,e.rotationRate.gamma=t.rotationRate.gamma*e.toRadians);break;case-90:e.x=-t.accelerationIncludingGravity.y,e.y=-t.accelerationIncludingGravity.x,e.z=t.accelerationIncludingGravity.z,t.rotationRate&&(e.rotationRate.alpha=-t.rotationRate.alpha*e.toRadians,e.rotationRate.beta=-t.rotationRate.beta*e.toRadians,e.rotationRate.gamma=t.rotationRate.gamma*e.toRadians)}},n=function(t){for(var n in t)~n.toLowerCase().indexOf("heading")&&(e.heading=t[n]);switch(window.orientation){case 0:e.alpha=t.beta*e.toRadians,e.beta=-t.alpha*e.toRadians,e.gamma=t.gamma*e.toRadians;break;case 180:e.alpha=-t.beta*e.toRadians,e.beta=t.alpha*e.toRadians,e.gamma=t.gamma*e.toRadians;break;case 90:e.alpha=t.alpha*e.toRadians,e.beta=t.beta*e.toRadians,e.gamma=t.gamma*e.toRadians;break;case-90:e.alpha=-t.alpha*e.toRadians,e.beta=-t.beta*e.toRadians,e.gamma=t.gamma*e.toRadians}e.tilt=t.beta*e.toRadians,e.yaw=t.alpha*e.toRadians,e.roll=-t.gamma*e.toRadians,"Android"===Device.os&&(e.heading=i(t.alpha,t.beta,t.gamma))},i=function(e,t,n){var i=Math.PI/180,a=t?t*i:0,r=n?n*i:0,o=e?e*i:0,s=Math.cos(r),u=Math.cos(o),l=Math.sin(a),c=Math.sin(r),h=Math.sin(o),d=-u*c-h*l*s,f=-h*c+u*l*s,v=Math.atan(d/f);return f<0?v+=Math.PI:d<0&&(v+=2*Math.PI),v*(180/Math.PI)};window.addEventListener("devicemotion",t,!0),window.addEventListener("deviceorientation",n,!0),this.stop=function(){e.active=!1,window.removeEventListener("devicemotion",t,!0),window.removeEventListener("deviceorientation",n,!0)}}}}]),e}(),Mouse=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e=this;if(!this.active){this.active=!0,this.x=0,this.y=0,this.normal={x:0,y:0},this.tilt={x:0,y:0},this.inverseNormal={x:0,y:0};var t=function(t){e.x=t.x,e.y=t.y,e.normal.x=t.x/Stage.width,e.normal.y=t.y/Stage.height,e.tilt.x=2*e.normal.x-1,e.tilt.y=1-2*e.normal.y,e.inverseNormal.x=e.normal.x,e.inverseNormal.y=1-e.normal.y};this.input=Stage.initClass(Interaction),Stage.events.add(this.input,Interaction.START,t),Stage.events.add(this.input,Interaction.MOVE,t),t({x:Stage.width/2,y:Stage.height/2}),this.stop=function(){e.active=!1,Stage.events.remove(e.input,Interaction.START,t),Stage.events.remove(e.input,Interaction.MOVE,t)}}}}]),e}();window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext||window.oAudioContext);var WebAudio=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var t=this,n=function(){function t(n){_classCallCheck(this,t);var i=this;this.asset=Assets.getPath(n),e.context.createStereoPanner&&(this.stereo=e.context.createStereoPanner()),this.output=e.context.createGain(),this.volume=1,this.rate=1,this.stereo&&this.stereo.connect(this.output),this.output.connect(e.output),this.gain={set value(t){i.volume=t,i.output.gain.setTargetAtTime(t,e.context.currentTime,.01)},get value(){return i.volume}},this.playbackRate={set value(t){i.rate=t,i.source&&i.source.playbackRate.setTargetAtTime(t,e.context.currentTime,.01)},get value(){return i.rate}}}return _createClass(t,[{key:"setPanTo",value:function(t){this.stereo&&this.stereo.pan.setTargetAtTime(t,e.context.currentTime,.01)}},{key:"stop",value:function(){this.source&&(this.source.stop(),this.playing=!1)}}]),t}();if(!this.active){this.active=!0;var i=this,a={},r=void 0;window.AudioContext&&(r=new AudioContext,this.output=r.createGain(),this.volume=1,this.output.connect(r.destination),this.gain={set value(e){i.volume=e,i.output.gain.setTargetAtTime(e,r.currentTime,.01)},get value(){return i.volume}},this.context=r),this.loadSound=function(e,n){var i=Promise.create();n&&i.then(n),n=i.resolve;var a=t.getSound(e);window.fetch(a.asset).then(function(e){if(!e.ok)return n();e.arrayBuffer().then(function(e){r.decodeAudioData(e,function(e){a.buffer=e,a.complete=!0,n()},function(){n()})})}).catch(function(){n()}),a.ready=function(){return i}},this.createSound=function(e,i,r){return a[e]=new n(i),"ios"===Device.os?r():t.loadSound(e,r),a[e]},this.getSound=function(e){return a[e]},this.trigger=function(e){if(r){"suspended"===r.state&&r.resume();var n=t.getSound(e);n.ready||t.loadSound(e),n.ready().then(function(){if(n.complete){if(n.stopping&&n.loop)return void(n.stopping=!1);n.playing=!0,n.source=r.createBufferSource(),n.source.buffer=n.buffer,n.source.loop=n.loop,n.source.playbackRate.setValueAtTime(n.rate,r.currentTime),n.source.connect(n.stereo?n.stereo:n.output),n.source.start(),n.output.gain.cancelScheduledValues(r.currentTime),n.output.gain.setValueAtTime(0,r.currentTime),defer(function(){return n.output.gain.setTargetAtTime(n.volume,r.currentTime,.01)})}})}},this.play=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments[2];if(r){"boolean"==typeof n&&(i=n,n=1);var a=t.getSound(e);a&&(a.volume=n,a.loop=!!i,t.trigger(e))}},this.fadeInAndPlay=function(e,n,i,a,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(r){var u=t.getSound(e);u&&(u.volume=0,u.loop=!!i,t.trigger(e),TweenManager.tween(u.gain,{value:n},a,o,s))}},this.fadeOutAndStop=function(e,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(r){var o=t.getSound(e);o&&o.playing&&(TweenManager.tween(o.gain,{value:0},n,i,a,function(){o.stopping&&(o.stopping=!1,o.stop())}),o.stopping=!0)}},this.mute=function(){r&&TweenManager.tween(t.gain,{value:0},300,"easeOutSine")},this.unmute=function(){r&&TweenManager.tween(t.gain,{value:1},500,"easeOutSine")},this.stop=function(){if(r){for(var e in t.active=!1,a){var n=a[e];n&&n.stop()}t.context.close()}}}window.WebAudio=this}}]),e}(),Stage=new(function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Stage")),n=e,i=void 0;function a(){"focus"!==i&&(i="focus",Events.emitter.fire(Events.VISIBILITY,{type:"focus"}))}function r(){"blur"!==i&&(i="blur",Events.emitter.fire(Events.VISIBILITY,{type:"blur"}))}function o(e){Events.emitter.fire(Events.KEYBOARD_DOWN,e)}function s(e){Events.emitter.fire(Events.KEYBOARD_UP,e)}function u(e){Events.emitter.fire(Events.KEYBOARD_PRESS,e)}function l(){n.size(),n.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait",Events.emitter.fire(Events.RESIZE)}return n.css({overflow:"hidden"}),n.preventScroll(),window.addEventListener("focus",a,!0),window.addEventListener("blur",r,!0),window.addEventListener("keydown",o,!0),window.addEventListener("keyup",s,!0),window.addEventListener("keypress",u,!0),window.addEventListener("resize",l,!0),window.addEventListener("orientationchange",l,!0),l(),e.destroy=function(){return Accelerometer.active&&Accelerometer.stop(),Mouse.active&&Mouse.stop(),WebAudio.active&&WebAudio.stop(),window.removeEventListener("focus",a,!0),window.removeEventListener("blur",r,!0),window.removeEventListener("keydown",o,!0),window.removeEventListener("keyup",s,!0),window.removeEventListener("keypress",u,!0),window.removeEventListener("resize",l,!0),window.removeEventListener("orientationchange",l,!0),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",e).call(e)},e}return _inherits(t,Interface),t}()),Vector2=function(){function e(t,n){_classCallCheck(this,e),this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.type="vector2"}return _createClass(e,[{key:"set",value:function(e,t){return this.x=e||0,this.y=t||0,this}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"copyTo",value:function(e){return e.x=this.x,e.y=this.y,this}},{key:"copy",value:function(e){return this.x=e.x||0,this.y=e.y||0,this}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y||1e-5}},{key:"length",value:function(){return Math.sqrt(this.lengthSq())}},{key:"normalize",value:function(){var e=this.length();return this.x/=e,this.y/=e,this}},{key:"setLength",value:function(e){return this.normalize().multiply(e),this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"multiply",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e,this.y/=e,this}},{key:"perpendicular",value:function(){var e=this.x,t=this.y;return this.x=-t,this.y=e,this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"deltaLerp",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0;i<n;i++)this.lerp(e,t);return this}},{key:"interp",value:function(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;this.calc||(this.calc=new e),this.calc.subVectors(this,t);var r=Interpolation.convertEase(i)(Math.clamp(Math.range(this.calc.lengthSq(),0,a*a,1,0),0,1)*(n/10));return this.lerp(t,r)}},{key:"setAngleRadius",value:function(e,t){return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this}},{key:"addAngleRadius",value:function(e,t){return this.x+=Math.cos(e)*t,this.y+=Math.sin(e)*t,this}},{key:"dot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return e.x*t.x+e.y*t.y}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"distanceTo",value:function(e,t){var n=this.x-e.x,i=this.y-e.y;return t?n*n+i*i:Math.sqrt(n*n+i*i)}},{key:"solveAngle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return Math.atan2(e.y-t.y,e.x-t.x)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";return this.x+e+this.y}}]),e}(),Interaction=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Stage;if(_classCallCheck(this,t),!t.initialized){t.CLICK="interaction_click",t.START="interaction_start",t.MOVE="interaction_move",t.DRAG="interaction_drag",t.END="interaction_end";var n={touchstart:[],touchmove:[],touchend:[]},i=function(e){return n.touchend.forEach(function(t){return t(e)})};t.bind=function(e,t){return n[e].push(t)},t.unbind=function(e,t){return n[e].remove(t)},Stage.bind("touchstart",function(e){return n.touchstart.forEach(function(t){return t(e)})}),Stage.bind("touchmove",function(e){return n.touchmove.forEach(function(t){return t(e)})}),Stage.bind("touchend",i),Stage.bind("touchcancel",i),t.initialized=!0}var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=a;a.x=0,a.y=0,a.hold=new Vector2,a.last=new Vector2,a.delta=new Vector2,a.move=new Vector2,a.velocity=new Vector2;var o=void 0,s=void 0,u=void 0;function l(e){r.isTouching=!0,r.x=e.x,r.y=e.y,r.hold.x=r.last.x=e.x,r.hold.y=r.last.y=e.y,r.delta.x=r.move.x=r.velocity.x=0,r.delta.y=r.move.y=r.velocity.y=0,o=0,r.events.fire(t.START,e,!0),s=u=Render.TIME}function c(e){r.isTouching&&(r.move.x=e.x-r.hold.x,r.move.y=e.y-r.hold.y),r.x=e.x,r.y=e.y,r.delta.x=e.x-r.last.x,r.delta.y=e.y-r.last.y,r.last.x=e.x,r.last.y=e.y,o+=r.delta.length();var n=Math.max(.001,Render.TIME-(u||Render.TIME));u=Render.TIME,r.velocity.x=Math.abs(r.delta.x)/n,r.velocity.y=Math.abs(r.delta.y)/n,r.events.fire(t.MOVE,e,!0),r.isTouching&&r.events.fire(t.DRAG,e,!0)}function h(e){r.isTouching&&(r.isTouching=!1,r.move.x=0,r.move.y=0,Math.max(.001,Render.TIME-(u||Render.TIME))>100&&(r.delta.x=0,r.delta.y=0),r.events.fire(t.END,e,!0),o<20&&Render.TIME-s<2e3&&r.events.fire(t.CLICK,e,!0))}return function(){e===Stage?t.bind("touchstart",l):e.bind("touchstart",l);t.bind("touchmove",c),t.bind("touchend",h)}(),a.destroy=function(){return t.unbind("touchstart",l),t.unbind("touchmove",c),t.unbind("touchend",h),e!==Stage&&e.unbind&&e.unbind("touchstart",l),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",a).call(a)},a}return _inherits(t,Component),t}(),AssetLoader=function(e){function t(e,n){_classCallCheck(this,t),Array.isArray(e)&&(e=e.map(function(e){return Utils.basename(e)}).reduce(function(t,n,i){return t[n]=e[i],t},{}));var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=i,r=Object.keys(e).length,o=0;for(var s in e)u(s,e[s]);function u(e,t){var n=Utils.extension(t);if(!n.includes(["jpg","jpeg","png","gif","svg"]))return n.includes(["mp3","m4a","ogg","wav","aif"])?window.AudioContext&&window.WebAudio?void window.WebAudio.createSound(e,t,l):l():void window.get(Assets.getPath(t)).then(function(t){"json"===n&&Assets.storeData(e,t),"js"===n&&window.eval(t.replace("use strict","")),l()}).catch(function(){l()});Assets.createImage(t,l)}function l(){a.percent=++o/r,a.events.fire(Events.PROGRESS,{percent:a.percent},!0),o===r&&(a.events.fire(Events.COMPLETE,null,!0),n&&n())}return i}return _inherits(t,Component),_createClass(t,null,[{key:"loadAssets",value:function(e,n){var i=Promise.create();return n||(n=i.resolve),i.loader=new t(e,n),i}}]),t}(),FontLoader=function(e){function t(e,n){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=i,r=void 0;return function(){Array.isArray(e)||(e=[e]);r=document.createElement("canvas").getContext("2d"),e.forEach(function(e){return function(e){r.font='12px "'+e+'"',r.fillText("LOAD",0,0)}(e.replace(/"/g,"'"))}),t=function(){a.percent=1,a.events.fire(Events.PROGRESS,{percent:a.percent},!0),a.events.fire(Events.COMPLETE,null,!0),n&&n()},document.fonts&&document.fonts.ready?document.fonts.ready.then(t):a.delayedCall(t,500);var t}(),i}return _inherits(t,Component),_createClass(t,null,[{key:"loadFonts",value:function(e,n){var i=Promise.create();return n||(n=i.resolve),i.loader=new t(e,n),i}}]),t}(),StateDispatcher=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=n;n.locked=!1;var a=void 0,r=void 0,o="/";function s(){c(null,l())}function u(e){c(e.state,l())}function l(){return e?location.hash.slice(3):"/"!==o?location.pathname.split(o)[1]:location.pathname.slice(1)||""}function c(t,n){n!==a&&(i.locked?a&&(e?location.hash="!/"+a:history.pushState(r,null,o+a)):(a=n,r=t,i.events.fire(Events.UPDATE,{value:t,path:n},!0)))}return e?window.addEventListener("hashchange",s,!0):window.addEventListener("popstate",u,!0),a=l(),n.getState=function(){var e=l();return{value:r,path:e}},n.setState=function(t,n){"object"!==(void 0===t?"undefined":_typeof(t))&&(n=t,t=null),n!==a&&(a=n,r=t,e?location.hash="!/"+n:history.pushState(t,null,o+n))},n.replaceState=function(t,n){"object"!==(void 0===t?"undefined":_typeof(t))&&(n=t,t=null),n!==a&&(a=n,r=t,e?history.replaceState(null,null,"#!/"+n):history.replaceState(t,null,o+n))},n.setTitle=function(e){return document.title=e},n.lock=function(){return n.locked=!0},n.unlock=function(){return n.locked=!1},n.forceHash=function(){return e=!0},n.setPathRoot=function(e){o="/"===e.charAt(0)?e:"/"+e},n.destroy=function(){return window.removeEventListener("hashchange",s,!0),window.removeEventListener("popstate",u,!0),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",n).call(n)},n}return _inherits(t,Component),t}(),Storage=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"set",value:function(e,t){null!==t&&"object"===(void 0===t?"undefined":_typeof(t))&&(t=JSON.stringify(t)),null===t?window.localStorage.removeItem(e):window.localStorage[e]=t}},{key:"get",value:function(e){var t=window.localStorage[e];if(t){var n=void 0;t.charAt&&(n=t.charAt(0)),"{"!==n&&"["!==n||(t=JSON.parse(t)),"true"!==t&&"false"!==t||(t="true"===t)}return t}}]),e}(),CanvasValues=function(){function e(t){_classCallCheck(this,e),this.styles={},t?this.styled=!1:this.data=new Float32Array(6)}return _createClass(e,[{key:"setTRSA",value:function(e,t,n,i,a,r){var o=this.data;o[0]=e,o[1]=t,o[2]=n,o[3]=i,o[4]=a,o[5]=r}},{key:"calculate",value:function(e){var t=e.data,n=this.data;n[0]=n[0]+t[0],n[1]=n[1]+t[1],n[2]=n[2]+t[2],n[3]=n[3]*t[3],n[4]=n[4]*t[4],n[5]=n[5]*t[5]}},{key:"calculateStyle",value:function(e){if(!e.styled)return!1;this.styled=!0;var t=e.values;for(var n in t)this.styles[n]||(this.styles[n]=t[n])}},{key:"shadowOffsetX",set:function(e){this.styled=!0,this.styles.shadowOffsetX=e},get:function(){return this.styles.shadowOffsetX}},{key:"shadowOffsetY",set:function(e){this.styled=!0,this.styles.shadowOffsetY=e},get:function(){return this.styles.shadowOffsetY}},{key:"shadowBlur",set:function(e){this.styled=!0,this.styles.shadowBlur=e},get:function(){return this.styles.shadowBlur}},{key:"shadowColor",set:function(e){this.styled=!0,this.styles.shadowColor=e},get:function(){return this.styles.shadowColor}},{key:"values",get:function(){return this.styles}}]),e}(),CanvasObject=function(){function e(){_classCallCheck(this,e),this.visible=!0,this.blendMode="source-over",this.x=0,this.y=0,this.px=0,this.py=0,this.clipX=0,this.clipY=0,this.clipWidth=0,this.clipHeight=0,this.width=0,this.height=0,this.rotation=0,this.scale=1,this.opacity=1,this.values=new CanvasValues,this.styles=new CanvasValues(!0),this.children=[]}return _createClass(e,[{key:"updateValues",value:function(){this.values.setTRSA(this.x,this.y,Math.radians(this.rotation),this.scaleX||this.scale,this.scaleY||this.scale,this.opacity),this.parent.values&&this.values.calculate(this.parent.values),this.parent.styles&&this.styles.calculateStyle(this.parent.styles)}},{key:"render",value:function(e){if(!this.visible)return!1;this.updateValues(),this.draw&&this.draw(e);for(var t=0;t<this.children.length;t++)this.children[t].render(e)}},{key:"startDraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=this.canvas.context,a=this.values.data,r=a[0]+e,o=a[1]+t;if(i.save(),n||(i.globalCompositeOperation=this.blendMode),i.translate(r,o),i.rotate(a[2]),i.scale(a[3],a[4]),i.globalAlpha=a[5],this.styles.styled){var s=this.styles.values;for(var u in s)i[u]=s[u]}}},{key:"endDraw",value:function(){this.canvas.context.restore()}},{key:"add",value:function(e){e.setCanvas(this.canvas),e.parent=this,this.children.push(e),e.z=this.children.length}},{key:"setCanvas",value:function(e){this.canvas=e;for(var t=0;t<this.children.length;t++)this.children[t].setCanvas(e)}},{key:"remove",value:function(e){e.canvas=null,e.parent=null,this.children.remove(e)}},{key:"isMask",value:function(){for(var e=this;e;){if(e.masked)return!0;e=e.parent}return!1}},{key:"unmask",value:function(){this.masked.mask(null),this.masked=null}},{key:"setZ",value:function(e){this.z=e,this.parent.children.sort(function(e,t){return e.z-t.z})}},{key:"follow",value:function(e){return this.x=e.x,this.y=e.y,this.px=e.px,this.py=e.py,this.clipX=e.clipX,this.clipY=e.clipY,this.clipWidth=e.clipWidth,this.clipHeight=e.clipHeight,this.width=e.width,this.height=e.height,this.rotation=e.rotation,this.scale=e.scale,this.scaleX=e.scaleX||e.scale,this.scaleY=e.scaleY||e.scale,this}},{key:"visible",value:function(){return this.visible=!0,this}},{key:"invisible",value:function(){return this.visible=!1,this}},{key:"transform",value:function(e){for(var t in e)"number"==typeof e[t]&&(this[t]=e[t]);return this}},{key:"transformPoint",value:function(e,t){return this.px="number"==typeof e?e:this.width*(parseFloat(e)/100),this.py="number"==typeof t?t:this.height*(parseFloat(t)/100),this}},{key:"clip",value:function(e,t,n,i){return this.clipX=e,this.clipY=t,this.clipWidth=n,this.clipHeight=i,this}},{key:"destroy",value:function(){if(this.children)for(var e=this.children.length-1;e>=0;e--)this.children[e].destroy();return Utils.nullObject(this)}}]),e}(),CanvasGraphics=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=i;i.width=e,i.height=n,i.props={};var r=[],o=void 0;return i.draw=function(e){if(i.isMask()&&!e)return!1;var t=i.canvas.context;i.startDraw(i.px,i.py,e),function(e){for(var t in a.props)e[t]=a.props[t]}(t),i.clipWidth&&i.clipHeight&&(t.beginPath(),t.rect(i.clipX,i.clipY,i.clipWidth,i.clipHeight),t.clip());for(var n=0;n<r.length;n++){var s=r[n];if(s){var u=s.shift();t[u].apply(t,s),s.unshift(u)}}i.endDraw(),o&&(t.globalCompositeOperation=o.blendMode,o.render(!0))},i.clear=function(){for(var e=r.length-1;e>=0;e--)r[e].length=0;r.length=0},i.arc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.radius||i.width/2,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e&&!t&&(a=Math.radians(-90),o=e,e=0,t=0),r.push(["arc",e,t,n,a,o,s])},i.quadraticCurveTo=function(e,t,n,i){r.push(["quadraticCurveTo",e,t,n,i])},i.bezierCurveTo=function(e,t,n,i,a,o){r.push(["bezierCurveTo",e,t,n,i,a,o])},i.fillRect=function(e,t,n,i){r.push(["fillRect",e,t,n,i])},i.clearRect=function(e,t,n,i){r.push(["clearRect",e,t,n,i])},i.strokeRect=function(e,t,n,i){r.push(["strokeRect",e,t,n,i])},i.moveTo=function(e,t){r.push(["moveTo",e,t])},i.lineTo=function(e,t){r.push(["lineTo",e,t])},i.stroke=function(){r.push(["stroke"])},i.fill=function(){o||r.push(["fill"])},i.beginPath=function(){r.push(["beginPath"])},i.closePath=function(){r.push(["closePath"])},i.fillText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r.push(["fillText",e,t,n])},i.strokeText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r.push(["strokeText",e,t,n])},i.setLineDash=function(e){r.push(["setLineDash",e])},i.drawImage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.width,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.height,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:e.width,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:e.height;r.push(["drawImage",e,t,n,a,o,s+-i.px,u+-i.py,l,c])},i.mask=function(e){if(!e)return o=null;o=e,e.masked=i;for(var t=0;t<r.length;t++)"fill"!==r[t][0]&&"stroke"!==r[t][0]||(r[t].length=0,r.splice(t,1))},i.clone=function(){var e=new t(i.width,i.height);return e.visible=i.visible,e.blendMode=i.blendMode,e.opacity=i.opacity,e.follow(i),e.props=Utils.cloneObject(i.props),e.setDraw(Utils.cloneArray(r)),e},i.setDraw=function(e){r=e},i}return _inherits(t,CanvasObject),_createClass(t,[{key:"strokeStyle",set:function(e){this.props.strokeStyle=e},get:function(){return this.props.strokeStyle}},{key:"fillStyle",set:function(e){this.props.fillStyle=e},get:function(){return this.props.fillStyle}},{key:"lineWidth",set:function(e){this.props.lineWidth=e},get:function(){return this.props.lineWidth}},{key:"lineCap",set:function(e){this.props.lineCap=e},get:function(){return this.props.lineCap}},{key:"lineDashOffset",set:function(e){this.props.lineDashOffset=e},get:function(){return this.props.lineDashOffset}},{key:"lineJoin",set:function(e){this.props.lineJoin=e},get:function(){return this.props.lineJoin}},{key:"miterLimit",set:function(e){this.props.miterLimit=e},get:function(){return this.props.miterLimit}},{key:"font",set:function(e){this.props.font=e},get:function(){return this.props.font}},{key:"textAlign",set:function(e){this.props.textAlign=e},get:function(){return this.props.textAlign}},{key:"textBaseline",set:function(e){this.props.textBaseline=e},get:function(){return this.props.textBaseline}}]),t}(),Canvas=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this,a=arguments[2],r=arguments[3];_classCallCheck(this,e),"boolean"==typeof n&&(a=n,n=t);var o=this;function s(e,t){var n=a?2:1;if(o.element.width=e*n,o.element.height=t*n,o.width=e,o.height=t,o.scale=n,o.object.size(o.width,o.height),o.context.scale(n,n),o.element.style.width=e+"px",o.element.style.height=t+"px",r){var i=new CanvasGraphics(o.width,o.height);i.fillStyle="rgba(255, 255, 255, 0.002)",i.fillRect(0,0,o.width,o.height),i.setCanvas(o),i.parent=o,o.children[0]=i,i.z=1}}this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.object=new Interface(this.element),this.children=[],this.retina=a,s(t,n),this.size=s,this.toDataURL=function(e,t){return i.element.toDataURL(e,t)},this.render=function(e){"boolean"==typeof e&&e||i.clear();for(var t=0;t<i.children.length;t++)i.children[t].render()},this.clear=function(){i.context.clearRect(0,0,i.element.width,i.element.height)},this.add=function(e){e.setCanvas(i),e.parent=i,i.children.push(e),e.z=i.children.length},this.remove=function(e){e.canvas=null,e.parent=null,i.children.remove(e)},this.destroy=function(){if(i.children)for(var e=i.children.length-1;e>=0;e--)i.children[e].destroy();return i.object.destroy(),Utils.nullObject(i)},this.getImageData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.element.width,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.element.height;return i.imageData=i.context.getImageData(e,t,n,a),i.imageData},this.getPixel=function(e,t,n){i.imageData&&!n||i.getImageData();var a={},r=4*(e+t*i.element.width),o=i.imageData.data;return a.r=o[r],a.g=o[r+1],a.b=o[r+2],a.a=o[r+3],a},this.putImageData=function(e){i.context.putImageData(e,0,0)}};navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);var Shader=function(e){function t(e,n,i){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=a;function o(e,t){return(e=("vs"===t?["precision highp float;","precision highp int;","attribute vec2 uv;","attribute vec3 position;","attribute vec3 normal;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"):[~e.indexOf("dFdx")?"#extension GL_OES_standard_derivatives : enable":"","precision highp float;","precision highp int;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"))+"\n\n"+e).replace(/#s?chunk\(\s?(\w+)\s?\);/g,function(e,t){return THREE.ShaderChunk[t]+"\n"})}return a.uniforms={},a.properties={},function(){for(var e in i)void 0!==i[e].value?r.uniforms[e]=i[e]:r.properties[e]=i[e]}(),function(){var t={};for(var i in t.vertexShader=o(e,"vs"),t.fragmentShader=o(n,"fs"),t.uniforms=r.uniforms,r.properties)t[i]=r.properties[i];r.material=new THREE.RawShaderMaterial(t),r.material.shader=r,r.uniforms=r.material.uniforms}(),a}return _inherits(t,Component),_createClass(t,[{key:"set",value:function(e,t){TweenManager.clearTween(this.uniforms[e]),this.uniforms[e].value=t}},{key:"tween",value:function(e,t,n,i,a,r,o){return TweenManager.tween(this.uniforms[e],{value:t},n,i,a,r,o)}},{key:"getValues",value:function(){var e={};for(var t in this.uniforms)e[t]=this.uniforms[t].value;return e}},{key:"copyUniformsTo",value:function(e){for(var t in this.uniforms)e.uniforms[t]=this.uniforms[t]}},{key:"cloneUniformsTo",value:function(e){for(var t in this.uniforms)e.uniforms[t]={type:this.uniforms[t].type,value:this.uniforms[t].value}}},{key:"destroy",value:function(){return this.material.dispose(),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(),vertFluidBasic="#define GLSLIFY 1\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragpass="#define GLSLIFY 1\n// Based on https://www.shadertoy.com/view/XlsBDf by davidar\n\nuniform float time;\nuniform int frame;\nuniform vec2 resolution;\nuniform vec2 mouse;\nuniform vec2 velocity;\nuniform vec2 strength;\nuniform sampler2D texture;\n\n#define T(p) texture2D(texture, (p) / resolution.xy)\n#define length2(p) dot(p, p)\n\n#define dt 0.15\n#define K 0.2\n#define nu 0.5\n#define kappa 0.1\n\nvoid main() {\n    vec2 p = gl_FragCoord.xy;\n\n    if (frame < 10) {\n        gl_FragColor = vec4(0, 0, 1, 0);\n        return;\n    }\n\n    vec4 color = T(p);\n\n    vec4 n = T(p + vec2(0, 1));\n    vec4 e = T(p + vec2(1, 0));\n    vec4 s = T(p - vec2(0, 1));\n    vec4 w = T(p - vec2(1, 0));\n\n    vec4 laplacian = (n + e + s + w - 4.0 * color);\n\n    vec4 dx = (e - w) / 2.0;\n    vec4 dy = (n - s) / 2.0;\n\n    // velocity field divergence\n    float div = dx.x + dy.y;\n\n    // mass conservation, Euler method step\n    color.z -= dt * (dx.z * color.x + dy.z * color.y + div * color.z);\n\n    // semi-Langrangian advection\n    color.xyw = T(p - dt * color.xy).xyw;\n\n    // viscosity/diffusion\n    color.xyw += dt * vec3(nu, nu, kappa) * laplacian.xyw;\n\n    // nullify divergence with pressure field gradient\n    color.xy -= K * vec2(dx.z, dy.z);\n\n    // external source\n    vec2 m = mouse.xy * resolution.xy;\n    color.xyw += dt * exp(-length2(p - m) / strength.x) * vec3(p - m + (velocity.xy * strength.y), 1);\n\n    // dissipation\n    color.w -= dt * 0.0005;\n\n    color.xyzw = clamp(color.xyzw, vec4(-5, -5, 0.5, 0), vec4(5, 5, 3, 5));\n\n    gl_FragColor = color;\n}\n",fragview="#define GLSLIFY 1\n// Based on https://www.shadertoy.com/view/XlsBDf by davidar\n\nuniform float time;\nuniform int frame;\nuniform vec2 resolution;\nuniform vec2 mouse;\nuniform sampler2D texture;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 c = texture2D(texture, gl_FragCoord.xy / resolution.xy);\n\n    // velocity\n    gl_FragColor.rgb = 0.6 + 0.6 * cos(6.3 * atan(c.y, c.x) / (2.0 * PI) + vec3(0, 23, 21));\n\n    // ink\n    gl_FragColor.rgb *= c.w / 5.0;\n\n    // local fluid density\n    gl_FragColor.rgb += clamp(c.z - 1.0, 0.0, 1.0) / 10.0;\n    gl_FragColor.a = 1.0;\n}\n";Config.UI_COLOR="white",Config.UI_OFFSET=Device.phone?10:20,Config.NAV_WIDTH=320,Config.ABOUT_COPY="Future web framework.",Config.ABOUT_HYDRA_URL="https://medium.com/@activetheory/mira-exploring-the-potential-of-the-future-web-e1f7f326d58e",Config.ABOUT_GITHUB_URL="https://github.com/pschroen/alien.js",Config.ASSETS=["assets/js/lib/three.min.js","assets/sounds/bass_drum.mp3","assets/sounds/deep_spacy_loop.mp3","assets/sounds/water_loop.mp3"],Config.EXAMPLES=[],Global.EXAMPLE_INDEX=0,Global.SOUND=!0,Events.START="start",Events.UI_HIDE="ui_hide",Events.UI_SHOW="ui_show",Events.OPEN_NAV="open_nav",Events.CLOSE_NAV="close_nav",Events.OPEN_ABOUT="open_about",Events.CLOSE_ABOUT="close_about",Assets.CORS="Anonymous";var Cursor=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"clear",value:function(){Stage.element.className=""}},{key:"grabbable",value:function(){Stage.element.className="grabbable"}},{key:"grabbing",value:function(){Stage.element.className="grabbing"}},{key:"pointer",value:function(){Stage.element.className="pointer"}}]),e}(),Data=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e=this,t=this;function n(e){t.setExample(e.path)}this.dispatcher=Stage.initClass(StateDispatcher,!0),function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Config.EXAMPLES,t=0;t<e.length;t++)e[t].index=t}(),Stage.events.add(t.dispatcher,Events.UPDATE,n),this.getExample=function(e){return function(e,t){for(var n=0;n<t.length;n++)if(t[n].path===e)return t[n];return null}(e,Config.EXAMPLES)},this.setExample=function(t){var n=e.getExample(t);n&&(Global.EXAMPLE_INDEX=n.index,Stage.events.fire(Events.CLOSE_NAV),Stage.events.fire(Events.OPEN_NAV,{direction:-1,item:n}))},this.next=function(){Global.EXAMPLE_INDEX++,Global.EXAMPLE_INDEX>Config.EXAMPLES.length-1&&(Global.EXAMPLE_INDEX=0);for(var e=Config.EXAMPLES[Global.EXAMPLE_INDEX];!e.slug&&""!==e.path;)Global.EXAMPLE_INDEX++,Global.EXAMPLE_INDEX>Config.EXAMPLES.length-1&&(Global.EXAMPLE_INDEX=0),e=Config.EXAMPLES[Global.EXAMPLE_INDEX];return e}}}]),e}(),ExampleLoader=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=n;function a(){i.events.fire(Events.COMPLETE)}return window.get("https://rawgit.com/pschroen/alien.js/master/"+e.path+"dist/assets/js/"+e.slug+".js?"+Utils.timestamp()).then(function(t){window.eval("(function(){"+t.replace("new Main;","Global.EXAMPLE=Stage;Global.STAGE.add(Stage);Global.STAGE.element.insertBefore(Stage.element, Global.STAGE.element.firstChild);Assets.CDN='https://rawgit.com/pschroen/alien.js/master/"+e.path+"dist/';new Main;")+"})();"),Global.EXAMPLE.css({left:0,top:0}),a()}).catch(function(){a()}),n}return _inherits(t,Component),t}(),AudioController=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){var e=this,t=WebAudio.getSound("water_loop"),n=0,i=0,a=0,r=0;this.updatePosition=function(){var t,o,s,u,l,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mouse.x,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mouse.y,d=(t=c/Stage.width,o=h/Stage.height,s=.96,u=Math.abs(t-a)+Math.abs(o-r),0===(l=WebAudio.context.currentTime-i)?n:(n+=u/l*.01,n*=s,i=WebAudio.context.currentTime,Math.abs(a-t)+Math.abs(r-o)>.2&&(n=0),a=t,r=o,n));e.trigger("mouse_move",d,.8*(c/Stage.width*2-1),Math.abs(1-h/Stage.height))},this.trigger=function(e){switch(e){case"fluid_start":WebAudio.play("water_loop",0,!0),WebAudio.fadeInAndPlay("deep_spacy_loop",.71,!0,2e3,"linear");break;case"fluid_stop":WebAudio.fadeOutAndStop("water_loop",500,"linear"),WebAudio.fadeOutAndStop("deep_spacy_loop",500,"linear");break;case"mouse_move":t&&(TweenManager.tween(t.gain,{value:arguments.length<=1?void 0:arguments[1]},100,"linear"),t.setPanTo(arguments.length<=2?void 0:arguments[2]),t.playbackRate.value=.8+(arguments.length<=3?void 0:arguments[3])/2.5);break;case"about_section":TweenManager.tween(WebAudio.gain,{value:.3},1e3,"linear");break;case"fluid_section":TweenManager.tween(WebAudio.gain,{value:1},500,"linear");break;case"sound_off":TweenManager.tween(WebAudio.gain,{value:0},500,"linear");break;case"sound_on":TweenManager.tween(WebAudio.gain,{value:1},500,"linear")}},this.mute=function(){e.trigger("sound_off")},this.unmute=function(){e.trigger("sound_on")}}}]),e}(),About=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"About")),n=e,i=[],a=void 0,r=void 0,o=void 0;function s(){Stage.width<800?(a.transform({x:100}),i.forEach(function(e){return e.css({left:270})})):(a.transform({x:0}),i.forEach(function(e){return e.css({left:350})}))}function u(e){"over"===e.action&&e.object.letters.forEach(function(e,t){e.tween({y:-5,opacity:0},125,"easeOutCubic",15*t,function(){e.transform({y:5}).tween({y:0,opacity:1},300,"easeOutCubic")})})}function l(e){AudioController.mute(),setTimeout(function(){var t=e.object.title.toLowerCase();getURL(~t.indexOf("source")?Config.ABOUT_GITHUB_URL:Config.ABOUT_HYDRA_URL)},300)}return n.size("100%").size(800,430).center(),(a=n.create(".wrapper")).size(600,350).enable3D(2e3),a.rotationY=0,a.rotationX=0,(r=a.initClass(AlienKitty)).center().transform({z:-20}).css({marginTop:-88}),(o=n.create(".description")).size(260,50),o.fontStyle("Roboto Mono",11,Config.UI_COLOR),o.css({left:350,top:200,fontWeight:"400",lineHeight:25,letterSpacing:.36,opacity:.35}),o.text(Config.ABOUT_COPY),i.push(o),["Source code","Inspiration"].forEach(function(e,t){var a=n.create(".link");a.size("auto",20),a.fontStyle("Roboto Mono",11,Config.UI_COLOR),a.css({left:350,top:250+27*t,fontWeight:"400",lineHeight:15,letterSpacing:1,textTransform:"uppercase"}),a.text(e),a.letters=a.split(),a.interact(u,l),a.hit.mouseEnabled(!0),a.title=e,i.push(a)}),n.events.add(Events.RESIZE,s),s(),e.update=function(){Device.mobile?(a.rotationY+=.07*(Accelerometer.x-a.rotationY),a.rotationX+=.07*(-Accelerometer.y-a.rotationX)):(a.rotationY+=.07*(Math.range(Mouse.x,0,Stage.width,-5,5)-a.rotationY),a.rotationX+=.07*(-Math.range(Mouse.y,0,Stage.height,-10,10)-a.rotationX)),a.transform()},e.animateIn=function(){r.ready().then(r.animateIn),i.forEach(function(e,t){return e.transform({y:50}).css({opacity:0}).tween({y:0,opacity:e.hit?1:.75},1e3,"easeOutCubic",500+80*t)})},e.animateOut=function(t){r.animateOut(),i.forEach(function(e,t){return e.tween({y:20,opacity:0},500,"easeInCubic",40+40*(i.length-t))}),e.delayedCall(t,1e3)},e}return _inherits(t,Interface),t}(),Button=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Button")),n=e;e.needsUpdate=!1;var i={width:80,height:60,radius:24,posX:52,scale:1,littleCircleScale:0,lineWidth:0,multiTween:!0},a=void 0,r=void 0,o=void 0,s=void 0,u=void 0,l=void 0;return n.size(i.width,i.height),n.css({top:Config.UI_OFFSET+6,right:Config.UI_OFFSET+6,opacity:0}),a=n.initClass(Canvas,i.width,i.height,!0,!0),(r=n.initClass(CanvasGraphics)).x=i.posX,r.y=30,r.radius=9,r.fillStyle="#f00",(o=n.initClass(CanvasGraphics)).blendMode="source-out",o.lineWidth=1.5,o.strokeStyle=Config.UI_COLOR,a.add(r),a.add(o),(s=n.initClass(CanvasGraphics)).x=52,s.y=30,s.radius=i.radius,s.lineWidth=1.5,s.strokeStyle=Config.UI_COLOR,a.add(s),(u=n.initClass(CanvasGraphics)).x=i.posX,u.y=30,u.radius=5*i.littleCircleScale,u.lineWidth=1.5,u.strokeStyle=Config.UI_COLOR,a.add(u),e.update=function(){r.x=i.posX,r.clear(),r.beginPath(),r.arc(),r.fill(),o.clear(),o.beginPath(),o.moveTo(52,30),o.lineTo(52*(1-i.lineWidth),30),o.stroke(),s.radius=i.radius,s.clear(),s.beginPath(),s.arc(),s.stroke(),u.x=i.posX,u.radius=5*i.littleCircleScale,u.clear(),i.littleCircleScale>=0&&(u.beginPath(),u.arc(),u.stroke()),a.render()},e.showButton=function(){Timer.clearTimeout(l),TweenManager.clearTween(i),i.posX=52,i.lineWidth=0,i.radius=0,i.scale=0,i.littleCircleScale=0,e.needsUpdate=!0,TweenManager.tween(i,{radius:24,scale:1,littleCircleScale:0},400,"easeOutCubic",function(){return e.needsUpdate=!1}),e.tween({opacity:1},400,"easeOutCubic")},e.hideButton=function(){e.animatedIn=!1,Timer.clearTimeout(l),TweenManager.clearTween(i),i.posX=52,i.lineWidth=0,e.needsUpdate=!0,TweenManager.tween(i,{radius:0,scale:0,littleCircleScale:0},400,"easeOutCubic",function(){return e.needsUpdate=!1}),e.tween({opacity:0},400,"easeOutCubic")},e.animateIn=function(){if(!e.animatedIn){e.animatedIn=!0,Timer.clearTimeout(l),TweenManager.clearTween(i),e.needsUpdate=!0;!function t(){TweenManager.tween(i,{scale:0,littleCircleScale:1},400,"easeOutCubic"),TweenManager.tween(i,{lineWidth:1},600,"easeOutQuart",200),TweenManager.tween(i,{radius:18,posX:6},800,"easeOutQuart",function(){TweenManager.tween(i,{radius:24,posX:52,spring:1,damping:.5},800,"easeOutElastic",500,function(){l=e.delayedCall(function(){e.animatedIn&&t()},500)})})}()}},e.animateOut=function(){e.animatedIn=!1,Timer.clearTimeout(l),TweenManager.clearTween(i),e.needsUpdate=!0,TweenManager.tween(i,{posX:52,spring:1,damping:.5},600,"easeOutElastic"),TweenManager.tween(i,{radius:24,spring:1,damping:.5},400,"easeOutElastic",200),TweenManager.tween(i,{scale:1,littleCircleScale:0},400,"easeOutCubic",200),TweenManager.tween(i,{lineWidth:0},400,"easeOutQuart",200,function(){return e.needsUpdate=!1})},e}return _inherits(t,Interface),t}(),MuteButton=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"MuteButton")),n=e;e.enabled=!0,e.needsUpdate=!1;var i={points:["0.0048959479406107675,1.0192572485968008","0.7440789483408068,1.1424541571342257","1.3665350510328338,1.5722319717448148","1.8516030710118443,2.161114514098655","2.240878664481656,2.820613552436704","2.5676840288925646,3.514673473755097","2.852586758087085,4.227720074875111","3.1087495131409355,4.952019250371872","3.34491745226601,5.6833491709621455","3.567664418707203,6.419033113515608","3.7818384346752723,7.157364720628305","3.991883208559571,7.89692012231687","4.20161725978479,8.636571274379023","4.414765516613279,9.375206805563112","4.63544224654283,10.111540516820927","4.868521677309701,10.84389177472948","5.119915026729167,11.569934940861607","5.39761872371416,12.285923841396897","5.713181917701164,12.985402709853393","6.084405647772996,13.655730591437308","6.539749114583216,14.269197994950089","7.119419081486065,14.759057858970056","7.833381135450722,14.992018994281448","8.572728856296692,14.870293116359157","9.195338448495015,14.440785522641196","9.680208055209789,13.851743515423879","10.069105540383624,13.192016772217295","10.395484129094136,12.49774462805595","10.679967569881235,11.784536775684892","10.935718523820654,11.060079921712221","11.171497123710282,10.328625192177268","11.393877212794976,9.592821204379307","11.607714300578508,8.854391465042932","11.817437120864248,8.114743171200885","12.026879167662877,7.375006748905537","12.23976162559024,6.636291663928467","12.460198762144124,5.899884115317883","12.693064805060779,5.167449492656206","12.94425974121603,4.441348209381902","13.221791230462259,3.7252818987187086","13.537197191296478,3.0257489622651876","13.908222508104089,2.355292698961461","14.363251508608741,1.7415778212244037","14.942374903123344,1.2510267443085306","15.655824077518226,1.016232894445948","16.396796540942944,1.1306049293101161","17.02729399630583,1.5480186791997996","17.520961172283407,2.12932705736226","17.916597221147896,2.7848665081119037","18.247580495047032,3.4768520761875497","18.535159931485325,4.188764440295052","18.792722810328243,4.9125381796621195","19.029373679851147,5.6437213782868945","19.25191100208862,6.379463437982535","19.46526890312083,7.1180337064741765","19.673999657085446,7.8579706805470435","19.882131427610886,8.598101537217175","20.0932506280392,9.33733538914369","20.311684913718352,10.074372222547858","20.542181228403805,10.807581899228586","20.790759355659176,11.534616867737883","21.065453160862333,12.251819559078669","21.37769574040844,12.95281518967201","21.74512715658105,13.625332467857985","22.19607183875985,14.242202106038283","22.770556855267387,14.73847581597864","23.48079398096972,14.98341765723907","24.236808416010575,14.995504117332072"],width:24,height:16,progress:1,yMultiplier:1},a=void 0,r=void 0,o=void 0;function s(e){TweenManager.clearTween(i),n.needsUpdate=!0,"over"===e.action?TweenManager.tween(i,{yMultiplier:Global.SOUND?.75:.25},275,"easeInOutCubic",function(){return n.needsUpdate=!1}):TweenManager.tween(i,{yMultiplier:Global.SOUND?1:0},275,"easeInOutCubic",function(){return n.needsUpdate=!1})}function u(){Global.SOUND?(AudioController.mute(),Global.SOUND=!1,TweenManager.clearTween(i),n.needsUpdate=!0,TweenManager.tween(i,{yMultiplier:0},300,"easeOutCubic",function(){return n.needsUpdate=!1})):(AudioController.unmute(),Global.SOUND=!0,TweenManager.clearTween(i),n.needsUpdate=!0,TweenManager.tween(i,{yMultiplier:1},300,"easeOutCubic",function(){return n.needsUpdate=!1})),Storage.set("sound",Global.SOUND)}return n.size(i.width,i.height),n.css({left:Config.UI_OFFSET+10,bottom:Config.UI_OFFSET+10,opacity:0}),Global.SOUND||(i.yMultiplier=0),a=n.initClass(Canvas,i.width,i.height,!0,!0),(r=n.initClass(CanvasGraphics)).lineWidth=1.5,r.strokeStyle=Config.UI_COLOR,a.add(r),o=i.points.map(function(e){return e.split(",")}),n.interact(s,u),n.hit.size(2*i.width,2*i.height).center(),e.update=function(){!function(){var e=o.length*i.progress,t=!0;r.clear(),r.beginPath();for(var n=0;n<o.length;n++)e>=n&&(t?(t=!1,r.moveTo(o[n][0],Math.max(o[n][1]*i.yMultiplier+.5*i.height*(1-i.yMultiplier),1))):r.lineTo(o[n][0],Math.max(o[n][1]*i.yMultiplier+.5*i.height*(1-i.yMultiplier),1)));r.stroke()}(),a.render()},e.showButton=function(){e.enabled&&(TweenManager.clearTween(i),i.progress=0,e.needsUpdate=!0,TweenManager.tween(i,{progress:1},1020,"easeInOutExpo",function(){return e.needsUpdate=!1}),e.tween({opacity:1},400,"easeOutCubic"),e.mouseEnabled(!0))},e.hideButton=function(){e.mouseEnabled(!1),TweenManager.clearTween(i),e.needsUpdate=!0,TweenManager.tween(i,{progress:.94},1160,"easeInOutQuart",function(){return e.needsUpdate=!1}),e.tween({opacity:0},400,"easeOutCubic")},e}return _inherits(t,Interface),t}(),FooterSide=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"FooterSide")),n=e,i=void 0;return n.size("100%").mouseEnabled(!1),(i=n.create(".title")).size("100%"),i.inner=i.create(".inner"),i.inner.fontStyle("Roboto Mono",11,Config.UI_COLOR),i.inner.css({top:-30,right:6,fontWeight:"400",lineHeight:15,letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"}),i.inner.text(Config.EXAMPLES[Global.EXAMPLE_INDEX].sideTitle),i.inner.element.style.transformOrigin="right center",i.inner.element.style.transform="rotate(-90deg) translateX(100%)",e.update=function(){i.tween({x:-10,opacity:0},300,"easeInSine",function(){i.inner.text(Config.EXAMPLES[Global.EXAMPLE_INDEX].sideTitle),i.transform({x:10}).tween({x:0,opacity:1},1e3,"easeOutCubic")})},e}return _inherits(t,Interface),t}(),FooterInfo=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"FooterInfo")),n=e,i=void 0,a=void 0;return n.css({position:"relative",display:"block",fontWeight:"400",lineHeight:15,letterSpacing:1,whiteSpace:"nowrap",cssFloat:"right"}),(i=n.create(".index")).fontStyle("Roboto Mono",11,Config.UI_COLOR),i.css({position:"relative",display:"block",cssFloat:"left"}),i.text(Utils.pad(Global.EXAMPLE_INDEX+1)),(a=n.create(".length")).fontStyle("Roboto Mono",11,Config.UI_COLOR),a.css({position:"relative",display:"block",cssFloat:"left"}),a.text("/"+Utils.pad(Config.EXAMPLES.length)),e.update=function(){i.tween({y:-10,opacity:0},300,"easeInSine",function(){i.text(Utils.pad(Global.EXAMPLE_INDEX+1)),i.transform({y:10}).tween({y:0,opacity:1},1e3,"easeOutCubic")})},e}return _inherits(t,Interface),t}(),Footer=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Footer")),n=e,i=void 0,a=void 0;return n.css({left:Config.UI_OFFSET+10,right:Config.UI_OFFSET+10,bottom:Config.UI_OFFSET+10}),(i=n.initClass(FooterInfo)).update(),i.transform({x:-10}).css({opacity:0}).tween({x:0,opacity:1},1e3,"easeOutQuart",2700),(a=n.initClass(FooterSide)).transform({x:-10}).css({opacity:0}).tween({x:0,opacity:1},1e3,"easeOutQuart",2900),e.update=function(){i.update(),a.update()},e}return _inherits(t,Interface),t}(),HeaderExample=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,".HeaderExample")),i=n,a=void 0,r=void 0;function o(e){i.animatedIn&&("over"===e.action?(a&&a.tween({scale:1.05,opacity:1},325,"easeOutCubic"),r&&r.tween({scaleX:1.25},275,"easeInOutCubic")):(a&&a.tween({scale:1,opacity:.35},325,"easeOutCubic"),r&&r.tween({scaleX:1},275,"easeInOutCubic")))}function s(){i.events.fire(Events.CLICK,{item:e})}return e?e.slug||e.path||""===e.path?(i.size("auto",15),i.css({position:"relative",display:"block",cssFloat:"left",clear:"left",padding:"5px 10px"}),(a=i.create(".header-info-source-text")).size("auto",15),a.fontStyle("Roboto Mono",11,Config.UI_COLOR),a.css({position:"relative",fontWeight:"400",lineHeight:15,letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap",opacity:0}),a.text(e.title.toUpperCase()),a.transformPoint("left center"),a.size(),i.size(a.width,a.height),i.interact(o,s)):(i.size(40,15),i.css({position:"relative",display:"block",cssFloat:"left",clear:"left"}),(r=i.create(".header-info-source-line")).size(20,1).center(0,1),r.css({left:10,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.25)"}),r.transformPoint("left center").transform({scaleX:0})):(i.size("100%",35),i.css({position:"relative",display:"block",cssFloat:"left",clear:"left",cursor:"pointer"})),n.animateIn=function(e){r&&r.transform({scaleX:0}).css({opacity:1}).tween({scaleX:1},550,"easeInOutCubic",e,function(){return n.animatedIn=!0}),a&&a.transform({scale:1.25}).tween({y:0,scale:1,opacity:.35},500,"easeOutQuart",e,function(){return n.animatedIn=!0}),i.transform({y:-10}).tween({y:0,opacity:1},325,"easeOutQuart",e)},n.animateOut=function(e,t,o,s){n.animatedIn=!1,r&&r.tween({scaleX:0,opacity:0},450,"easeOutCubic",o),a&&a.tween({y:10,opacity:0},400,"easeOutCubic",o),i.tween({y:-10,opacity:0},650,"easeOutCubic",o,function(){t===s&&e()})},n}return _inherits(t,Interface),t}(),HeaderExamples=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"HeaderExamples")),n=e,i=[],a=!1;function r(e){if("HeaderExample"!==e.target.className&&"HeaderExample"!==e.target.parentElement.className){if(!a)return;n.events.fire(Events.UPDATE),o()}}function o(){var e=function(){n.hide(),a=!1,n.mouseEnabled(!1)};i.forEach(function(t,n){return t.animateOut(e,n,50*(i.length-n),i.length-1)})}function s(e){Data.setExample(e.item.path)}return n.css({left:0,top:0}),n.mouseEnabled(!1),function(){n.initClass(HeaderExample);var e=0,t=0;Assets.getData("config").examples.forEach(function(a){var r=n.initClass(HeaderExample,new Example(a));n.events.add(r,Events.CLICK,s),i.push(r),r.width>e&&(e=r.width),t+=r.height}),n.size(e+50,t+50)}(),n.bind("mouseleave",r),n.bind("touchend",r),e.animateIn=function(){a=!0,n.mouseEnabled(!0),n.show(),i.forEach(function(e,t){return e.animateIn(100*t)})},e.animateOut=o,e}return _inherits(t,Interface),t}(),HeaderExamplesButton=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"HeaderExamplesButton")),i=n,a=void 0,r=void 0,o=void 0,s=!1;function u(e){s||"over"===e.action&&(o.animateIn(),i.mouseEnabled(!1),r.forEach(function(e,t){e.tween({y:-5,opacity:0},125,"easeOutCubic",15*t,function(){e.transform({y:5}).tween({y:0,opacity:1},300,"easeOutCubic")})}),s=!0)}function l(){s=!1,i.mouseEnabled(!0)}return i.css({position:"relative",display:"block",padding:10,cssFloat:"left"}),(a=i.create(".text")).fontStyle("Roboto Mono",11,Config.UI_COLOR),a.css({position:"relative",display:"block",fontWeight:"400",lineHeight:15,letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"}),a.text(e),r=a.split(),o=i.initClass(HeaderExamples),i.interact(u,null),i.mouseEnabled(!0),i.events.add(o,Events.UPDATE,l),n.animateIn=function(){n.transform({x:-10}).css({opacity:0}).tween({x:0,opacity:1},450,"easeOutCubic",450,function(){return n.animatedIn=!0})},n.animateOut=function(){o.animateOut(),s=!1,i.mouseEnabled(!0)},n}return _inherits(t,Interface),t}(),HeaderItem=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"HeaderItem")),i=n,a=void 0,r=void 0;function o(e){"over"===e.action&&r.forEach(function(e,t){e.tween({y:-5,opacity:0},125,"easeOutCubic",15*t,function(){e.transform({y:5}).tween({y:0,opacity:1},300,"easeOutCubic")})})}function s(){i.events.fire(Events.CLICK)}return i.css({position:"relative",display:"block",padding:10,cssFloat:"left"}),(a=i.create(".text")).fontStyle("Roboto Mono",11,Config.UI_COLOR),a.css({position:"relative",display:"block",fontWeight:"400",lineHeight:15,letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"}),a.text(e),r=a.split(),i.interact(o,s),i.hit.mouseEnabled(!0),n}return _inherits(t,Interface),t}(),Header=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Header")),n=e,i=void 0,a=void 0;function r(){n.events.fire(Events.OPEN_ABOUT)}function o(){AudioController.mute(),setTimeout(function(){return getURL(Config.ABOUT_GITHUB_URL)},300)}return n.size(260,"auto"),n.css({left:Config.UI_OFFSET,top:Config.UI_OFFSET}),(i=n.initClass(HeaderItem,"About")).transform({x:-10}).css({opacity:0}).tween({x:0,opacity:1},1e3,"easeOutQuart",2100),n.initClass(HeaderExamplesButton,"Examples").transform({x:-10}).css({opacity:0}).tween({x:0,opacity:1},1e3,"easeOutQuart",2300),(a=n.initClass(HeaderItem,"Source code")).transform({x:-10}).css({opacity:0}).tween({x:0,opacity:1},1e3,"easeOutQuart",2500),n.events.add(i,Events.CLICK,r),n.events.add(a,Events.CLICK,o),e}return _inherits(t,Interface),t}(),NavBackground=function(e){function t(e,n,i,a){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,".NavBackground")),o=r;r.enabled=!1;var s=new Vector2,u={wobbly:1,expanded:0},l={position:0,scroll:0},c=void 0,h=void 0,d=void 0,f=i-n,v=f<0?-1:1,p=!1,m=0;function g(){TweenManager.clearTween(l)}function y(){o.enabled&&(g(),m=0,o.tweening=!0,TweenManager.tween(u,{expanded:.15},2e3,"easeOutElastic"),Cursor.grabbing())}function b(){o.enabled&&(p=!0,m+=4*Mouse.input.delta.x,Cursor.grabbing())}function w(){if(o.enabled){p=!1,m=0;var e="android"===Device.os?35:25;TweenManager.tween(u,{expanded:0},2e3,"easeOutElastic"),TweenManager.tween(l,{scroll:l.scroll+Mouse.input.delta.x*e},500,"easeOutQuint"),Cursor.clear()}}return o.size(e,"100%").mouseEnabled(!1),c=o.initClass(Canvas,e,Stage.height,!0,!0),(h=o.initClass(CanvasGraphics)).fillStyle="#000",c.add(h),function(){d=[];for(var e=0;e<6;e++){var t=new Vector2;t.x=0,d.push(t)}}(),o.events.add(Mouse.input,Interaction.START,y),o.events.add(Mouse.input,Interaction.DRAG,b),o.events.add(Mouse.input,Interaction.END,w),w(),r.startRender(function(){o.enabled&&(s.lerp(Mouse,.1),l.scroll+=.1*(m-l.scroll),Math.abs(l.scroll)<.001&&(l.scroll=0),l.position+=.1*(i-s.x-l.position),(v>0&&l.scroll>f||v<0&&l.scroll<f)&&o.events.fire(Events.OPEN_NAV,{direction:v}));var e=Math.clamp((l.position+l.scroll)/f,0,1.8);if((e=Interpolation.Sine.In(e))>0&&!o.animatedIn||o.tweening||o.redraw){for(var t=0;t<d.length;t++){var r=Math.abs(s.y-d[t].y)/Stage.height;r=Interpolation.Sine.In(r);var p=(Config.NAV_WIDTH*u.wobbly-120*r*u.wobbly)*e*v;d[t].x=n+p+a*u.expanded*v}(function(){h.clear(),h.beginPath(),h.moveTo(d[0].x,d[0].y);var e=void 0;for(e=1;e<d.length-2;e++){var t=(d[e].x+d[e+1].x)/2,n=(d[e].y+d[e+1].y)/2;h.quadraticCurveTo(d[e].x,d[e].y,t,n)}h.quadraticCurveTo(d[e].x,d[e].y,d[e+1].x,d[e+1].y)})(),h.lineTo(n,Stage.height),h.lineTo(n,0),h.lineTo(d[0].x,d[0].y),h.fill(),c.render(),o.redraw&&(o.redraw=!1)}}),r.resize=function(t,o,s,u){g(),e=t,a=u,v=(f=(i=s)-(n=o))<0?-1:1,r.size(e,"100%"),c.size(e,Stage.height);for(var l=Stage.height/(d.length-1),h=0;h<d.length;h++)d[h].y=l*h,d[h].x=n;r.redraw=!0},r.reset=function(){g(),r.animatedIn=!1,r.enabled=!1,p=!1,m=0,u.wobbly=1,u.expanded=0,l.position=0,l.scroll=0,r.redraw=!0},r.animateIn=function(e){g(),r.animatedIn=!0,r.enabled=!1,p=!1,r.tweening=!0,TweenManager.tween(u,{wobbly:0,expanded:1},e?800:2e3,e?"easeOutCubic":"easeOutElastic",function(){r.tweening=!1,l.position=0,l.scroll=0,e&&e()})},r.animateOut=function(){p||r.animatedIn||(g(),r.animatedIn=!1,r.enabled=!1,p=!1,m=0,r.tweening=!0,TweenManager.tween(u,{wobbly:1,expanded:0},400,"easeInCubic",function(){return r.tweening=!1}),TweenManager.tween(l,{position:0,scroll:0},400,"easeInCubic"))},r}return _inherits(t,Interface),t}(),Nav=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Nav")),n=e,i=1.5*Config.NAV_WIDTH;function a(){n.right.resize(Stage.width,Stage.width,Stage.width-i,Stage.width+100)}return n.size("100%").mouseEnabled(!1),n.right=n.initClass(NavBackground,Stage.width,Stage.width,Stage.width-i,Stage.width+100),n.events.add(Events.RESIZE,a),a(),e.reset=function(){e.right.reset()},e}return _inherits(t,Interface),t}(),UI=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"UI")),n=e,i=[],a=void 0,r=void 0,o=void 0,s=void 0;function u(e){if(!n.animatedIn){var t=e.object;"over"===e.action||"click"===e.action?(t.noTap=!1,Timer.clearTimeout(t.delay),function(e){e.animateIn(),e.background.enabled=!0}(t),t.timer=n.delayedCall(function(){return t.noTap=!0},500)):(Timer.clearTimeout(t.timer),t.noTap?l(t):t.delay=n.delayedCall(function(){return l(t)},500))}}function l(e){e.animateOut(),e.background.animateOut()}function c(){i.forEach(function(e){return e.hideButton()})}function h(){i.forEach(function(e){return e.showButton()})}function d(){n.animatedIn||(n.animatedIn=!0,c(),Cursor.clear())}function f(){n.animatedIn&&(n.animatedIn=!1,r.animateOut(),h())}function v(){s=n.initClass(About),a.tween({opacity:.85},2e3,"easeOutSine"),s.animateIn(),a.hit.show(),Global.SOUND&&AudioController.trigger("about_section")}function p(){a.hit.hide(),s&&s.animateOut(function(){s&&(s=s.destroy())}),a.tween({opacity:0},1e3,"easeOutSine"),Global.SOUND&&AudioController.trigger("fluid_section")}function m(e){27===e.keyCode&&p()}return n.size("100%").mouseEnabled(!1),n.css({left:0,top:0}),r=n.initClass(Nav),n.nav=r,n.initClass(Header),o=n.initClass(Footer),i.push(n.initClass(MuteButton)),i.push(n.initClass(Button)),i[1].background=r.right,(a=n.create(".bg")).size("100%").bg("#000").css({opacity:0}),a.interact(null,p),a.hit.css({cursor:""}),a.hit.mouseEnabled(!0),a.hit.hide(),i[1].interact(u,u),i[1].hit.css({cursor:""}),i[1].hit.mouseEnabled(!0),n.events.add(Events.UI_HIDE,c),n.events.add(Events.UI_SHOW,h),n.events.add(Events.OPEN_NAV,d),n.events.add(Events.CLOSE_NAV,f),n.events.add(Events.OPEN_ABOUT,v),n.events.add(Events.CLOSE_ABOUT,p),n.events.add(Events.KEYBOARD_UP,m),Stage.add(e),e.startRender(function(){s&&s.update();i.forEach(function(e){e.needsUpdate&&e.update()})}),e.update=function(){o.update()},e.enableMuteButton=function(){i[0].enabled=!0},e.disableMuteButton=function(){i[0].enabled=!1},e.reset=function(){n.animatedIn=!1,r.reset()},e}return _inherits(t,Interface),_createClass(t,null,[{key:"instance",value:function(){return this.singleton||(this.singleton=new t),this.singleton}}]),t}(),Fluid=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e,i={isMove:!1,isDown:!1,currentX:0,currentY:0,prevX:0,prevY:0},a=void 0,r=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0;function d(){var e={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping,format:THREE.RGBAFormat,type:"ios"===Device.os?THREE.HalfFloatType:THREE.FloatType,depthBuffer:!1,stencilBuffer:!1},t=Stage.width*World.dpr,n=Stage.height*World.dpr;o&&o.dispose(),s&&s.dispose(),o=new THREE.WebGLRenderTarget(t,n,e),s=new THREE.WebGLRenderTarget(t,n,e)}function f(e){var t=new THREE.Scene,n=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),e);return t.add(n),t}function v(){var e=i.currentX-i.prevX,t=i.currentY-i.prevY;i.prevX=i.currentX,i.prevY=i.currentY,u.uniforms.velocity.value.x=e,u.uniforms.velocity.value.y=t;var n=Math.min(10,Math.sqrt(e*e+t*t))/10;u.uniforms.strength.value.x=!i.isMove||i.isDown?50:50*n,u.uniforms.strength.value.y=50*n,u.uniforms.texture.value=o.texture,a.render(c,r,s);var l=o;o=s,s=l,a.render(h,r),AudioController.updatePosition(),World.frame.value++}function p(){d(),u.uniforms.texture.value=o.texture,l.uniforms.texture.value=o.texture,World.frame.value=0}function m(){i.isDown=!0,g()}function g(){!i.isMove&&n.animatedIn&&(i.isMove=!0),i.currentX=Mouse.x,i.currentY=-Mouse.y}function y(){i.isDown=!1}return a=World.renderer,r=World.camera,d(),u=n.initClass(Shader,vertFluidBasic,fragpass,{time:World.time,frame:World.frame,resolution:World.resolution,mouse:{value:Mouse.inverseNormal},velocity:{value:new THREE.Vector2(0,0)},strength:{value:new THREE.Vector2(50,0)},texture:{value:o.texture}}),c=f(u.material),l=n.initClass(Shader,vertFluidBasic,fragview,{time:World.time,frame:World.frame,resolution:World.resolution,mouse:{value:Mouse.inverseNormal},texture:{value:o.texture}}),h=f(l.material),n.events.add(Events.RESIZE,p),n.events.add(Mouse.input,Interaction.START,m),n.events.add(Mouse.input,Interaction.MOVE,g),n.events.add(Mouse.input,Interaction.END,y),defer(v),e.animateIn=function(){e.animatedIn=!0,e.startRender(v)},e.destroy=function(){return o&&o.dispose(),s&&s.dispose(),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",e).call(e)},e}return _inherits(t,Component),t}(),World=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e,i=void 0,a=void 0,r=void 0;function o(){i.setSize(Stage.width,Stage.height),t.resolution.value.set(Stage.width*t.dpr,Stage.height*t.dpr)}return t.dpr=1,(i=new THREE.WebGLRenderer({powerPreference:"high-performance"})).setPixelRatio(t.dpr),a=new THREE.Scene,r=new THREE.OrthographicCamera(-1,1,1,-1,0,1),t.scene=a,t.renderer=i,t.element=i.domElement,t.camera=r,t.time={value:0},t.frame={value:0},t.resolution={value:new THREE.Vector2(Stage.width*t.dpr,Stage.height*t.dpr)},n.events.add(Events.RESIZE,o),o(),e.startRender(function(e,n){t.time.value+=.001*n}),e.destroy=function(){for(var n=a.children.length-1;n>=0;n--){var o=a.children[n];a.remove(o),o.geometry&&o.geometry.dispose(),o.material&&o.material.dispose()}return i.dispose(),i.forceContextLoss(),i.context=null,i.domElement=null,r=null,a=null,i=null,Stage.remove(t.element),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",e).call(e)},e}return _inherits(t,Component),_createClass(t,null,[{key:"instance",value:function(){return this.singleton||(this.singleton=new t),this.singleton}},{key:"destroy",value:function(){return this.singleton&&this.singleton.destroy(),Utils.nullObject(this)}}]),t}(),AlienKitty=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"AlienKitty")),n=e,i=void 0,a=void 0,r=void 0;function o(){i.bg("assets/images/alienkitty.svg"),a.bg("assets/images/alienkitty_eyelid.svg"),r.bg("assets/images/alienkitty_eyelid.svg")}function s(){n.delayedCall(Utils.headsTails(u,l),Utils.random(0,1e4))}function u(){a.tween({scaleY:1.5},120,"easeOutCubic",function(){a.tween({scaleY:.01},180,"easeOutCubic")}),r.tween({scaleX:1.3,scaleY:1.3},120,"easeOutCubic",function(){r.tween({scaleX:1,scaleY:.01},180,"easeOutCubic",function(){s()})})}function l(){a.tween({scaleY:1.5},120,"easeOutCubic",function(){a.tween({scaleY:.01},180,"easeOutCubic")}),r.tween({scaleX:1.3,scaleY:1.3},180,"easeOutCubic",function(){r.tween({scaleX:1,scaleY:.01},240,"easeOutCubic",function(){s()})})}return n.size(90,86).css({opacity:0}),i=n.create(".alienkitty").size(90,86),a=i.create(".eyelid1").size(24,14).css({left:35,top:25}).transformPoint("50%",0).transform({scaleX:1.5,scaleY:.01}),r=i.create(".eyelid2").size(24,14).css({left:53,top:26}).transformPoint(0,0).transform({scaleX:1,scaleY:.01}),e.animateIn=function(){s(),e.tween({opacity:1},1e3,"easeOutSine")},e.animateOut=function(t){e.tween({opacity:0},500,"easeInOutQuad",function(){e.clearTimers(),t&&t()})},e.ready=function(){return Promise.all([Assets.loadImage("assets/images/alienkitty.svg"),Assets.loadImage("assets/images/alienkitty_eyelid.svg")]).then(o)},e}return _inherits(t,Interface),t}(),Loader=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Loader")),n=e,i=void 0,a=void 0,r=void 0,o=void 0;function s(e){TweenManager.tween(n,{progress:e.percent},2e3,"easeInOutSine",null,function(){if(a.inner.text(Math.round(100*n.progress)),1===n.progress){var e=Data.dispatcher.getState(),t=Data.getExample(e.path);t&&""!==t.path?n.events.fire(Events.START,{item:t}):(n.events.fire(Events.COMPLETE),a.tween({opacity:0},200,"easeOutSine",function(){a.hide(),r.transform({y:10}).css({opacity:0}).tween({y:0,opacity:1},1e3,"easeOutQuart",100),n.events.add(Mouse.input,Interaction.CLICK,u),n.delayedCall(function(){return l((Device.mobile?"Tap":"Click")+" anywhere")},7e3),n.delayedCall(function(){return l(Device.mobile?"Tap tap!":"Click!")},14e3)}))}})}function u(){n.events.remove(Mouse.input,Interaction.CLICK,u),n.events.fire(Events.START,{click:!0}),WebAudio.trigger("bass_drum")}function l(e){r.tween({y:-10,opacity:0},300,"easeInSine",function(){r.inner.text(e),r.transform({y:10}).tween({y:0,opacity:1},1e3,"easeOutCubic")})}return n.size("100%").css({left:0,top:0}),n.progress=0,(i=n.initClass(AlienKitty)).center().css({marginTop:-108}),i.ready().then(i.animateIn),(a=n.create(".number")).size(150,25).center(),a.inner=a.create(".inner"),a.inner.fontStyle("Roboto Mono",11,Config.UI_COLOR),a.inner.css({width:"100%",fontWeight:"400",lineHeight:25,letterSpacing:1,textAlign:"center",whiteSpace:"nowrap",opacity:.35}),a.inner.text(""),(r=n.create(".title")).size(600,25).center().css({opacity:0}),r.inner=r.create(".inner"),r.inner.fontStyle("Roboto Mono",11,Config.UI_COLOR),r.inner.css({width:"100%",fontWeight:"400",lineHeight:25,letterSpacing:1,textAlign:"center",textTransform:"uppercase",whiteSpace:"nowrap",opacity:.35}),r.inner.text(Device.mobile?"Put on your headphones":"Turn up your speakers"),o=n.initClass(AssetLoader,Config.ASSETS),n.events.add(o,Events.PROGRESS,s),e.animateOut=function(e){a.tween({opacity:0},200,"easeOutSine"),r.tween({opacity:0},200,"easeOutSine"),i.animateOut(e)},e}return _inherits(t,Interface),t}(),Example=function e(t){_classCallCheck(this,e),this.slug=t.slug,this.path=this.slug?"examples/"+this.slug+"/":t.path,this.title=t.title,this.pageTitle=this.title+" / Alien.js Example",this.description=t.description,this.sideTitle=this.description?this.title+" / "+this.description:this.title},Main=function e(){_classCallCheck(this,e),Device.webgl||(window.location="fallback.html");var t,n=void 0,i=void 0,a=void 0,r=Stage.orientation;function o(){AudioController.init(),World.instance(),Stage.add(World),i=Stage.initClass(Fluid)}function s(e){n.animateOut(function(){if(n=n.destroy(),e.click)i.animateIn(),AudioController.trigger("fluid_start"),UI.instance(),Stage.delayedCall(function(){Stage.events.fire(Events.UI_SHOW),Data.dispatcher.unlock()},1e3);else{var t=e.item;Global.EXAMPLE_INDEX=t.index,Stage.events.fire(Events.CLOSE_NAV),Stage.events.fire(Events.OPEN_NAV,{direction:-1,item:t})}})}function u(e){if(e.direction<0){Stage.loaded=!1,Stage.destroyed=!1,Data.dispatcher.lock();var t=e.item;t||(t=Data.next()),UI.instance().update(),""!==t.path?(a=Stage.initClass(ExampleLoader,t),Stage.events.add(a,Events.COMPLETE,l),UI.instance().disableMuteButton()):(Global.EXAMPLE=null,Stage.loaded=!0,UI.instance().enableMuteButton()),UI.instance().nav.right.animateIn(function(){i&&(i=i.destroy()),World.singleton&&World.destroy(),Global.LAST_EXAMPLE&&Global.LAST_EXAMPLE.destroy(),AudioController.trigger&&AudioController.trigger("fluid_stop"),""===t.path&&(o(),Global.SOUND&&AudioController.unmute(),i.animateIn(),AudioController.trigger("fluid_start")),Stage.destroyed=!0,c()}),Data.dispatcher.setState(t.path),Data.dispatcher.setTitle(t.pageTitle),WebAudio.mute()}}function l(){a=a.destroy(),Stage.loaded=!0,c()}function c(){Stage.destroyed&&Stage.loaded&&(Global.LAST_EXAMPLE=Global.EXAMPLE,UI.instance().reset(),Stage.delayedCall(function(){Stage.events.fire(Events.UI_SHOW),Data.dispatcher.unlock()},1e3))}function h(){r!==Stage.orientation&&location.reload()}function d(e){"blur"===e.type?WebAudio.mute():Global.SOUND&&WebAudio.unmute()}WebAudio.init(),t=Storage.get("sound"),Global.SOUND="boolean"!=typeof t||t,Global.SOUND||WebAudio.mute(),Stage.size("100%"),Stage.transform({scale:1.3}).css({opacity:0}).tween({scale:1,opacity:1},3e3,"easeOutCubic",function(){Stage.clearTransform(),Stage.clearOpacity()}),Mouse.init(),Accelerometer.init(),Global.STAGE=Stage,Promise.all([FontLoader.loadFonts(["Roboto Mono","Oswald","Karla"]),AssetLoader.loadAssets(["assets/data/config.json?"+Utils.timestamp()])]).then(function(){var e=Assets.getData("config").examples;e.forEach(function(e){(e.slug||e.path||""===e.path)&&Config.EXAMPLES.push(new Example(e))}),Data.init(),Data.dispatcher.lock(),n=Stage.initClass(Loader),Stage.events.add(n,Events.COMPLETE,o)}),Stage.events.add(Events.START,s),Stage.events.add(Events.OPEN_NAV,u),Stage.events.add(Events.RESIZE,h),Stage.events.add(Events.VISIBILITY,d)};window.onload=function(){return new Main};
