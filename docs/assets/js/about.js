//   _  /._  _  r6.about 2017-12-10 11:19am
//  /_|///_'/ /
function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Utils=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"random",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(void 0===e)return Math.random();if(e===t)return e;e=e||0,t=t||1;var i=Math.pow(10,n);return Math.round((e+Math.random()*(t-e))*i)/i}},{key:"headsTails",value:function(e,t){return this.random(0,1)?t:e}},{key:"queryString",value:function(e){var t=decodeURI(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURI(e).replace(/[.+*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"));return!(!t.length||"0"===t||"false"===t)&&t}},{key:"getConstructorName",value:function(e){return e.constructor.name||e.constructor.toString().match(/function ([^(]+)/)[1]}},{key:"nullObject",value:function(e){for(var t in e)void 0!==e[t]&&(e[t]=null);return null}},{key:"cloneObject",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"mergeObject",value:function(){for(var e={},t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=!0,r=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;for(var l in c)e[l]=c[l]}}catch(e){r=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(r)throw o}}return e}},{key:"toArray",value:function(e){return Object.keys(e).map(function(t){return e[t]})}},{key:"cloneArray",value:function(e){return e.slice(0)}},{key:"basename",value:function(e,t){var n=e.split("/").last();return t?n:n.split(".")[0]}},{key:"extension",value:function(e){return e.split(".").last().split("?")[0].toLowerCase()}},{key:"base64",value:function(e){return window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}},{key:"timestamp",value:function(){return(Date.now()+this.random(0,99999)).toString()}},{key:"pad",value:function(e){return e<10?"0"+e:e}}]),e}()),Events=function e(){var t=this;_classCallCheck(this,e);var n={};this.add=function(e,t){n[e]||(n[e]=[]),n[e].push(t)},this.remove=function(e,t){n[e]&&n[e].remove(t)},this.destroy=function(){for(var e in n)for(var i=n[e].length-1;i>-1;i--)n[e][i]=null,n[e].splice(i,1);return Utils.nullObject(t)},this.fire=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n[e]){Utils.cloneArray(n[e]).forEach(function(e){return e(t)})}}};Events.VISIBILITY="visibility",Events.KEYBOARD_PRESS="keyboard_press",Events.KEYBOARD_DOWN="keyboard_down",Events.KEYBOARD_UP="keyboard_up",Events.RESIZE="resize",Events.COMPLETE="complete",Events.PROGRESS="progress",Events.UPDATE="update",Events.LOADED="loaded",Events.ERROR="error",Events.READY="ready",Events.HOVER="hover",Events.CLICK="click",window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(){var e=Date.now();return function(t){return setTimeout(function(){return t(Date.now()-e)},1e3/60)}}());var Render=new function e(){function t(e){var n=Math.min(r,e-o);o=e,i.TIME=e,i.DELTA=n;for(var s=a.length-1;s>=0;s--){var u=a[s];if(u)if(u.fps){if(e-u.last<1e3/u.fps)continue;u(++u.frame),u.last=e}else u(e,n);else a.remove(u)}i.paused||requestAnimationFrame(t)}var n=this;_classCallCheck(this,e);var i=this,a=[],r=200,o=performance.now();requestAnimationFrame(t),this.start=function(e,t){t&&(e.fps=t,e.last=-1/0,e.frame=-1),~a.indexOf(e)||a.unshift(e)},this.stop=function(e){a.remove(e)},this.pause=function(){n.paused=!0},this.resume=function(){n.paused&&(n.paused=!1,requestAnimationFrame(t))}},Device=new(function(){function e(){var t=this;_classCallCheck(this,e),this.agent=navigator.userAgent.toLowerCase(),this.pixelRatio=window.devicePixelRatio,this.prefix=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(webkit|moz|ms)-/)||""===e.OLink&&["","o"])[1];return{lowercase:t,js:t[0].toUpperCase()+t.substr(1)}}(),this.transformProperty=function(){var e=void 0;switch(t.prefix.lowercase){case"webkit":e="-webkit-transform";break;case"moz":e="-moz-transform";break;case"ms":e="-ms-transform";break;case"o":e="-o-transform";break;default:e="transform"}return e}(),this.mobile=!(!("ontouchstart"in window||"onpointerdown"in window)||!this.detect(["ios","iphone","ipad","android","blackberry"]))&&{},this.tablet=window.innerWidth>window.innerHeight?document.body.clientWidth>800:document.body.clientHeight>800,this.phone=!this.tablet}return _createClass(e,[{key:"detect",value:function(e){"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)if(~this.agent.indexOf(e[t]))return!0;return!1}},{key:"vendor",value:function(e){return this.prefix.js+e}},{key:"vibrate",value:function(e){navigator.vibrate&&navigator.vibrate(e)}}]),e}()),Interpolation=new function e(){var t=this;_classCallCheck(this,e),this.convertEase=function(e){return function(){var n=void 0;switch(e){case"easeInQuad":n=t.Quad.In;break;case"easeInCubic":n=t.Cubic.In;break;case"easeInQuart":n=t.Quart.In;break;case"easeInQuint":n=t.Quint.In;break;case"easeInSine":n=t.Sine.In;break;case"easeInExpo":n=t.Expo.In;break;case"easeInCirc":n=t.Circ.In;break;case"easeInElastic":n=t.Elastic.In;break;case"easeInBack":n=t.Back.In;break;case"easeInBounce":n=t.Bounce.In;break;case"easeOutQuad":n=t.Quad.Out;break;case"easeOutCubic":n=t.Cubic.Out;break;case"easeOutQuart":n=t.Quart.Out;break;case"easeOutQuint":n=t.Quint.Out;break;case"easeOutSine":n=t.Sine.Out;break;case"easeOutExpo":n=t.Expo.Out;break;case"easeOutCirc":n=t.Circ.Out;break;case"easeOutElastic":n=t.Elastic.Out;break;case"easeOutBack":n=t.Back.Out;break;case"easeOutBounce":n=t.Bounce.Out;break;case"easeInOutQuad":n=t.Quad.InOut;break;case"easeInOutCubic":n=t.Cubic.InOut;break;case"easeInOutQuart":n=t.Quart.InOut;break;case"easeInOutQuint":n=t.Quint.InOut;break;case"easeInOutSine":n=t.Sine.InOut;break;case"easeInOutExpo":n=t.Expo.InOut;break;case"easeInOutCirc":n=t.Circ.InOut;break;case"easeInOutElastic":n=t.Elastic.InOut;break;case"easeInOutBack":n=t.Back.InOut;break;case"easeInOutBounce":n=t.Bounce.InOut;break;case"linear":n=t.Linear.None}return n}()||t.Cubic.Out},this.Linear={None:function(e){return e}},this.Quad={In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},this.Cubic={In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},this.Quart={In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},this.Quint={In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},this.Sine={In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},this.Expo={In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},this.Circ={In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},this.Elastic={In:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),-t*Math.pow(2,10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n))},Out:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*e)*Math.sin((e-i)*(2*Math.PI)/n)+1)},InOut:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4,i=void 0;return 0===e?0:1===e?1:(!t||t<1?(t=1,i=n/4):i=n*Math.asin(1/t)/(2*Math.PI),(e*=2)<1?t*Math.pow(2,10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n)*-.5:t*Math.pow(2,-10*(e-=1))*Math.sin((e-i)*(2*Math.PI)/n)*.5+1)}},this.Back={In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},this.Bounce={In:function(e){return 1-this.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*this.Bounce.In(2*e):.5*this.Bounce.Out(2*e-1)+.5}}},MathTween=function e(t,n,i,a,r,o,s){function u(){if(!t&&!n)return!1;t.mathTween=null,TweenManager.removeMathTween(l),Utils.nullObject(l),t.mathTweens&&t.mathTweens.remove(l)}var c=this;_classCallCheck(this,e);var l=this,h=void 0,f=void 0,d=void 0,v=void 0,m=void 0,p=void 0,y=void 0;!function(){!t.multiTween&&t.mathTween&&TweenManager.clearTween(t),TweenManager.addMathTween(l),t.mathTween=l,t.multiTween&&(t.mathTweens||(t.mathTweens=[]),t.mathTweens.push(l)),a=Interpolation.convertEase(a),h=performance.now(),h+=r,d=n,f={},n.spring&&(m=n.spring),n.damping&&(p=n.damping);for(var e in d)"number"==typeof t[e]&&(f[e]=t[e])}(),this.update=function(e){if(!(v||e<h)){y=(y=(e-h)/i)>1?1:y;var t=c.interpolate(y);o&&o(t),1===y&&(s&&s(),u())}},this.stop=function(){u()},this.pause=function(){v=!0},this.resume=function(){v=!1,h=performance.now()-y*i},this.interpolate=function(e){var n=a(e,m,p);for(var i in f)if("number"==typeof f[i]&&"number"==typeof d[i]){var r=f[i],o=d[i];t[i]=r+(o-r)*n}return n}},TweenManager=new(function(){function e(){_classCallCheck(this,e);var t=this;this.TRANSFORMS=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],this.CSS_EASES={easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",linear:"linear"};var n=[];Render.start(function(e){for(var i=n.length-1;i>=0;i--){var a=n[i];a.update?a.update(e):t.removeMathTween(a)}}),this.addMathTween=function(e){n.push(e)},this.removeMathTween=function(e){n.remove(e)}}return _createClass(e,[{key:"tween",value:function(e,t,n,i,a,r,o){"number"!=typeof a&&(o=r,r=a,a=0);var s=null;"undefined"!=typeof Promise&&(s=Promise.create(),r&&s.then(r),r=s.resolve);var u=new MathTween(e,t,n,i,a,o,r);return s||u}},{key:"clearTween",value:function(e){if(e.mathTween&&e.mathTween.stop(),e.mathTweens){for(var t=e.mathTweens,n=0;n<t.length;n++){var i=t[n];i&&i.stop()}e.mathTweens=null}}},{key:"parseTransform",value:function(e){var t="";if(void 0!==e.x||void 0!==e.y||void 0!==e.z){var n="";n+=(e.x||0)+"px, ",n+=(e.y||0)+"px, ",t+="translate3d("+(n+=(e.z||0)+"px")+")"}return void 0!==e.scale?t+="scale("+e.scale+")":(void 0!==e.scaleX&&(t+="scaleX("+e.scaleX+")"),void 0!==e.scaleY&&(t+="scaleY("+e.scaleY+")")),void 0!==e.rotation&&(t+="rotate("+e.rotation+"deg)"),void 0!==e.rotationX&&(t+="rotateX("+e.rotationX+"deg)"),void 0!==e.rotationY&&(t+="rotateY("+e.rotationY+"deg)"),void 0!==e.rotationZ&&(t+="rotateZ("+e.rotationZ+"deg)"),void 0!==e.skewX&&(t+="skewX("+e.skewX+"deg)"),void 0!==e.skewY&&(t+="skewY("+e.skewY+"deg)"),void 0!==e.perspective&&(t+="perspective("+e.perspective+"px)"),t}},{key:"isTransform",value:function(e){return~this.TRANSFORMS.indexOf(e)}},{key:"getAllTransforms",value:function(e){for(var t={},n=this.TRANSFORMS.length-1;n>-1;n--){var i=this.TRANSFORMS[n],a=e[i];0!==a&&"number"==typeof a&&(t[i]=a)}return t}},{key:"getEase",value:function(e){return this.CSS_EASES[e]||this.CSS_EASES.easeOutCubic}}]),e}()),CSSTransition=function e(t,n,i,a,r,o){function s(){return!c||c.kill||!t||!t.element}function u(){s()||(c.kill=!0,t.element.style[Device.vendor("Transition")]="",t.cssTween=null,t.willChange(null),t=n=null,Utils.nullObject(c))}_classCallCheck(this,e);var c=this,l=void 0,h=void 0;!function(){var e=TweenManager.getAllTransforms(t),i=[];for(var a in n)TweenManager.isTransform(a)?(e.use=!0,e[a]=n[a],delete n[a]):("number"==typeof n[a]||~a.indexOf("-"))&&i.push(a);e.use&&(i.push(Device.transformProperty),delete e.use),l=e,h=i}(),function(){if(!s()){t.cssTween&&(t.cssTween.kill=!0),t.cssTween=c;var e=function(e,t,n){for(var i="",a="",r=0;r<h.length;r++){var o=h[r];i+=(i.length?", ":"")+o,a+=(a.length?", ":"")+o+" "+e+"ms "+TweenManager.getEase(t)+" "+n+"ms"}return{props:i,transition:a}}(i,a,r);t.willChange(e.props),setTimeout(function(){s()||(t.element.style[Device.vendor("Transition")]=e.transition,t.css(n),t.transform(l),setTimeout(function(){s()||(u(),o&&o())},i+r))},50)}}(),this.stop=u},Interface=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",i=arguments[2];if(_classCallCheck(this,e),this.events=new Events,this.classes=[],this.timers=[],this.loops=[],void 0!==t){if("string"==typeof t){if(this.name=t,this.type=n,"svg"===this.type){var a=i||"svg";i=!0,this.element=document.createElementNS("http://www.w3.org/2000/svg",a),this.element.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")}else this.element=document.createElement(this.type),"."!==t[0]?this.element.id=t:this.element.className=t.substr(1);this.element.style.position="absolute",i||(window.Alien&&window.Alien.Stage?window.Alien.Stage:document.body).appendChild(this.element)}else this.element=t;this.element.object=this}}return _createClass(e,[{key:"initClass",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=new(Function.prototype.bind.apply(e,[null].concat(n)));return this.add(a),a}},{key:"add",value:function(e){var t=this.element;return e.element?(t.appendChild(e.element),this.classes.push(e),e.parent=this):e.nodeName&&t.appendChild(e),this}},{key:"delayedCall",value:function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=setTimeout(function(){e&&e.apply(void 0,n)},a);return this.timers.push(r),this.timers.length>50&&this.timers.shift(),r}},{key:"clearTimers",value:function(){for(var e=this.timers.length-1;e>=0;e--)clearTimeout(this.timers[e]);this.timers.length=0}},{key:"startRender",value:function(e,t){this.loops.push(e),Render.start(e,t)}},{key:"stopRender",value:function(e){this.loops.remove(e),Render.stop(e)}},{key:"clearRenders",value:function(){for(var e=this.loops.length-1;e>=0;e--)this.stopRender(this.loops[e]);this.loops.length=0}},{key:"destroy",value:function(){this.removed=!0;var e=this.parent;e&&!e.removed&&e.remove&&e.remove(this);for(var t=this.classes.length-1;t>=0;t--){var n=this.classes[t];n&&n.destroy&&n.destroy()}return this.classes.length=0,this.element.object=null,this.clearRenders(),this.clearTimers(),this.events.destroy(),Utils.nullObject(this)}},{key:"remove",value:function(e){e.element.parentNode.removeChild(e.element),this.classes.remove(e)}},{key:"create",value:function(t,n){var i=new e(t,n);return this.add(i),i}},{key:"clone",value:function(){return new e(this.element.cloneNode(!0))}},{key:"empty",value:function(){return this.element.innerHTML="",this}},{key:"text",value:function(e){return void 0===e?this.element.textContent:(this.element.textContent=e,this)}},{key:"html",value:function(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)}},{key:"hide",value:function(){return this.element.style.display="none",this}},{key:"show",value:function(){return this.element.style.display="",this}},{key:"visible",value:function(){return this.element.style.visibility="visible",this}},{key:"invisible",value:function(){return this.element.style.visibility="hidden",this}},{key:"setZ",value:function(e){return this.element.style.zIndex=e,this}},{key:"clearAlpha",value:function(){return this.element.style.opacity="",this}},{key:"size",value:function(e,t){return void 0!==e&&(void 0===t&&(t=e),"string"==typeof e?("string"!=typeof t&&(t+="px"),this.element.style.width=e,this.element.style.height=t):(this.element.style.width=e+"px",this.element.style.height=t+"px",this.element.style.backgroundSize=e+"px "+t+"px")),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this}},{key:"mouseEnabled",value:function(e){return this.element.style.pointerEvents=e?"auto":"none",this}},{key:"fontStyle",value:function(e,t,n,i){return this.css({fontFamily:e,fontSize:t,color:n,fontStyle:i}),this}},{key:"bg",value:function(e,t,n,i){return e.includes(["data:","."])?this.element.style.backgroundImage="url("+e+")":this.element.style.backgroundColor=e,void 0!==t&&(t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,this.element.style.backgroundPosition=t+" "+n),i&&(this.element.style.backgroundSize="",this.element.style.backgroundRepeat=i),"cover"!==t&&"contain"!==t||(this.element.style.backgroundSize=t,this.element.style.backgroundRepeat="no-repeat",this.element.style.backgroundPosition=void 0!==n?n+" "+i:"center"),this}},{key:"center",value:function(e,t,n){var i={};return void 0===e?(i.left="50%",i.top="50%",i.marginLeft=-this.width/2,i.marginTop=-this.height/2):(e&&(i.left="50%",i.marginLeft=-this.width/2),t&&(i.top="50%",i.marginTop=-this.height/2)),n&&(delete i.left,delete i.top),this.css(i),this}},{key:"mask",value:function(e){return this.element.style[Device.vendor("Mask")]=(~e.indexOf(".")?"url("+e+")":e)+" no-repeat",this.element.style[Device.vendor("MaskSize")]="contain",this}},{key:"blendMode",value:function(e,t){return this.element.style[t?"background-blend-mode":"mix-blend-mode"]=e,this}},{key:"css",value:function(e,t){if("object"!==(void 0===e?"undefined":_typeof(e))){if(t)return this.element.style[e]=t,this;var n=this.element.style[e];return"number"!=typeof n&&(~n.indexOf("px")&&(n=Number(n.slice(0,-2))),"opacity"===e&&(n=isNaN(Number(this.element.style.opacity))?1:Number(this.element.style.opacity))),n||(n=0),n}for(var i in e){var a=e[i];"string"!=typeof a&&"number"!=typeof a||("string"!=typeof a&&"opacity"!==i&&"zIndex"!==i&&(a+="px"),this.element.style[i]=a)}return this}},{key:"transform",value:function(e){if(e)for(var t in e)"number"==typeof e[t]&&(this[t]=e[t]);else e=this;return this.element.style[Device.vendor("Transform")]=TweenManager.parseTransform(e),this}},{key:"willChange",value:function(e){if("boolean"==typeof e)this.willChangeLock=e;else if(this.willChangeLock)return;var t="string"==typeof e;this.element.style["will-change"]=e?t?e:Device.transformProperty+", opacity":""}},{key:"backfaceVisibility",value:function(e){this.element.style[Device.vendor("BackfaceVisibility")]=e?"visible":"hidden"}},{key:"enable3D",value:function(e,t,n){return this.element.style[Device.vendor("TransformStyle")]="preserve-3d",e&&(this.element.style[Device.vendor("Perspective")]=e+"px"),void 0!==t&&(t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,this.element.style[Device.vendor("PerspectiveOrigin")]=t+" "+n),this}},{key:"disable3D",value:function(){return this.element.style[Device.vendor("TransformStyle")]="",this.element.style[Device.vendor("Perspective")]="",this}},{key:"transformPoint",value:function(e,t,n){var i="";return void 0!==e&&(i+="number"==typeof e?e+"px ":e+" "),void 0!==t&&(i+="number"==typeof t?t+"px ":t+" "),void 0!==n&&(i+="number"==typeof n?n+"px":n),this.element.style[Device.vendor("TransformOrigin")]=i,this}},{key:"tween",value:function(e,t,n,i,a){"number"!=typeof i&&(a=i,i=0);var r=null;"undefined"!=typeof Promise&&(r=Promise.create(),a&&r.then(a),a=r.resolve);var o=new CSSTransition(this,e,t,n,i,a);return r||o}},{key:"clearTransform",value:function(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.element.style[Device.transformProperty]="",this}},{key:"clearTween",value:function(){return this.cssTween&&this.cssTween.stop(),this.mathTween&&this.mathTween.stop(),this}},{key:"attr",value:function(e,t){return void 0===t?this.element.getAttribute(e):(""===t?this.element.removeAttribute(e):this.element.setAttribute(e,t),this)}},{key:"convertTouchEvent",value:function(e){var t={};return t.x=0,t.y=0,e?(e.touches||e.changedTouches?e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t):t}},{key:"click",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="click",e&&e(n)};return this.element.addEventListener("click",n,!0),this.element.style.cursor="pointer",this}},{key:"hover",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="mouseout"===n.type?"out":"over",e&&e(n)};return this.element.addEventListener("mouseover",n,!0),this.element.addEventListener("mouseout",n,!0),this}},{key:"press",value:function(e){var t=this,n=function(n){if(!t.element)return!1;n.object="hit"===t.element.className?t.parent:t,n.action="mousedown"===n.type?"down":"up",e&&e(n)};return this.element.addEventListener("mousedown",n,!0),this.element.addEventListener("mouseup",n,!0),this}},{key:"bind",value:function(e,t){var n=this;"touchstart"!==e||Device.mobile?"touchmove"!==e||Device.mobile?"touchend"!==e||Device.mobile||(e="mouseup"):e="mousemove":e="mousedown",this.events["bind_"+e]||(this.events["bind_"+e]=[]);var i=this.events["bind_"+e];i.push({target:this.element,callback:t});var a=function(e){var t=n.convertTouchEvent(e);e.x=t.x,e.y=t.y,i.forEach(function(t){t.target===e.currentTarget&&t.callback(e)})};return this.events["fn_"+e]||(this.events["fn_"+e]=a,this.element.addEventListener(e,a,!0)),this}},{key:"unbind",value:function(e,t){"touchstart"!==e||Device.mobile?"touchmove"!==e||Device.mobile?"touchend"!==e||Device.mobile||(e="mouseup"):e="mousemove":e="mousedown";var n=this.events["bind_"+e];return n?(n.forEach(function(e,i){e.callback===t&&n.splice(i,1)}),this.events["fn_"+e]&&!n.length&&(this.element.removeEventListener(e,this.events["fn_"+e],!0),this.events["fn_"+e]=null),this):this}},{key:"interact",value:function(e,t){return this.hit=this.create(".hit"),this.hit.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:99999}),Device.mobile?this.hit.touchClick(e,t):this.hit.hover(e).click(t),this}},{key:"touchClick",value:function(e,t){var n=this,i={},a=void 0,r=void 0,o=void 0,s=function(e){var t=n.convertTouchEvent(e);e.touchX=t.x,e.touchY=t.y,i.x=e.touchX,i.y=e.touchY};return this.element.addEventListener("touchmove",function(e){if(!n.element)return!1;o=n.convertTouchEvent(e),r=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}(i,o)>5},{passive:!0}),this.element.addEventListener("touchstart",function(t){if(!n.element)return!1;a=performance.now(),t.object="hit"===n.element.className?n.parent:n,t.action="over",s(t),e&&!r&&e(t)},{passive:!0}),this.element.addEventListener("touchend",function(i){if(!n.element)return!1;var o=performance.now();i.object="hit"===n.element.className?n.parent:n,s(i),a&&o-a<750&&t&&!r&&(i.action="click",t(i)),e&&(i.action="out",e(i)),r=!1},{passive:!0}),this}},{key:"split",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={position:"relative",display:"block",width:"auto",height:"auto",margin:0,padding:0,cssFloat:"left"},n=[],i=this.text().split(e);this.empty()," "===e&&(e="&nbsp;");for(var a=0;a<i.length;a++)" "===i[a]&&(i[a]="&nbsp;"),n.push(this.create(".t","span").html(i[a]).css(t)),""!==e&&a<i.length-1&&n.push(this.create(".t","span").html(e).css(t));return n}}]),e}(),Stage=new(function(e){function t(){function e(){i.size(),i.orientation=window.innerWidth>window.innerHeight?"landscape":"portrait"}_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Stage")),i=n,a=void 0;return i.css({overflow:"hidden"}),window.addEventListener("focus",function(){"focus"!==a&&(a="focus",i.events.fire(Events.VISIBILITY,{type:"focus"}))},!0),window.addEventListener("blur",function(){"blur"!==a&&(a="blur",i.events.fire(Events.VISIBILITY,{type:"blur"}))},!0),window.addEventListener("keydown",function(){return i.events.fire(Events.KEYBOARD_DOWN)},!0),window.addEventListener("keyup",function(){return i.events.fire(Events.KEYBOARD_UP)},!0),window.addEventListener("keypress",function(){return i.events.fire(Events.KEYBOARD_PRESS)},!0),window.addEventListener("resize",function(){return i.events.fire(Events.RESIZE)},!0),i.events.add(Events.RESIZE,e),e(),n}return _inherits(t,Interface),t}()),Component=function(){function e(){_classCallCheck(this,e),this.events=new Events,this.classes=[],this.timers=[],this.loops=[]}return _createClass(e,[{key:"initClass",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var a=new(Function.prototype.bind.apply(e,[null].concat(n)));return this.add(a),a}},{key:"add",value:function(e){return e.destroy&&(this.classes.push(e),e.parent=this),this}},{key:"delayedCall",value:function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=setTimeout(function(){e&&e.apply(void 0,n)},a);return this.timers.push(r),this.timers.length>50&&this.timers.shift(),r}},{key:"clearTimers",value:function(){for(var e=this.timers.length-1;e>=0;e--)clearTimeout(this.timers[e]);this.timers.length=0}},{key:"startRender",value:function(e,t){this.loops.push(e),Render.start(e,t)}},{key:"stopRender",value:function(e){this.loops.remove(e),Render.stop(e)}},{key:"clearRenders",value:function(){for(var e=this.loops.length-1;e>=0;e--)this.stopRender(this.loops[e]);this.loops.length=0}},{key:"destroy",value:function(){this.removed=!0;var e=this.parent;e&&!e.removed&&e.remove&&e.remove(this);for(var t=this.classes.length-1;t>=0;t--){var n=this.classes[t];n&&n.destroy&&n.destroy()}return this.classes.length=0,this.clearRenders(),this.clearTimers(),this.events.destroy(),Utils.nullObject(this)}},{key:"remove",value:function(e){this.classes.remove(e)}}]),e}(),Vector2=function(){function e(t,n){_classCallCheck(this,e),this.x="number"==typeof t?t:0,this.y="number"==typeof n?n:0,this.type="vector2"}return _createClass(e,[{key:"set",value:function(e,t){return this.x=e||0,this.y=t||0,this}},{key:"clear",value:function(){return this.x=0,this.y=0,this}},{key:"copyTo",value:function(e){return e.x=this.x,e.y=this.y,this}},{key:"copyFrom",value:function(e){return this.x=e.x||0,this.y=e.y||0,this}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y||1e-5}},{key:"length",value:function(){return Math.sqrt(this.lengthSq())}},{key:"normalize",value:function(){var e=this.length();return this.x/=e,this.y/=e,this}},{key:"setLength",value:function(e){return this.normalize().multiply(e),this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"multiply",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e,this.y/=e,this}},{key:"perpendicular",value:function(){var e=this.x,t=this.y;return this.x=-t,this.y=e,this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"deltaLerp",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0;i<n;i++)this.lerp(e,t);return this}},{key:"interp",value:function(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;this.calc||(this.calc=new e),this.calc.subVectors(this,t);var r=Interpolation.convertEase(i)(Math.clamp(Math.range(this.calc.lengthSq(),0,a*a,1,0),0,1)*(n/10));return this.lerp(t,r)}},{key:"setAngleRadius",value:function(e,t){return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this}},{key:"addAngleRadius",value:function(e,t){return this.x+=Math.cos(e)*t,this.y+=Math.sin(e)*t,this}},{key:"dot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return e.x*t.x+e.y*t.y}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"distanceTo",value:function(e,t){var n=this.x-e.x,i=this.y-e.y;return t?n*n+i*i:Math.sqrt(n*n+i*i)}},{key:"solveAngle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return Math.atan2(e.y-t.y,e.x-t.x)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";return this.x+e+this.y}}]),e}(),Interaction=function e(){function t(t){l.isTouching=!0,l.x=t.x,l.y=t.y,l.hold.x=l.last.x=t.x,l.hold.y=l.last.y=t.y,l.delta.x=l.move.x=l.velocity.x=0,l.delta.y=l.move.y=l.velocity.y=0,h=0,l.events.fire(e.START,t),f=d=Render.TIME}function n(t){l.isTouching&&(l.move.x=t.x-l.hold.x,l.move.y=t.y-l.hold.y),l.x=t.x,l.y=t.y,l.delta.x=t.x-l.last.x,l.delta.y=t.y-l.last.y,l.last.x=t.x,l.last.y=t.y,h+=l.delta.length();var n=Math.max(.001,Render.TIME-(d||Render.TIME));d=Render.TIME,l.velocity.x=Math.abs(l.delta.x)/n,l.velocity.y=Math.abs(l.delta.y)/n,l.events.fire(e.MOVE,t),l.isTouching&&l.events.fire(e.DRAG,t)}function i(t){if(l.isTouching){l.isTouching=!1,l.move.x=0,l.move.y=0;Math.max(.001,Render.TIME-(d||Render.TIME))>100&&(l.delta.x=0,l.delta.y=0),l.events.fire(e.END,t),h<20&&Render.TIME-f<2e3&&l.events.fire(e.CLICK,t)}}var a=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Stage;if(_classCallCheck(this,e),!e.instance){e.CLICK="interaction_click",e.START="interaction_start",e.MOVE="interaction_move",e.DRAG="interaction_drag",e.END="interaction_end";var o={touchstart:[],touchmove:[],touchend:[]},s=function(e){return o.touchstart.forEach(function(t){return t(e)})},u=function(e){return o.touchmove.forEach(function(t){return t(e)})},c=function(e){return o.touchend.forEach(function(t){return t(e)})};e.bind=function(e,t){return o[e].push(t)},e.unbind=function(e,t){return o[e].remove(t)},Stage.bind("touchstart",s),Stage.bind("touchmove",u),Stage.bind("touchend",c),Stage.bind("touchcancel",c),Stage.bind("contextmenu",c),e.instance=this}var l=this;this.events=new Events,this.x=0,this.y=0,this.hold=new Vector2,this.last=new Vector2,this.delta=new Vector2,this.move=new Vector2,this.velocity=new Vector2;var h=void 0,f=void 0,d=void 0;r===Stage?e.bind("touchstart",t):r.bind("touchstart",t),e.bind("touchmove",n),e.bind("touchend",i),this.destroy=function(){return e.unbind("touchstart",t),e.unbind("touchmove",n),e.unbind("touchend",i),r!==Stage&&r.unbind&&r.unbind("touchstart",t),a.events.destroy(),Utils.nullObject(a)}},Mouse=new function e(){function t(e){i.x=e.x,i.y=e.y,i.normal.x=e.x/Stage.width,i.normal.y=e.y/Stage.height,i.tilt.x=2*i.normal.x-1,i.tilt.y=1-2*i.normal.y,i.inverseNormal.x=i.normal.x,i.inverseNormal.y=1-i.normal.y}var n=this;_classCallCheck(this,e);var i=this;this.x=0,this.y=0,this.normal={x:0,y:0},this.tilt={x:0,y:0},this.inverseNormal={x:0,y:0},this.init=function(){n.input=new Interaction,n.input.events.add(Interaction.START,t),n.input.events.add(Interaction.MOVE,t),t({x:Stage.width/2,y:Stage.height/2})}},Accelerometer=new function e(){function t(e){switch(window.orientation){case 0:i.x=-e.accelerationIncludingGravity.x,i.y=e.accelerationIncludingGravity.y,i.z=e.accelerationIncludingGravity.z,e.rotationRate&&(i.rotationRate.alpha=e.rotationRate.beta*i.toRadians,i.rotationRate.beta=-e.rotationRate.alpha*i.toRadians,i.rotationRate.gamma=e.rotationRate.gamma*i.toRadians);break;case 180:i.x=e.accelerationIncludingGravity.x,i.y=-e.accelerationIncludingGravity.y,i.z=e.accelerationIncludingGravity.z,e.rotationRate&&(i.rotationRate.alpha=-e.rotationRate.beta*i.toRadians,i.rotationRate.beta=e.rotationRate.alpha*i.toRadians,i.rotationRate.gamma=e.rotationRate.gamma*i.toRadians);break;case 90:i.x=e.accelerationIncludingGravity.y,i.y=e.accelerationIncludingGravity.x,i.z=e.accelerationIncludingGravity.z,e.rotationRate&&(i.rotationRate.alpha=e.rotationRate.alpha*i.toRadians,i.rotationRate.beta=e.rotationRate.beta*i.toRadians,i.rotationRate.gamma=e.rotationRate.gamma*i.toRadians);break;case-90:i.x=-e.accelerationIncludingGravity.y,i.y=-e.accelerationIncludingGravity.x,i.z=e.accelerationIncludingGravity.z,e.rotationRate&&(i.rotationRate.alpha=-e.rotationRate.alpha*i.toRadians,i.rotationRate.beta=-e.rotationRate.beta*i.toRadians,i.rotationRate.gamma=e.rotationRate.gamma*i.toRadians)}}function n(e){for(var t in e)~t.toLowerCase().indexOf("heading")&&(i.heading=e[t]);switch(window.orientation){case 0:i.alpha=e.beta*i.toRadians,i.beta=-e.alpha*i.toRadians,i.gamma=e.gamma*i.toRadians;break;case 180:i.alpha=-e.beta*i.toRadians,i.beta=e.alpha*i.toRadians,i.gamma=e.gamma*i.toRadians;break;case 90:i.alpha=e.alpha*i.toRadians,i.beta=e.beta*i.toRadians,i.gamma=e.gamma*i.toRadians;break;case-90:i.alpha=-e.alpha*i.toRadians,i.beta=-e.beta*i.toRadians,i.gamma=e.gamma*i.toRadians}i.tilt=e.beta*i.toRadians,i.yaw=e.alpha*i.toRadians,i.roll=-e.gamma*i.toRadians,"Android"===Device.os&&(i.heading=function(e,t,n){var i=Math.PI/180,a=t?t*i:0,r=n?n*i:0,o=e?e*i:0,s=Math.cos(r),u=Math.cos(o),c=Math.sin(a),l=Math.sin(r),h=Math.sin(o),f=-u*l-h*c*s,d=-h*l+u*c*s,v=Math.atan(f/d);d<0?v+=Math.PI:f<0&&(v+=2*Math.PI);return v*(180/Math.PI)}(e.alpha,e.beta,e.gamma))}_classCallCheck(this,e);var i=this;this.x=0,this.y=0,this.z=0,this.alpha=0,this.beta=0,this.gamma=0,this.heading=0,this.rotationRate={},this.rotationRate.alpha=0,this.rotationRate.beta=0,this.rotationRate.gamma=0,this.toRadians="iOS"===Device.os?Math.PI/180:1,this.init=function(){window.addEventListener("devicemotion",t,!0),window.addEventListener("deviceorientation",n,!0)}},Images=new(function(){function e(){_classCallCheck(this,e),this.CORS=null}return _createClass(e,[{key:"createImg",value:function(e,t){var n=new Image;return n.crossOrigin=this.CORS,n.src=e,n.onload=t,n.onerror=t,n}},{key:"promise",value:function(e){"string"==typeof e&&(e=this.createImg(e));var t=Promise.create();return e.onload=t.resolve,e.onerror=t.resolve,t}}]),e}()),AssetLoader=function(){function e(t,n){function i(){a.events.fire(Events.PROGRESS,{percent:++o/r}),o===r&&(a.events.fire(Events.COMPLETE),n&&n())}_classCallCheck(this,e),Array.isArray(t)&&(t=t.map(function(e){return Utils.basename(e)}).reduce(function(e,n,i){return e[n]=t[i],e},{}));var a=this;this.events=new Events,this.CDN=Config.CDN||"";var r=Object.keys(t).length,o=0;for(var s in t)!function(e,t){var n=Utils.extension(t);if(!n.includes(["jpg","jpeg","png","gif","svg"]))return n.includes(["mp3","m4a","ogg","wav","aif"])?window.AudioContext&&window.WebAudio?void window.fetch(t).then(function(t){if(!t.ok)return i();t.arrayBuffer().then(function(t){return window.WebAudio.createSound(e,t,i)})}).catch(function(){i()}):i():void window.get(t).then(function(e){"js"===n?window.eval(e.replace("use strict","")):n.includes(["fs","vs","glsl"])&&window.Shaders&&window.Shaders.parse(e,t),i()}).catch(function(){i()});Images.createImg(t,i)}(s,this.CDN+t[s])}return _createClass(e,null,[{key:"loadAssets",value:function(t,n){var i=Promise.create();return n||(n=i.resolve),i.loader=new e(t,n),i}}]),e}(),FontLoader=function(){function e(t,n){_classCallCheck(this,e);var i=this;this.events=new Events;var a=void 0;!function(){Array.isArray(t)||(t=[t]),a=Stage.create("FontLoader");for(var e=0;e<t.length;e++)a.create("font").fontStyle(t[e],12,"#000").text("LOAD").css({top:-999})}(),setTimeout(function(){a.destroy(),i.complete=!0,i.events.fire(Events.COMPLETE),n&&n()},500)}return _createClass(e,null,[{key:"loadFonts",value:function(t,n){var i=Promise.create();return n||(n=i.resolve),i.loader=new e(t,n),i}}]),e}();window.AudioContext||(window.AudioContext=window.webkitAudioContext||window.mozAudioContext||window.oAudioContext);var WebAudio=new function e(){var t=this;_classCallCheck(this,e);var n={},i=void 0;this.init=function(){window.AudioContext&&(i=new AudioContext),i&&(t.globalGain=i.createGain(),t.globalGain.connect(i.destination))},this.createSound=function(e,a,r){var o={};i.decodeAudioData(a,function(e){o.buffer=e,o.audioGain=i.createGain(),o.audioGain.connect(t.globalGain),o.complete=!0,r&&r()}),n[e]=o},this.getSound=function(e){return n[e]},this.trigger=function(e){if(i){var n=t.getSound(e),a=i.createBufferSource();a.buffer=n.buffer,a.connect(n.audioGain),a.loop=!!n.loop,a.start(0)}},this.mute=function(){i&&TweenManager.tween(t.globalGain.gain,{value:0},300,"easeOutSine")},this.unmute=function(){i&&TweenManager.tween(t.globalGain.gain,{value:1},500,"easeOutSine")},window.WebAudio=this},Shader=function(){function e(t,n,i){function a(e,t){return(e=("vs"===t?["precision highp float;","precision highp int;","attribute vec2 uv;","attribute vec3 position;","attribute vec3 normal;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"):[~e.indexOf("dFdx")?"#extension GL_OES_standard_derivatives : enable":"","precision highp float;","precision highp int;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 modelMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;"].join("\n"))+"\n\n"+e).replace(/#s?chunk\(\s?(\w+)\s?\);/g,function(e,t){return THREE.ShaderChunk[t]+"\n"})}_classCallCheck(this,e);var r=this;this.uniforms={},this.properties={},function(){for(var e in i)void 0!==i[e].value?r.uniforms[e]=i[e]:r.properties[e]=i[e]}(),function(){var e={};e.vertexShader=a(t,"vs"),e.fragmentShader=a(n,"fs"),e.uniforms=r.uniforms;for(var i in r.properties)e[i]=r.properties[i];r.material=new THREE.RawShaderMaterial(e),r.material.shader=r,r.uniforms=r.material.uniforms}()}return _createClass(e,[{key:"set",value:function(e,t){TweenManager.clearTween(this.uniforms[e]),this.uniforms[e].value=t}},{key:"tween",value:function(e,t,n,i,a,r,o){return TweenManager.tween(this.uniforms[e],{value:t},n,i,a,r,o)}},{key:"getValues",value:function(){var e={};for(var t in this.uniforms)e[t]=this.uniforms[t].value;return e}},{key:"copyUniformsTo",value:function(e){for(var t in this.uniforms)e.uniforms[t]=this.uniforms[t]}},{key:"cloneUniformsTo",value:function(e){for(var t in this.uniforms)e.uniforms[t]={type:this.uniforms[t].type,value:this.uniforms[t].value}}},{key:"destroy",value:function(){return this.material.dispose(),Utils.nullObject(this)}}]),e}();"undefined"!=typeof Promise&&(Promise.create=function(){var e=void 0,t=void 0,n=new Promise(function(n,i){e=n,t=i});return n.resolve=e,n.reject=t,n}),Math.sign=function(e){return 0==(e=+e)||isNaN(e)?Number(e):e>0?1:-1},Math.degrees=function(e){return e*(180/Math.PI)},Math.radians=function(e){return e*(Math.PI/180)},Math.clamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,Math.min(t,n)),Math.max(t,n))},Math.range=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=(e-t)*(a-i)/(n-t)+i;return arguments[5]?Math.clamp(r,Math.min(i,a),Math.max(i,a)):r},Math.mix=function(e,t,n){return e*(1-n)+t*n},Math.step=function(e,t){return t<e?0:1},Math.smoothStep=function(e,t,n){var i=Math.max(0,Math.min(1,(n-e)/(t-e)));return i*i*(3-2*i)},Math.fract=function(e){return e-Math.floor(e)},Math.mod=function(e,t){return(e%t+t)%t},Array.prototype.remove=function(e){var t=this.indexOf(e);if(~t)return this.splice(t,1)},Array.prototype.last=function(){return this[this.length-1]},String.prototype.includes=function(e){if(!Array.isArray(e))return~this.indexOf(e);for(var t=e.length-1;t>=0;t--)if(~this.indexOf(e[t]))return!0;return!1},String.prototype.clip=function(e,t){return this.length>e?this.slice(0,e)+t:this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},window.fetch||(window.fetch=function(e){function t(){var e=[],n=[],i={},r=void 0;return a.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(t,a,o){e.push(a=a.toLowerCase()),n.push([a,o]),r=i[a],i[a]=r?r+","+o:o}),{ok:1==(a.status/200|0),status:a.status,statusText:a.statusText,url:a.responseURL,clone:t,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(a.responseXML)},blob:function(){return Promise.resolve(new Blob([a.response]))},arrayBuffer:function(){return Promise.resolve(new ArrayBuffer([a.response]))},headers:{keys:function(){return e},entries:function(){return n},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Promise.create(),a=new XMLHttpRequest;a.open(n.method||"GET",e);for(var r in n.headers)a.setRequestHeader(r,n.headers[r]);return a.onload=function(){return i.resolve(t())},a.onerror=i.reject,a.send(n.body),i}),window.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Promise.create();return t.method="GET",window.fetch(e,t).then(function(e){if(!e.ok)return n.reject(e);e.text().then(function(e){if(e.charAt(0).includes(["[","{"]))try{n.resolve(JSON.parse(e))}catch(t){n.resolve(e)}else n.resolve(e)})}).catch(n.reject),n},window.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Promise.create();return n.method="POST",n.body=JSON.stringify(t),window.fetch(e,n).then(function(e){if(!e.ok)return i.reject(e);e.text().then(function(e){if(e.charAt(0).includes(["[","{"]))try{i.resolve(JSON.parse(e))}catch(t){i.resolve(e)}else i.resolve(e)})}).catch(i.reject),i},window.getURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";window.open(e,t)},window.Global||(window.Global={}),window.Config||(window.Config={});var vertColourBeam="#define GLSLIFY 1\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragColourBeam="#define GLSLIFY 1\n// Based on https://www.shadertoy.com/view/XdlSDs by dynamite\n\nuniform float iGlobalTime;\nuniform vec2 iResolution;\nuniform vec2 iMouse;\nuniform float iRadius;\nuniform float iBeam;\nuniform float iBeamWidth;\n\nvoid main() {\n    vec2 p = (gl_FragCoord.xy - iMouse.xy * iResolution.xy) / iResolution.y;\n    float a = atan(p.x, p.y);\n    float r = length(p) - iRadius;\n    vec2 uv = vec2(a, r);\n\n    vec3 horColour = vec3(gl_FragCoord.xy / iResolution.xy, 0.5);\n    vec3 horBeam = vec3(abs(iBeam / (iBeamWidth * uv.y)));\n    gl_FragColor = vec4(horBeam * horColour, 1.0);\n}\n";Config.UI_COLOR="white",Config.UI_OFFSET=Device.phone?20:35,Config.ABOUT_COPY="A lightweight web framework for the future.",Config.ABOUT_HYDRA_URL="https://medium.com/@activetheory/mira-exploring-the-potential-of-the-future-web-e1f7f326d58e",Config.ABOUT_GITHUB_URL="https://github.com/pschroen/alien.js",Config.ASSETS=["assets/js/lib/three.min.js","assets/sounds/BassDrum.mp3","assets/sounds/DeepSpacy.mp3","assets/sounds/MagicGleam.mp3"],Events.START="start",Events.OPEN_ABOUT="open_about",Events.CLOSE_ABOUT="close_about";var UIAbout=function(e){function t(){function e(){Stage.width<800?(s.transform({x:100}),o.forEach(function(e){return e.css({left:270})})):(s.transform({x:0}),o.forEach(function(e){return e.css({left:350})}))}function n(e){"over"===e.action&&e.object.letters.forEach(function(e,t){return e.tween({y:-5,opacity:0},125,"easeOutCubic",15*t,function(){return e.transform({y:5}).tween({y:0,opacity:1},300,"easeOutCubic")})})}function i(e){WebAudio.mute(),r.delayedCall(function(){var t=e.object.title.toLowerCase();getURL(~t.indexOf("source")?Config.ABOUT_GITHUB_URL:Config.ABOUT_HYDRA_URL)},300)}_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"UIAbout")),r=a,o=[],s=void 0,u=void 0,c=void 0;return r.size("100%").size(800,430).center(),(s=r.create(".wrapper")).size(600,350).enable3D(2e3),s.rotationY=0,s.rotationX=0,(u=s.initClass(AlienKitty)).transform({z:-20}).css({marginTop:-88}),(c=r.create(".description")).size(260,50),c.fontStyle("Lato",12,Config.UI_COLOR),c.css({left:350,top:200,fontWeight:"700",lineHeight:25,letterSpacing:.36,opacity:.75}),c.top=200,c.text(Config.ABOUT_COPY),o.push(c),["Source code","Inspiration"].forEach(function(e,t){var a=r.create(".link");a.size("auto",20),a.fontStyle("Lato",12,Config.UI_COLOR),a.css({left:350,top:250+27*t,fontWeight:"700",letterSpacing:.36}),a.text(e),a.letters=a.split(),a.interact(n,i),a.hit.mouseEnabled(!0),a.top=250+27*t,a.title=e,o.push(a)}),Stage.events.add(Events.RESIZE,e),e(),a.update=function(){Device.mobile?(s.rotationY+=.07*(Accelerometer.x-s.rotationY),s.rotationX+=.07*(-Accelerometer.y-s.rotationX)):(s.rotationY+=.07*(Math.range(Mouse.x,0,Stage.width,-5,5)-s.rotationY),s.rotationX+=.07*(-Math.range(Mouse.y,0,Stage.height,-10,10)-s.rotationX)),s.transform()},a.animateIn=function(){u.ready().then(u.animateIn),o.forEach(function(e,t){return e.transform({y:50}).css({opacity:0}).tween({y:0,opacity:e.hit?1:.75},1e3,"easeOutCubic",500+80*t)})},a.animateOut=function(){u.animateOut(),o.forEach(function(e,t){return e.tween({y:20,opacity:0},500,"easeInCubic",40+40*(o.length-t))})},a}return _inherits(t,Interface),t}(),UIFooterItem=function(e){function t(e,n){function i(e){"over"===e.action&&u.forEach(function(e,t){return e.tween({y:-5,opacity:0},125,"easeOutCubic",15*t,function(){return e.transform({y:5}).tween({y:0,opacity:1},300,"easeOutCubic")})})}function a(){o.events.fire(Events.CLICK)}_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"UIFooterItem")),o=r,s=void 0,u=void 0;return o.size(n,25),o.css({top:0,right:0}),(s=o.create(".text")).fontStyle("Lato",12,Config.UI_COLOR),s.css({width:"100%",fontWeight:"700",lineHeight:25,letterSpacing:.36,textAlign:"center",whiteSpace:"nowrap"}),s.text(e),u=s.split(),o.interact(i,a),o.hit.mouseEnabled(!0),r}return _inherits(t,Interface),t}(),UIFooter=function(e){function t(){function e(){WebAudio.mute(),a.delayedCall(function(){return getURL(Config.ABOUT_GITHUB_URL)},300)}function n(){Stage.events.fire(Events.OPEN_ABOUT)}_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"UIFooter")),a=i,r=void 0,o=void 0;return a.size(240,30).css({bottom:Config.UI_OFFSET,right:Config.UI_OFFSET}),(r=a.initClass(UIFooterItem,"Source code",80)).transform({x:-10}).css({opacity:0}).tween({x:0,opacity:1},1e3,"easeOutQuart",2100),(o=a.initClass(UIFooterItem,"About",42)).transform({x:-10}).css({opacity:0,right:95}).tween({x:0,opacity:1},1e3,"easeOutQuart",2300),r.events.add(Events.CLICK,e),o.events.add(Events.CLICK,n),i}return _inherits(t,Interface),t}(),UI=function(e){function t(){function e(){r.startRender(i),r.show(),o.tween({opacity:.85},2e3,"easeOutSine"),s.animateIn(),o.hit.show()}function n(){o.hit.hide(),s.animateOut(),o.tween({opacity:0},1e3,"easeOutSine",function(){r.hide(),r.stopRender(i)})}function i(){s.update()}_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"UI")),r=a,o=void 0,s=void 0;return r.hide(),r.size("100%").css({left:0,top:0}).mouseEnabled(!1),(o=r.create(".bg")).size("100%").bg("#000").css({opacity:0}),o.interact(null,n),o.hit.css({cursor:"auto"}),o.hit.mouseEnabled(!0),s=r.initClass(UIAbout),Stage.initClass(UIFooter),Stage.events.add(Events.OPEN_ABOUT,e),Stage.events.add(Events.CLOSE_ABOUT,n),Stage.add(a),a}return _inherits(t,Interface),_createClass(t,null,[{key:"instance",value:function(){return this.singleton||(this.singleton=new t),this.singleton}}]),t}(),ColourBeamScene=function(e){function t(){function e(){l=1.2,h=1}function n(){l=40,h=0}function i(){u.scale.set(Stage.width,Stage.height,1)}function a(){o.object3D.visible&&(s.uniforms.iBeamWidth.value+=.3*(l-s.uniforms.iBeamWidth.value),c&&(c.audioGain.gain.value+=.3*(h-c.audioGain.gain.value)))}_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),o=r;r.object3D=new THREE.Object3D;var s=void 0,u=void 0,c=void 0,l=40,h=0;return World.scene.add(r.object3D),o.object3D.visible=!1,s=o.initClass(Shader,vertColourBeam,fragColourBeam,{iGlobalTime:World.time,iResolution:World.resolution,iMouse:{value:Mouse.inverseNormal},iRadius:{value:0},iBeam:{value:0},iBeamWidth:{value:l},depthWrite:!1,depthTest:!1}),(u=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),s.material)).scale.set(Stage.width,Stage.height,1),o.object3D.add(u),Stage.events.add(Events.RESIZE,i),Mouse.input.events.add(Interaction.START,e),Mouse.input.events.add(Interaction.END,n),n(),r.animateIn=function(){r.startRender(a),r.object3D.visible=!0,s.uniforms.iBeam.value=0,TweenManager.tween(s.uniforms.iBeam,{value:1},1e3,"easeOutSine")},r.initAudio=function(){(c=WebAudio.getSound("MagicGleam"))&&(c.audioGain.gain.value=0,c.loop=!0,WebAudio.trigger("MagicGleam"))},r}return _inherits(t,Component),t}(),World=function(e){function t(){function e(){l=Math.range(Mouse.input.velocity.length(),0,8,.5,1,!0)}function n(){o.setSize(Stage.width,Stage.height),u.aspect=Stage.width/Stage.height,u.position.z=1/Math.tan(Math.radians(30))*.5*Stage.height,u.updateProjectionMatrix(),t.resolution.value.set(Stage.width*t.dpr,Stage.height*t.dpr)}_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=.5,r=.95,o=void 0,s=void 0,u=void 0,c=void 0,l=a;return t.dpr=Math.min(1.5,Device.pixelRatio),(o=new THREE.WebGLRenderer({powerPreference:"high-performance"})).setPixelRatio(t.dpr),s=new THREE.Scene,u=new THREE.PerspectiveCamera(60,Stage.width/Stage.height,1,1e4),t.scene=s,t.renderer=o,t.element=o.domElement,t.camera=u,t.time={value:0},t.resolution={value:new THREE.Vector2(Stage.width*t.dpr,Stage.height*t.dpr)},Mouse.input.events.add(Interaction.MOVE,e),Stage.events.add(Events.RESIZE,n),n(),i.startRender(function(e,n){t.time.value+=.001*n,o.render(s,u),c&&((l*=r)<a&&(l=a),c.audioGain.gain.value+=.3*(l-c.audioGain.gain.value))}),Stage.add(t.element),i.initAudio=function(){(c=WebAudio.getSound("DeepSpacy"))&&(c.audioGain.gain.value=a,c.loop=!0,WebAudio.trigger("DeepSpacy"))},i}return _inherits(t,Component),_createClass(t,null,[{key:"instance",value:function(){return this.singleton||(this.singleton=new t),this.singleton}}]),t}(),AlienKitty=function(e){function t(){function e(){o.loaded=!0,s.bg("assets/images/alienkitty.svg"),u.bg("assets/images/alienkitty_eyelid.svg"),c.bg("assets/images/alienkitty_eyelid.svg")}function n(){o.delayedCall(Utils.headsTails(i,a),Utils.random(0,1e4))}function i(){u.tween({scaleY:1.5},120,"easeOutCubic",function(){u.tween({scaleY:.01},180,"easeOutCubic")}),c.tween({scaleX:1.3,scaleY:1.3},120,"easeOutCubic",function(){c.tween({scaleX:1,scaleY:.01},180,"easeOutCubic",function(){n()})})}function a(){u.tween({scaleY:1.5},120,"easeOutCubic",function(){u.tween({scaleY:.01},180,"easeOutCubic")}),c.tween({scaleX:1.3,scaleY:1.3},180,"easeOutCubic",function(){c.tween({scaleX:1,scaleY:.01},240,"easeOutCubic",function(){n()})})}_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"AlienKitty")),o=r,s=void 0,u=void 0,c=void 0;return o.size(90,86).center().css({opacity:0}),s=o.create(".alienkitty").size(90,86),u=s.create(".eyelid1").size(24,14).css({left:35,top:25}).transformPoint("50%",0).transform({scaleX:1.5,scaleY:.01}),c=s.create(".eyelid2").size(24,14).css({left:53,top:26}).transformPoint(0,0).transform({scaleX:1,scaleY:.01}),r.animateIn=function(){n(),r.tween({opacity:1},1e3,"easeOutSine")},r.animateOut=function(e){r.tween({opacity:0},500,"easeInOutQuad",e)},r.ready=function(){return Promise.all([Images.promise("assets/images/alienkitty.svg"),Images.promise("assets/images/alienkitty_eyelid.svg")]).then(e)},r}return _inherits(t,Interface),t}(),Loader=function(e){function t(){function e(e){TweenManager.tween(r,{progress:e.percent},2e3,"easeInOutSine",null,function(){s.inner.text(Math.round(100*r.progress)),1===r.progress&&(r.loaded=!0,r.events.fire(Events.COMPLETE),s.tween({opacity:0},200,"easeOutSine",function(){s.hide(),u.transform({y:10}).css({opacity:0}).tween({y:0,opacity:1},1e3,"easeOutQuart",100),Mouse.input.events.add(Interaction.CLICK,n),r.delayedCall(function(){return i((Device.mobile?"Tap":"Click")+" anywhere")},7e3),r.delayedCall(function(){return i(Device.mobile?"Tap tap!":"Click!")},14e3)}))})}function n(){Mouse.input.events.remove(Interaction.CLICK,n),Stage.events.fire(Events.START),WebAudio.trigger("BassDrum")}function i(e){u.tween({y:-10,opacity:0},300,"easeInSine",function(){u.inner.text(e),u.transform({y:10}).tween({y:0,opacity:1},1e3,"easeOutCubic")})}_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Loader")),r=a,o=void 0,s=void 0,u=void 0;return r.size("100%"),r.progress=0,(o=r.initClass(AlienKitty)).css({marginTop:-108}),o.ready().then(o.animateIn),(s=r.create(".number")).size(150,25).center(),s.inner=s.create(".inner"),s.inner.fontStyle("Lato",12,Config.UI_COLOR),s.inner.css({width:"100%",fontWeight:"700",lineHeight:25,letterSpacing:.36,textAlign:"center",whiteSpace:"nowrap"}),s.inner.text(""),(u=r.create(".title")).size(600,25).center().css({opacity:0}),u.inner=u.create(".inner"),u.inner.fontStyle("Lato",12,Config.UI_COLOR),u.inner.css({width:"100%",fontWeight:"700",lineHeight:25,letterSpacing:.36,textAlign:"center",whiteSpace:"nowrap"}),u.inner.text(Device.mobile?"Put on your headphones":"Turn up your speakers"),new AssetLoader(Config.ASSETS).events.add(Events.PROGRESS,e),a.animateOut=function(e){u.tween({opacity:0},200,"easeOutSine"),o.animateOut(e)},a}return _inherits(t,Interface),t}(),Main=function e(){function t(){World.instance(),r=Stage.initClass(ColourBeamScene)}function n(){a.animateOut(function(){a=a.destroy(),r.animateIn(),UI.instance(),World.instance().initAudio(),r.initAudio()})}function i(e){"blur"===e.type?WebAudio.mute():WebAudio.unmute()}_classCallCheck(this,e);var a=void 0,r=void 0;WebAudio.init(),Stage.size("100%"),Mouse.init(),Accelerometer.init(),FontLoader.loadFonts(["Lato"]).then(function(){(a=Stage.initClass(Loader)).events.add(Events.COMPLETE,t)}),Stage.events.add(Events.START,n),Stage.events.add(Events.VISIBILITY,i)};new Main;
